<!DOCTYPE html>
<!-- saved from url=(0042)https://juejin.cn/post/6962777564335046687 -->
<html lang="zh" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>一文通读 Groovy 元对象协议 MOP - 掘金</title><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileColor" content="#da532c"><meta data-n-head="ssr" vmid="description" name="description" content="元数据是描述数据的数据；元编程，就是用程序编写程序。本文介绍 Groovy 如何通过 MOP 实现运行时元编程。"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="Groovy"><link data-n-head="ssr" rel="preconnect" href="https://lf3-cdn-tos.bytescm.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://mcs.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://i.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://api.juejin.cn/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://unpkg.byted-static.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p3-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://mcs.snssdk.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://i.snssdk.com/"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-16x16.png"><link data-n-head="ssr" rel="mask-icon" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/safari-pinned-tab.svg" color="#1E80FF"><link data-n-head="ssr" rel="manifest" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/site.webmanifest"><link data-n-head="ssr" rel="search" title="掘金" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/ionicons.min.css"><link data-n-head="ssr" rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/index.css"><link data-n-head="ssr" rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/iconfont.css"><link data-n-head="ssr" rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/bytedesign.min.css"><link data-n-head="ssr" rel="canonical" href="https://juejin.cn/post/6962777564335046687"><script async="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/browser.cn.js.下载" crossorigin="anonymous"></script><script async="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/analytics.js.下载"></script><script data-n-head="ssr" type="text/javascript" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/acrawler.js.下载"></script><style type="text/css" abt="234"></style><script data-n-head="ssr" vmid="slardar" type="text/javascript" crossorigin="anonymous">;(function (w, d, u, b, n, pc, ga, ae, po, s, p, e, t, pp) {pc = 'precollect';ga = 'getAttribute';ae = 'addEventListener';po = 'PerformanceObserver';s = function (m) {p = [].slice.call(arguments);p.push(Date.now(), location.href);(m == pc ? s.p.a : s.q).push(p)};s.q = [];s.p = { a: [] };w[n] = s;e = document.createElement('script');e.src = u + '?bid=' + b + '&globalName=' + n;e.crossOrigin = u.indexOf('sdk-web') > 0 ? 'anonymous' : 'use-credentials';d.getElementsByTagName('head')[0].appendChild(e);if (ae in w) {s.pcErr = function (e) {e = e || w.event;t = e.target || e.srcElement;if (t instanceof Element || t instanceof HTMLElement) {if (t[ga]('integrity')) {w[n](pc, 'sri', t[ga]('href') || t[ga]('src'))} else {w[n](pc, 'st', { tagName: t.tagName, url: t[ga]('href') || t[ga]('src') })}} else {w[n](pc, 'err', e.error || e.message)}};s.pcRej = function (e) {e = e || w.event;w[n](pc, 'err', e.reason || (e.detail && e.detail.reason))};w[ae]('error', s.pcErr, true);w[ae]('unhandledrejection', s.pcRej, true);};if('PerformanceLongTaskTiming' in w) {pp = s.pp = { entries: [] };pp.observer = new PerformanceObserver(function (l) {pp.entries = pp.entries.concat(l.getEntries())});pp.observer.observe({ entryTypes: ['longtask', 'largest-contentful-paint','layout-shift'] })}})(window,document,'https://lf3-short.ibytedapm.com/slardar/fe/sdk-web/browser.cn.js','2608','SlardarWeb')</script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/browser.cn.js(1).下载" crossorigin="anonymous"></script><script data-n-head="ssr" type="application/ld+json">[{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://juejin.cn/post/6962777564335046687"},"headline":"一文通读 Groovy 元对象协议 MOP","description":"元数据是描述数据的数据；元编程，就是用程序编写程序。本文介绍 Groovy 如何通过 MOP 实现运行时元编程。","image":["https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba3e6b0364ca43bc88a06fa17f676862~tplv-k3u1fbpfcp-watermark.image"],"author":{"@type":"Organization","name":"花花子"},"publisher":{"@type":"Organization","name":"掘金","logo":{"@type":"ImageObject","url":"//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg"}},"datePublished":"2021年05月16日","dateModified":"2021年05月17日"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"稀土掘金","position":1,"item":"https://juejin.cn"},{"@type":"ListItem","name":"后端","position":2,"item":"https://juejin.cn/backend"},{"@type":"ListItem","name":"文章","position":3}]}]</script><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/1962f0f.js.下载" as="script"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/2d95a65.js.下载" as="script"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/4809dd4.js.下载" as="script"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/app.89b9488.css" as="style"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/def72f5.js.下载" as="script"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/default.2050f18.css" as="style"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/7e1140b.js.下载" as="script"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/51.8344ef6.css" as="style"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/7b24b05.js.下载" as="script"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/198.3d69a3b.css" as="style"><link rel="preload" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/8abf2a2.js.下载" as="script"><link rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/app.89b9488.css"><link rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/default.2050f18.css"><link rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/51.8344ef6.css"><link rel="stylesheet" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/198.3d69a3b.css">
  <script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/d515672.js.下载"></script><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/9140e03.js.下载"></script><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/e7d967e.js.下载"></script><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/0d7c96c.js.下载"></script><script>//remove baidu search ad
var _countAA = 0
function doBBBd(){}
doBBBd()
document.addEventListener('keyup', function(){_countAA-=10;doBBBd()}, false)
document.addEventListener('click', function(){_countAA-=10;doBBBd()}, false)

</script><style>hcfy-result.__hcfy__result__loaded__.__hcfy__result__both__{border: 1px dotted}</style><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/134.092fb39.css"><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/5b24037.js.下载"></script><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/177.290e99d.css"><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/0746dfa.js.下载"></script><style type="text/css">.code-editor-container{display:block;position:relative;overflow:hidden;box-sizing:border-box;}iframe.code-editor-frame{width:100%;height:100%;border:none;border-radius:8px;box-sizing:border-box;border:0.5px solid rgba(128,128,128,0.4);}</style><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/1fa3a18.js.下载"></script><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/22.f94fff0.css"><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/9cb583c.js.下载"></script><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/36.6f090be.css"><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/df588cb.js.下载"></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/common-monitors.1.1.8.js.下载" crossorigin="anonymous"></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/monitors.3.7.0.cn.js.下载" async="" crossorigin="anonymous"></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/sentry.3.7.0.cn.js.下载" async="" crossorigin="anonymous"></script><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/153.4faa841.css"><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/aeca132.js.下载"></script><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/9.4cd501f.css"><link rel="preload" as="style" href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/83.ca68669.css"><script charset="utf-8" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/e1babf3.js.下载"></script></head>
  <body>
    <div id="__nuxt"><div id="__layout"><div id="juejin"><!----> <div class="view-container" data-v-4b9f9746="" data-v-020666e8=""><div class="main-header-box" data-v-4b9f9746=""><header visible="visible" data-fetch-key="0" class="main-header main-header unauthorized visible" data-v-62a2b6bf="" data-v-4b9f9746=""><div class="container" data-v-62a2b6bf=""><a href="https://juejin.cn/" class="logo" data-v-62a2b6bf=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/e08da34488b114bd4c665ba2fa520a31.svg" alt="稀土掘金" class="logo-img" data-v-62a2b6bf=""> <img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/6c61ae65d1c41ae8221a670fa32d05aa.svg" alt="稀土掘金" class="mobile" data-v-62a2b6bf=""></a> <!----> <!----> <nav role="navigation" class="main-nav" data-v-62a2b6bf=""><ul class="nav-list" data-v-62a2b6bf=""><!----> <li class="main-nav-list" data-v-62a2b6bf=""><div class="phone-show-menu isResourceVisible" data-v-62a2b6bf=""><span data-v-62a2b6bf="">首页</span> <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold16-icon" data-v-62a2b6bf=""><path d="M2.45025 4.82431C2.17422 4.49957 2.40501 4.00049 2.83122 4.00049H9.16878C9.59498 4.00049 9.82578 4.49957 9.54975 4.82431L6.38097 8.55229C6.1813 8.78719 5.8187 8.78719 5.61903 8.55229L2.45025 4.82431Z" data-v-62a2b6bf=""></path></svg></div> <ul class="phone-hide isResourceVisible" data-v-62a2b6bf=""><li class="nav-item link-item route-active" data-v-62a2b6bf=""><a href="https://juejin.cn/" data-v-62a2b6bf="">首页</a></li> <li class="nav-item link-item activities" data-v-62a2b6bf=""><a href="https://juejin.cn/pins" data-v-62a2b6bf=""><span class="text" data-v-62a2b6bf="">
                  沸点
                  <span data-v-62a2b6bf="" class="tablead">
                      嘉年华
                    </span></span></a></li> <li class="nav-item link-item book" data-v-62a2b6bf=""><a href="https://juejin.cn/course" data-v-62a2b6bf="">
                课程
                </a></li> <li class="nav-item link-item" data-v-62a2b6bf=""><a href="https://juejin.cn/live" data-v-62a2b6bf="">直播</a></li> <li class="nav-item link-item" data-v-62a2b6bf=""><a href="https://juejin.cn/events/all" data-v-62a2b6bf="">活动</a></li> <nav class="nav-item link-item" data-v-62a2b6bf=""><a href="https://detail.youzan.com/show/goods/newest?kdt_id=104340304" target="_blank" rel="nofollow noopener noreferrer" class="nav-item link-item no-border" data-v-62a2b6bf=""><span data-v-62a2b6bf="">商城</span></a> <!----></nav> <nav class="nav-item link-item download-icon isResourceVisible" data-v-62a2b6bf=""><a href="https://juejin.cn/app?utm_source=jj_nav" target="_blank" class="download-app no-border" data-v-62a2b6bf="">
                APP
              </a> <span data-v-62a2b6bf="" class="tablead">邀请有礼</span></nav> <nav class="nav-item link-item extension-icon" data-v-62a2b6bf=""><a href="https://juejin.cn/extension?utm_source=jj_nav" target="_blank" rel="nofollow noopener noreferrer" class="broswer-extension no-border isResourceVisible" data-v-62a2b6bf=""><span data-v-62a2b6bf="">插件</span></a></nav> <li tag="li" class="nav-item link-item" data-v-62a2b6bf=""><a target="_blank" href="https://juejin.cn/challenge/1?utm_source=web_nav" class="activity no-hover special-activity" data-v-62a2b6bf=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/759e2aa805c0461b840e0f0f09ed05fa_tplv-k3u1fbpfcp-zoom-1.image" style="max-width: 115px; vertical-align: middle" data-v-62a2b6bf=""></a></li></ul></li> <ul class="right-side-nav" data-v-62a2b6bf=""><li class="search-add" data-v-62a2b6bf=""><ul class="search-add-ul isResourceVisible" data-v-62a2b6bf=""><li class="nav-item search" data-v-62a2b6bf=""><form role="search" class="search-form isResourceVisible" data-v-62a2b6bf=""><input type="search" maxlength="32" placeholder="探索稀土掘金" value="" class="search-input isResourceVisible" data-v-62a2b6bf=""> <div class="seach-icon-container" data-v-62a2b6bf=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/1e8ab9a22f0ddc36349f60b38900d0bd.svg" alt="搜索" class="search-icon" data-v-62a2b6bf=""></div> <div class="typehead" style="display:none;" data-v-62a2b6bf=""><!----> <div class="title" data-v-62a2b6bf=""><span data-v-62a2b6bf="">搜索历史</span> <span class="clear" data-v-62a2b6bf="">
                        清空
                      </span></div> <div class="list" data-v-62a2b6bf=""><div data-v-62a2b6bf="">
                        TV
                      </div><div data-v-62a2b6bf="">
                        dataBinding
                      </div><div data-v-62a2b6bf="">
                        Compose desktop
                      </div><div data-v-62a2b6bf="">
                        flutter web
                      </div><div data-v-62a2b6bf="">
                        window 11
                      </div><div data-v-62a2b6bf="">
                        爬虫
                      </div></div></div></form></li> <li class="nav-item add creator-item" data-v-62a2b6bf=""><div class="add-group" data-v-3a3133c9="" data-v-62a2b6bf=""><!----> <button class="add-btn" data-v-3a3133c9="">
    创作者中心
  </button> <div class="more" data-v-3a3133c9=""><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold12-icon" data-v-3a3133c9=""><path d="M2.45025 4.82383C2.17422 4.49908 2.40501 4 2.83122 4H9.16878C9.59499 4 9.82578 4.49908 9.54975 4.82382L6.38097 8.5518C6.1813 8.7867 5.8187 8.7867 5.61903 8.5518L2.45025 4.82383Z" fill="white" data-v-3a3133c9=""></path></svg></div> <ul class="more-list" data-v-3a3133c9=""><li class="item" data-v-3a3133c9=""><span class="icon write-article" data-v-3a3133c9="">写文章</span></li><li class="item" data-v-3a3133c9=""><span class="icon issue-points" data-v-3a3133c9="">发沸点</span></li><li class="item" data-v-3a3133c9=""><span class="icon write-note" data-v-3a3133c9="">写笔记</span></li><li class="item" data-v-3a3133c9=""><span class="icon create-jcode" data-v-3a3133c9="">写代码</span></li><li class="item" data-v-3a3133c9=""><span class="icon drafts" data-v-3a3133c9="">草稿箱</span></li></ul> <!----> </div></li></ul></li> <!----> <li class="nav-item vip-entry" data-v-62a2b6bf=""><div class="vip-title" data-v-62a2b6bf=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/24127194d5b158d7eaf8f09a256c5d01.svg" alt="vip" class="vip-img" data-v-62a2b6bf=""> <div class="vip-words" data-v-62a2b6bf="">会员</div></div> <div class="vip-content" style="display:none;" data-v-62a2b6bf=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/a0ef799e93fdbfcffe8553ecf2beb5ba.svg" alt="doll" class="icon" data-v-62a2b6bf=""> <div class="content" data-v-62a2b6bf=""><span data-v-62a2b6bf="">掘金会员，新权益到账啦~!</span> <span data-v-62a2b6bf="">字节内部课程，VIP免费学习</span></div> <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="close" data-v-62a2b6bf=""><path d="M14.3029 3.69629L8.99959 8.99957L3.69629 14.3029" stroke="#8A919F" stroke-width="1.5" stroke-linecap="round" data-v-62a2b6bf=""></path><path d="M3.69629 3.69629L8.99959 8.99957L14.3029 14.3029" stroke="#8A919F" stroke-width="1.5" stroke-linecap="round" data-v-62a2b6bf=""></path></svg> <img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/fef2eb8d28949cc43248bad54cb1579a.svg" class="mask" data-v-62a2b6bf=""></div></li> <!----> <!----> <li class="nav-item auth" data-v-62a2b6bf=""><div class="login-button-wrap" data-v-62a2b6bf=""><button class="login-button" data-v-62a2b6bf="">
                登录
                <div data-v-62a2b6bf="" class="login-button-inner"><div data-v-62a2b6bf="" class="login-button-line"></div>
                  注册
                </div></button> <div data-v-62a2b6bf="" class="login-popover"><div data-v-69807493="" data-v-62a2b6bf="" class="login-guide-wrap login-guide-popover-wrap"><!----> <div data-v-69807493="" class="login-guide-title">登录掘金后可立即获得以下权益：</div> <ul data-v-69807493="" class="login-guide-list"><li data-v-69807493="" class="login-guide-list-item"><div data-v-69807493="" class="login-guide-icon-wrap"><svg data-v-69807493="" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-69807493="" d="M4.62218 2.68165C3.64897 2.29236 2.59033 3.0091 2.59033 4.05728V13.961C2.59033 14.2639 2.77476 14.5363 3.05601 14.6488L8.88416 16.98C9.59939 17.2661 10.3973 17.2661 11.1125 16.98L16.9406 14.6488C17.2219 14.5363 17.4063 14.2639 17.4063 13.961V4.05728C17.4063 3.0091 16.3477 2.29236 15.3745 2.68165L11.1125 4.38644C10.3973 4.67253 9.59939 4.67253 8.88416 4.38644L4.62218 2.68165Z" stroke="currentColor" stroke-width="1.2"></path><path data-v-69807493="" d="M9.99609 7.42676V14.094" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"></path></svg></div> <span data-v-69807493="" class="login-guide-text">免费试学课程</span></li><li data-v-69807493="" class="login-guide-list-item"><div data-v-69807493="" class="login-guide-icon-wrap"><svg data-v-69807493="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M8.99999 3.37781L7.26101 6.9014C7.15913 7.10768 6.96219 7.25119 6.73392 7.28433L2.84544 7.84938L5.65897 10.5919C5.65903 10.592 5.6589 10.5919 5.65897 10.5919C5.82418 10.7529 5.89936 10.9849 5.8605 11.2116L5.19624 15.0845L8.67423 13.256C8.87818 13.1488 9.12181 13.1488 9.32576 13.256L12.8037 15.0845L12.1395 11.2117C12.1006 10.9849 12.1756 10.7531 12.3408 10.5921C12.3409 10.592 12.3408 10.5922 12.3408 10.5921L15.1545 7.84938L11.2663 7.28437C11.038 7.25122 10.8409 7.10782 10.739 6.90153L8.99999 3.37781ZM9.26883 2.83308C9.26888 2.83298 9.26878 2.83318 9.26883 2.83308V2.83308ZM9.62775 2.39022C9.37097 1.86993 8.62901 1.86993 8.37224 2.39022L6.43408 6.3174L2.10014 6.94718C1.52608 7.03061 1.29661 7.73615 1.71217 8.14119C1.71216 8.14118 1.71219 8.14121 1.71217 8.14119L4.84822 11.1981L4.10789 15.5145C4.00989 16.0863 4.61 16.5224 5.12357 16.2525L8.99999 14.2145L12.8764 16.2525C13.3899 16.5224 13.9901 16.0863 13.8921 15.5146L13.1518 11.1981L16.2877 8.14126C16.7035 7.73618 16.4739 7.0306 15.8999 6.94718L11.5659 6.3174L9.62775 2.39022ZM4.96134 11.3084C4.96141 11.3084 4.96128 11.3083 4.96134 11.3084V11.3084Z" fill="currentColor"></path></svg></div> <span data-v-69807493="" class="login-guide-text">收藏有用文章</span></li><li data-v-69807493="" class="login-guide-list-item"><div data-v-69807493="" class="login-guide-icon-wrap"><svg data-v-69807493="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M12.1337 10.5801C12.4205 10.5801 12.653 10.8125 12.653 11.0993V11.8658H13.4194C13.7062 11.8658 13.9387 12.0983 13.9387 12.385C13.9387 12.6718 13.7062 12.9043 13.4194 12.9043H12.1337C11.847 12.9043 11.6145 12.6718 11.6145 12.385V11.0993C11.6145 10.8125 11.847 10.5801 12.1337 10.5801Z" fill="currentColor"></path><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M2.05225 4.64889C2.05225 3.21507 3.21458 2.05273 4.6484 2.05273H11.4231C12.8569 2.05273 14.0193 3.21507 14.0193 4.64889V9.32197H12.9808V4.64889C12.9808 3.7886 12.2834 3.0912 11.4231 3.0912H4.6484C3.78811 3.0912 3.09071 3.7886 3.09071 4.64889V13.3522C3.09071 14.2125 3.78811 14.9099 4.6484 14.9099H12.2143V15.9483H4.6484C3.21459 15.9483 2.05225 14.786 2.05225 13.3522V4.64889Z" fill="currentColor"></path><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M12.214 9.51893C10.7255 9.51893 9.51893 10.7255 9.51893 12.214C9.51893 13.7024 10.7255 14.909 12.214 14.909C13.7024 14.909 14.909 13.7024 14.909 12.214C14.909 10.7255 13.7024 9.51893 12.214 9.51893ZM8.48047 12.214C8.48047 10.152 10.152 8.48047 12.214 8.48047C14.2759 8.48047 15.9475 10.152 15.9475 12.214C15.9475 14.2759 14.2759 15.9475 12.214 15.9475C10.152 15.9475 8.48047 14.2759 8.48047 12.214Z" fill="currentColor"></path><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M4.82129 5.4372C4.82129 5.15044 5.05376 4.91797 5.34052 4.91797L10.7306 4.91797C11.0174 4.91797 11.2499 5.15044 11.2499 5.4372C11.2499 5.72396 11.0174 5.95643 10.7306 5.95643L5.34052 5.95643C5.05376 5.95643 4.82129 5.72396 4.82129 5.4372Z" fill="currentColor"></path><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M4.78394 8.35712C4.78394 8.07035 5.01641 7.83789 5.30317 7.83789L8.03531 7.83791C8.32208 7.83791 8.55454 8.07038 8.55454 8.35715C8.55454 8.64391 8.32207 8.87637 8.03531 8.87637L5.30316 8.87635C5.0164 8.87635 4.78393 8.64388 4.78394 8.35712Z" fill="currentColor"></path></svg></div> <span data-v-69807493="" class="login-guide-text">查阅浏览足迹</span></li><li data-v-69807493="" class="login-guide-list-item"><div data-v-69807493="" class="login-guide-icon-wrap"><svg data-v-69807493="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M5.21627 3.23729H2.91894L2.91894 14.2645H5.21627V3.23729ZM2.91894 2.31836C2.41142 2.31836 2 2.72978 2 3.23729V14.2645C2 14.772 2.41142 15.1835 2.91894 15.1835H5.21627C5.72379 15.1835 6.13521 14.772 6.13521 14.2645V3.23729C6.13521 2.72978 5.72379 2.31836 5.21627 2.31836H2.91894Z" fill="currentColor"></path><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M8.43258 3.23729H6.13524L6.13524 14.2645H8.43258V3.23729ZM6.13524 2.31836C5.62773 2.31836 5.21631 2.72978 5.21631 3.23729V14.2645C5.21631 14.772 5.62773 15.1835 6.13524 15.1835H8.43258C8.9401 15.1835 9.35152 14.772 9.35152 14.2645V3.23729C9.35152 2.72978 8.9401 2.31836 8.43258 2.31836H6.13524Z" fill="currentColor"></path><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M12.0205 3.1255L9.80149 3.7201L12.6555 14.3716L14.8746 13.777L12.0205 3.1255ZM9.56365 2.83247C9.07343 2.96383 8.78251 3.46772 8.91386 3.95794L11.7679 14.6094C11.8993 15.0996 12.4032 15.3906 12.8934 15.2592L15.1124 14.6646C15.6027 14.5333 15.8936 14.0294 15.7622 13.5391L12.9082 2.88767C12.7768 2.39744 12.2729 2.10653 11.7827 2.23788L9.56365 2.83247Z" fill="currentColor"></path></svg></div> <span data-v-69807493="" class="login-guide-text">订阅优质专栏</span></li><li data-v-69807493="" class="login-guide-list-item"><div data-v-69807493="" class="login-guide-icon-wrap"><svg data-v-69807493="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-69807493="" fill-rule="evenodd" clip-rule="evenodd" d="M13.2368 3.03451C12.587 2.18471 11.3966 2.05398 10.5779 2.74252L8.99865 4.07065L7.41943 2.74252C6.60071 2.05398 5.41026 2.18471 4.76048 3.03451C4.40851 3.49484 4.28737 4.07174 4.38041 4.61328H3.42708C2.6907 4.61328 2.09375 5.21023 2.09375 5.94661V7.78026C2.09375 8.50852 2.67761 9.10041 3.40278 9.11338V14.285C3.40278 15.3896 4.29821 16.285 5.40278 16.285H12.5945C13.6991 16.285 14.5945 15.3896 14.5945 14.285V9.11342C15.3209 9.10187 15.9062 8.50942 15.9062 7.78026V5.94661C15.9062 5.21024 15.3093 4.61328 14.5729 4.61328H13.6169C13.7099 4.07174 13.5888 3.49484 13.2368 3.03451ZM12.61 4.61328C12.7209 4.3068 12.6796 3.95035 12.4715 3.67815C12.1572 3.26708 11.5813 3.20384 11.1853 3.53691L9.90541 4.61328H12.61ZM8.09189 4.61328L6.81202 3.53691C6.41598 3.20384 5.84013 3.26708 5.52581 3.67815C5.31768 3.95035 5.27642 4.3068 5.38727 4.61328H8.09189ZM3.09375 5.94661C3.09375 5.76252 3.24299 5.61328 3.42708 5.61328H8.49863V8.11359H3.42708C3.24299 8.11359 3.09375 7.96435 3.09375 7.78026V5.94661ZM9.49863 8.11359V5.61328H14.5729C14.757 5.61328 14.9062 5.76252 14.9062 5.94661V7.78026C14.9062 7.96435 14.757 8.11359 14.5729 8.11359H9.49863ZM4.40278 9.11719H8.49863L8.49863 15.285H5.40278C4.85049 15.285 4.40278 14.8373 4.40278 14.285V9.11719ZM9.49863 9.11719L9.49863 15.285H12.5945C13.1468 15.285 13.5945 14.8373 13.5945 14.285V9.11719H9.49863Z" fill="currentColor"></path></svg></div> <span data-v-69807493="" class="login-guide-text">体验签到抽奖</span></li><li data-v-69807493="" class="login-guide-list-item"><div data-v-69807493="" class="login-guide-icon-wrap"><svg data-v-69807493="" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="user-level-icon login-guide-icon"><path data-v-69807493="" d="M17.2673 10.1562H19.7673V12.6562" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path data-v-69807493="" d="M8.5625 8.25V18.375C8.5625 18.9273 9.01022 19.375 9.5625 19.375H20.4375" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path data-v-69807493="" d="M10.5625 16.0938L13.888 12.36L16.0216 14.2603L18.9739 10.9455" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></div> <span data-v-69807493="" class="login-guide-text">提升成长等级</span></li></ul> <button data-v-69807493="" type="button" class="login-guide-login-button byte-btn byte-btn--primary byte-btn--normal"><!----><!----><span>
    立即登录
  </span></button> <div data-v-69807493="" class="login-guide-register">
    首次使用？
    <div data-v-69807493="" class="login-guide-register-button">
      点我注册
    </div></div></div></div></div></li></ul></ul></nav></div> <!----></header></div>  <main class="container main-container" style="max-width:1140px;" data-v-4b9f9746=""><div class="view column-view" data-v-4b9f9746="" data-v-020666e8=""><div class="main-area article-area" data-v-4b9f9746="" data-v-020666e8=""><article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="6962777564335046687" data-draft-id="6962777777569595406" data-original-type="0" class="article" data-v-020666e8="" data-v-4b9f9746=""><!----> <meta itemprop="headline" content="一文通读 Groovy 元对象协议 MOP"> <meta itemprop="keywords" content="Groovy"> <meta itemprop="datePublished" content="2021-05-16T07:02:33.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="花花子"> <meta itemprop="url" content="https://juejin.cn/user/465848663023160"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-020666e8="">
            一文通读 Groovy 元对象协议 MOP
            <!----></h1> <div class="author-info-block" data-v-020666e8=""><a href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="avatar-link" data-v-020666e8=""><img loading="eager" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/2c3d36ac68756ea7f747669b94554d42_100x100.awebp" alt="" class="lazy avatar avatar" data-v-248050e4="" data-v-47508ed8="" data-v-020666e8=""></a> <div class="author-info-box" data-v-020666e8=""><div class="author-name" data-v-020666e8=""><a href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="username username ellipsis" data-v-0ef8bafa="" data-v-020666e8=""><span class="name" style="max-width:128px;" data-v-0ef8bafa="">
    花花子
  </span> <span blank="true" class="rank" data-v-3de16c56="" data-v-0ef8bafa=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/lv-4.a78c420.png" alt="lv-4" title="创作等级" data-v-3de16c56=""></span> <!----> <div class="vip-level" data-v-38a29e30="" data-v-0ef8bafa=""><span class="tooltip" data-v-38a29e30=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 融会贯通
      </div><span class="byte-tooltip__wrapper"><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/07302452a7ad81cb43a173b5cd580237.svg" alt="" data-v-38a29e30=""></span></span></div> </a> <!----></div> <div class="meta-box" data-v-020666e8=""><time datetime="2021-05-16T07:02:33.000Z" title="Sun May 16 2021 15:02:33 GMT+0800 (China Standard Time)" class="time" data-v-020666e8="">
                    2021年05月16日 15:02
                  </time> <span class="views-count" data-v-020666e8="">
                    ·&nbsp;&nbsp;阅读 911
                  </span> <!----></div> <!----></div> <button class="follow-button follow" data-v-565dd611="" data-v-020666e8=""><span class="icon icon-follow" data-v-565dd611=""></span> <span data-text="取消关注" class="text" data-v-565dd611="">关注</span></button></div> <img loading="eager" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/ba3e6b0364ca43bc88a06fa17f676862_tplv-k3u1fbpfcp-zoom-crop-mark_3024_3024_3024_1702.awebp" alt="一文通读 Groovy 元对象协议 MOP" class="lazy article-hero" data-v-248050e4="" data-v-020666e8=""> <!----> <!----> <div itemprop="articleBody" class="article-content" data-v-020666e8=""><div class="markdown-body cache"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre>code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"“";top:4px;left:6px}.markdown-body blockquote:after{content:"”";right:8px;bottom:-8px}.markdown-body blockquote>p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><h1 data-id="heading-0">7. Groovy 元对象协议</h1>
<p>编程中我们总是会听到 "元" ( Meta- ) 信息，或者 "元" 数据的一些说法，它们的通俗解释就是：描述信息的信息，或者是描述数据的数据。拿一张相片举例子，除了相片自身携带的图像信息以外，有关于它的印刷时间，拍摄时间，标签等都可以属于 "元信息"。在本篇文章中，信息本身就是 POJO / POGO 对象，而它的描述信息则是元方法 <code>MetaMethod</code> 和元属性 <code>MetaProperty</code>，后文统称两者为元信息。</p>
<p>由此引申，元编程 ( Metaprogramming )，就是 "用于编写程序的程序"，简单来说，通过操纵，创建各种元信息来达到动态编程，或者是自动化编程的手段。一个例子就是：Grails/GORM 利用元编程的能力为数据查询动态合成类和方法。元编程依赖一种约定 —— 那就是元对象协议 Meta Object Protocol，简称 MOP。Groovy 的 MOP 本身很简单 —— 仅仅用一个 <code>groovy.lang.MetaObjectProtocol </code> 接口规范了如何获取元信息，设置元信息。因此我们的关注点也不在 MOP 本身，而是围绕 MOP 的各种应用：<strong>方法拦截，方法合成，方法注入</strong>。</p>
<p>在 Java 当中，有关一个类的所有信息都已经在编译期间尘埃落定。我们常说 "Java 的动态反射" 也仅限于 "动态获取已有的静态信息"，而不能在运行时修改它的类型，或者赋予它全新的行为。但如果一个类是在运行期间基于各种元信息构建 ( 拼凑 ) 出来的呢？Groovy 的确提供了这么一个类 —— Expando。</p>
<p>本章首先介绍 MOP 最基本的内容，对于 POJO 或者 POGO，应该如何获取它们的元信息，然后再介绍基于这些元信息的实用操作。对于方法拦截，方法注入，方法合成等内容本章围绕两个重要的方法进行：<code>invokeMethod</code> 和 <code>methodMissing</code>。</p>
<h2 data-id="heading-1">7.1 POGO &amp; POJO，MetaClass</h2>
<p>POJO ( Plain Old Java Object )，简单 Java 对象，代表没有额外类继承 ( 只继承于 <code>java.lang.Object</code> )，没有额外接口实现，也没有被其它框架侵入的 Java 对象。从广义上来讲，它指不受任何特定 Java 对象模型，约定，框架约束的 Java 对象；而正因为它不和任何详细的业务功能绑定，从狭义上来看，POJO 又可以代表那些只用于承载数据，仅设置了 <code>setter</code> 和 <code>getter</code> 方法的 Java 对象，因此 POJO 有时又会和 Entity，DTO 等概念混淆，本文的 POJO 指广义的概念。</p>
<p>同理，在 Groovy 中，POGO 代表了普通的 Groovy 对象，它既是 <code>java.lang.Object</code> 的子类，又天然地实现了 <code>groovy.lang.GroovyObject</code> 接口；而 POJO 在这里可以是任何其它 JVM 语言实现的。下面是 <code>groovy.lang.GroovyObject</code> 接口的内容：</p>
<pre><code class="hljs language-java copyable" lang="java"><span class="hljs-comment">// 来自 IDEA 的反编译内容。</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">GroovyObject</span> {
    <span class="hljs-meta">@Internal</span>
    <span class="hljs-keyword">default</span> Object <span class="hljs-title function_">invokeMethod</span><span class="hljs-params">(String name, Object args)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.getMetaClass().invokeMethod(<span class="hljs-built_in">this</span>, name, args);
    }

    <span class="hljs-meta">@Internal</span>
    <span class="hljs-keyword">default</span> Object <span class="hljs-title function_">getProperty</span><span class="hljs-params">(String propertyName)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.getMetaClass().getProperty(<span class="hljs-built_in">this</span>, propertyName);
    }

    <span class="hljs-meta">@Internal</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperty</span><span class="hljs-params">(String propertyName, Object newValue)</span> {
        <span class="hljs-built_in">this</span>.getMetaClass().setProperty(<span class="hljs-built_in">this</span>, propertyName, newValue);
    }
    
    MetaClass <span class="hljs-title function_">getMetaClass</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMetaClass</span><span class="hljs-params">(MetaClass var1)</span>;
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>从方法名称来看，它们都和 元类型 <code>MetaClass</code> 紧密相关，事实也是如此。幸运的是，不论一个对象属于 POGO 还是 POJO，我们总通过 <code>.metaClass</code> 简单地提取出它们的元类型：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 该对象是一个 Java 实现
def pojo = new POJO(10)

// 该对象是一个 Groovy 实现
def pogo = new POGO()

// 任何在 Groovy Script 中使用的类都可以使用 .metaClass ，这而与它的源 JVM 语言无关。
// 结合了之前 "统一访问原则" 的设计思想。
pogo.metaClass
pojo.metaClass
<span class="copy-code-btn">复制代码</span></code></pre>
<p>实际上，两者的 <code>metaClass</code> 的获取途径并不相同：对于 POJO，Groovy 维护用于获取 <code>MetaClass</code> 的一个 <code>MetaClassRegistry</code>。而对于 POGO ，其 <code>.metaClass</code> 指向接口中的 <code>setMetaClass</code> 方法，这个语法糖在前文介绍 "统一访问原则" 时提到过。</p>
<h2 data-id="heading-2">7.2 基于 MetaClass 获取元信息</h2>
<p>无论是 POJO 还是 POGO，一旦获取了其 <code>MetaClass</code>，我们就能以类似 "Java 反射" 的形式在运行时获取这个类一切的元方法 <code>MetaMethod</code> 和元属性 <code>MetaProperty</code> ( 所以说访问修饰符在 Groovy 中 "形同虚设" )。</p>
<p><strong>元方法</strong> ( Meta Method )，包含了实例方法和静态方法，因此对应的获取方法叫 <code>getMetaMethod</code> ，<code>getStaticMetaMethod</code>。如果要获取重载的方法列表，那么对应的方法则是 <code>getMetaMethods</code> 和 <code>getStaticMetaMethods</code> 。获取的元方法可以通过 <code>invoke</code> 方法调用。下面是一个简单的例子：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def pojo = new POJO(10)
def methodName = "yawn"
def staticMethodName = "greet"

// 获取实例方法 (元方法) 的一个 "句柄"。
def method = pojo.metaClass.getMetaMethod(methodName)

// 通过 invoke 方法绑定一个实例并调用。
// 如果调用的方法是空括号方法，那么可以只传进一个实例。
method.invoke(pojo)

// 如果获取的元方法需要参数列表，则需要以可变参数的形式提供这些参数类型 Class, 或者是对应类型的任意 Object。
// 这里存在方法重载，如果只传入 null, 那么 Groovy 会疑惑第二个参数是 Class[] 还是 Object[] 因而报错。
// null as Class[] 是避免歧义的做法。
def staticMethod =  pojo.metaClass.getStaticMetaMethod(staticMethodName,null as Class[])
staticMethod.invoke(pojo)

// 下面演示了获取有参数列表的 "静态" 元方法的方式。
def staticMethodWithParam = pojo.metaClass.getStaticMetaMethod(staticMethodName,String.class)
// 静态方法不需要绑定特定对象。
staticMethodWithParam.invoke(null,"Tom")
<span class="copy-code-btn">复制代码</span></code></pre>
<p><strong>元属性</strong> ( Meta Property )，包含了实例属性和静态属性，对应的获取方法叫 <code>getMetaProperty</code>，<code>getStaticMetaProperty</code>。假定我们只是想对某些元信息的 "存在性" 做检查，那么可以使用 <code>responseTo</code> ( 检查元方法，在之前我们曾用于对 "鸭子类型"  进行检查 ) 或者是 <code>hasProperty</code> ( 检查元属性 ) 。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def pojo = new POJO(10)

def methodName = "SayHi"
def propertyName = "property"

println( "the pojo has the method ${methodName} ? ${pojo.respondsTo(methodName)?"yes":"no"}")
println( "the pojo has the method ${propertyName} ? ${pojo.hasProperty(propertyName)?"yes":"no"}")
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-3">7.4 动态访问对象</h2>
<p>我们之前已经介绍了一个动态访问对象属性的语法糖 —— 通过重载的 <code>getAt</code> 方法。这个属性完全可能是对象已有的，或者是我们通过操纵元属性添加的。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def pojo = new POJO(10)
println pojo["property"]
<span class="copy-code-btn">复制代码</span></code></pre>
<p>下面介绍通过另一种方式：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">println pojo."property"
<span class="copy-code-btn">复制代码</span></code></pre>
<p>或者是通过 GString 引用的方式指代属性名 ( 后文会经常使用这个操作方法 )：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def propertyName = "property"
println pojo."${propertyName}"
<span class="copy-code-btn">复制代码</span></code></pre>
<p>同理，如果要动态调用方法，除了 <code>invokeMethod()</code> 之外，还可以写成：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def methodName = "SayHi"
// 等价于 pojo.SayHi()
println pojo."${methodName}"()
<span class="copy-code-btn">复制代码</span></code></pre>
<p>此外，如果要查看 <strong>POGO 的</strong>所有属性 ( 包括 <code>class</code> 信息 )，可以通过 <code>.properties</code> ( <code>.getProperties()</code> 方法 ) 获取 Map 形式，或者是通过 <code>.metaPropertyValues</code> 获取 List 形式。这两个方法不是元对象协议的一部分，对 POJO 使用只能访问到 <code>class</code> 信息。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 获取一个 POGO 对象的所有属性。
pogo.properties
// 由于返回值是 Map，因此可以像 k-v 对那样 "取值"。
pogo.properties["property"]

// 或者拿到 for 循环里遍历：
def name,value
(name,value) = ["",""]
def str = /property name {${-&gt; name}},value is {${-&gt; value}}/
pogo.properties.each {
    entry -&gt;
        name = entry.key
        value = entry.value
        println str
}

// 获取链表形式
// getProperties() 方法本质上就是通过这个方法获取的，只不过额外包装了放入 Map 的过程。
pogo.metaPropertyValues.each {println "[${-&gt; it.value}:${it.name}]"}
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-4">7.5 动态创建类</h2>
<p>Groovy 提供了 <code>Expando</code> 来允许程序在运行时动态塑造出一个类。我们可以在构造器内部传入一个 Map 来任意指派它内部的属性，也可以通过赋值的形式随时为它注入全新的属性或者方法。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def namelessObj = new Expando(name:"jdbcConfiguration")

namelessObj.Ip = "192.168.2.140"
namelessObj.Port = "3306"
namelessObj.Db = "mysql"

// Expando 不支持统一访问原则，因此不能隐式地转换成 "uri" 属性。
namelessObj.getUri= {
    return "${delegate.Db}://${delegate.Ip}:${delegate.Port}"
}


// 支持对这个合成类的动态属性调用
println namelessObj["Ip"]

// 等价于以下访问方式
println namelessObj.Ip

// 支持对这个合成类的动态方法调用
def eval = "getUri"
println namelessObj."${eval}"()

// 等价于以下调用方式
// 访问不存在的属性返回 null
// 调用不存在的方法会被引导至 methodMissing 方法
println namelessObj.getUri()
<span class="copy-code-btn">复制代码</span></code></pre>
<p>它是轻量级的，且十分灵活。比如，为单元测试创建一个模拟对象 ( Mock ) 时，这个特性会大放光彩。</p>
<h1 data-id="heading-5">8. 基于 MOP 方法拦截</h1>
<p>对于学习过 Spring 的读者而言，方法拦截一定不陌生。Groovy 实现 AOP 不需要借助任何的框架来实现。本文所提到的方法拦截，形式上非常接近于 Spring 的环绕通知 ( Around Advice ) 。在这个环绕通知内部，我们将自由地支配前向通知，后向通知，以及在何时去调用原方法等等。</p>
<p>这一大章介绍方法拦截的两个思路，两者的区别在于是我们是否有权限修改这个类定义。如果我们是这个类的作者，那么可以通过硬编码 <code>GroovyInterceptable</code> 接口实现，否则，我们就需要借助元类型 <code>MetaClass</code> 注入特定方法的形式在外部进行方法拦截。</p>
<h2 data-id="heading-6">8.0 闭包属性可能会代替方法调用</h2>
<p>Groovy 有这样的语法现象：如果找不到一个实例的方法，那么就去寻找有无同名的闭包属性可以调用：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class POGO {
    // POGO 的一个名为 greet 的方法，优先被调用
    def greet(){
        println "greet by method"
    }
    // POGO 的一个名为 greet 的闭包属性，由于同名方法已经存在，因此该闭包不会被优先调用
    // 结合统一访问原则，以下写法会优先调用闭包： new POGO().greet, new POGO().getGreet().call()
    def greet = {
        println "greet by closure"
    }
    // 在同名方法不存在的情况下，Groovy 尝试去调用该闭包的 .call() 方法
    def hi = {
        println "hi by closure"
    }
    // 当发现方法不存在时的重载版 methodMiss() 方法
    def methodMissing(String name, def args) {
        println "a method $name doesn't exist."
        return null
    }
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>下面是一段测试结果：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 当方法和闭包属性同名时，这种写法优先选择前者。
// greet by method
pogo.greet()

// 注意，这种写法总是获取闭包属性。
pogo.greet

// 没有可用方法时选择同名的闭包属性并调用 call 方法，或者说使用这个闭包属性 "顶替" 不存在的同名方法。
// hi by closure
pogo.hi()

// 调用确实不存在的方法或闭包属性，会被引导至 methodMissing 方法。
// 如果自身没有实现 methodMissing 方法，那么就会抛出异常。
// a method echo doesn't exist.
pogo.echo()
<span class="copy-code-btn">复制代码</span></code></pre>
<p>注意，<code>greet()</code> 和 <code>greet</code> 在这里是不一样的：</p>
<ol>
<li><code>greet()</code> 表示方法调用，在同名方法不存在时，这也有可能指向一个名为 <code>greet</code> 的闭包调用。</li>
<li><code>greet</code> 表示访问属性，它在这里表示返回那个名为 <code>greet</code> 的闭包。但严格来说，它也有可能指向 <code>getGreet()</code> 方法。</li>
</ol>
<h2 data-id="heading-7">8.1 GroovyInterceptable 接口实现</h2>
<p>现在我们了解了，一个对象的方法如果要被成功调用，要么它的确有这个方法定义，要么它具备同名闭包的属性。而如果一个 POGO 实现了 <code>GroovyInterceptable</code> 接口，那么这个规则会被改写 —— 所有的方法调用会被其自身的 <code>invokeMethod()</code> 方法拦截，<strong>甚至这个方法或者闭包属性可以完全不存在</strong>。我们可以在这个方法内部加入统一的前向通知和后向通知，来达到切面编程的目的。</p>
<p>下面是一个 <code>Car</code> 的定义，这辆车有一些行为：启动 <code>run</code> 和仪表盘 <code>speed</code> 。假定我们想要在调用这两个方法之前和之后加上统一的处理方法，此时就可以使用 <code>GroovyInterceptable</code> 接口配合 <code>invokeMethod()</code> 方法对这些调用拦截。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class Car implements GroovyInterceptable {
    
	// 此处设计是为了避免 Car 自身对 println 方法进行拦截。
    def static outline = { any -&gt; System.out.println(any) }

    // 调用这些方法都会被拦截。
    def run() {outline "running!"}
    def speed(double kmh){"${kmh} km / h"}

    // 核心方法。
    def invokeMethod(String name, args) {
        // 前向通知
        outline "pre:the method ${name} needs check."

        // 通过 metaClass 调用原本的方法
        def result = this.metaClass.getMetaMethod(name, args as Object[]).invoke(this, args as Object[])

        // 后向通知
        outline "after:done "
        if (!result.is(null)){
            // 有结果则打印
            outline "and the result is ${result}"
        }
    }
}

def car = new Car()
car.run()
car.speed(109)

// 运行结果
// pre:the method run needs check.
// running!
// after:done

// pre:the method speed needs check.
// after:done 
// and the result is 109.0 km / h
<span class="copy-code-btn">复制代码</span></code></pre>
<p>注意，这个代码块特意没有使用原生的 <code>println</code> 方法进行控制台输出。原因是：<code>println</code> 方法是 Groovy 为 Object 注入的方法，这个方法也会被 POGO 自身的 <code>invokeMethod</code> 方法拦截，但我们并不希望这么做。<code>System.out.println()</code> 是 <code>PrintStream</code> 的一个 <code>static</code> 方法，它不会受此影响，且笔者又不想处处留下一长串的 <code>sout</code>，因此用一个命名更简短的闭包取而代之。</p>
<p>对这个套路比较熟悉的读者会明白：这是对<strong>代理模式</strong>的一个实践。被代理 ( 或称被 "拦截" ) 的方法名和方法参数都可以通过 <code>name</code> 和 <code>args</code> 获取，我们利用这两条信息在 <code>.metaClass</code> 中找到原来的方法并调用。这里同样是为了避免 Groovy 混淆重载的 <code>getMetaMethod</code> 方法，因此特意通过 <code>as</code> 关键字限定了类型。</p>
<p>如果调用的方法是不存在的，那么 <code>invokeMethod</code> 也会对此进行拦截。所有的前向通知都能够正常执行，直到通过调用 <code>getMetaMethod</code> 获取元方法这一步为止。对于不存在的方法，我们只能获取到一个空指针，对空指针调用 <code>invoke</code> 方法会抛出空指针异常。</p>
<h2 data-id="heading-8">8.2 MetaClass 注入的实现</h2>
<p><code>GroovyIntercptable</code> 接口通过硬编码到类定义的方式实现方法拦截。但是如果我们并不是这个类的设计者，或者无权对原来的类定义做出修改时，这一招就行不通了。如果无法从内部定义类的方法拦截，那就想想如何在外部实现它 —— 比如说通过 <code>.metaClass</code> 获取元类型，然后对它注入 <code>invokeMethod</code> 方法。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 还是刚才的 Car，只不过现在没有办法修改了。
final class Car  {
    def static outline = { any -&gt; System.out.println(any) }
    def run() { outline "running!"}
    def speed(double kmh) {"${kmh} km / h"}
}

// 打印方法注入之前的 metaClass 类型
println Car.metaClass.getClass().name

// IDEA 的 Groovy 插件不会对外部注入的方法进行代码提示，甚至可能还会说 can not resovle symbol ...
// 这是插件的问题，程序能够正常运行。
Car.metaClass.invokeMethod = {
    String name,args-&gt;
        def outline = {any -&gt; System.out.println(any)}
        outline "before running, the method ${name} needs check."
        def result = Car.metaClass.getMetaMethod(name,args as Object[]).invoke(delegate,args as Object[])
        outline "after running....${result.is(null)?"":"and the result is ${result}"}"
}

def car = new Car()
car.run()
car.speed(109)

// 打印方法注入之后的 metaClass 类型。
println Car.metaClass.getClass().name
<span class="copy-code-btn">复制代码</span></code></pre>
<p>我们通过为 <code>Car.metaClass.invokeMethod</code> 赋值闭包的方式，实现了在 <code>Car</code> 的元信息内注入方法。不止是 <code>invokeMethod</code> 方法，在元类型内注入任何其它的方法也是相似的套路 ( 见后文 ) 。只不过 <code>invokeMethod</code> 更特殊一些：后续对该类实例的所有方法调用全部会率先引导至 <code>invokeMethod</code> 方法。</p>
<p>在闭包内部，使用 <code>delegate</code> 来指向调用的那个对象，而非 <code>this</code>。如果要使用到对象的一些内部属性，比如说 <code>name</code>，需要借助 Groovy 的动态访问语法来完成：<code>delegate["name"]</code> 。</p>
<p>和前者的 <code>GroovyInterceptable</code> 接口实现相比，它的一大优势是：Groovy 也支持提取 POJO 的 <code>metaClass</code> ，因此这个方法也能用于拓展 POJO。</p>
<p>如果拦截到的方法确实不存在，在直接抛出空指针异常之前，我们更希望通过 <code>methodMissing</code> 做一些善后工作。下一节我们就会介绍如何利用 <code>methodMissing</code> 方法做一些更体面的处理 —— 比如根据用户传入的方法名来推测用户的需求，然后给出合适的结果，而不是像现在一样给出一行枯燥的代码提示。值得注意的是，在 <code>invokeMethod</code> 内部，我们需要借助 <code>invokeMissingMethod</code> 来间接调用该对象的 <code>methodMissing</code> 方法，否则 <code>methodMissing</code> 方法也会意外地被 <code>invokeMethod</code> 拦截。</p>
<p>这个 <code>methodMissing</code> 方法本身也是通过外部注入来实现的。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 在其它 Groovy 脚本外部注入 `invokeMethod`
Car.metaClass.invokeMethod = {
    String name,args-&gt;
        def outline = {any -&gt; System.out.println(any)}
        outline "before running, the method ${name} needs check."

        def job = Car.metaClass.getMetaMethod(name,args as Object[])
        def result = null

        // 相当于是调用了 delegate.methodMiss(name,args)
        if(job == null) Car.metaClass.invokeMissingMethod(delegate,name,args as Object[])
        else {
            result = job.invoke(delegate,args as Object[])
        }
        outline "after running....${result.is(null)?"":"and the result is ${result}"}"
}

// 同理，如果在内部无法定义，就在外部通过 metaClass 注入 methodMissing 方法。
Car.metaClass.methodMissing = {
     String name,args-&gt;
        System.err.println("this object has no method ${name}, and the args ${args} are unused.")
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这里还有一处小细节，通过打印 <code>.metaClass.getClass().name</code> 能够观察到，对元类型进行方法注入会改变 <code>MetaClass</code> 自身的类型：在最开始，它属于 <code>org.codehaus.groovy.runtime.HandleMetaClass</code> 类。而一旦有注入的动作，它就会变更为 <code>groovy.lang.ExpandoMetaClass</code> 类型 ( 后文简称为 EMC )。这是一个历史遗留问题：EMC 目前并不是 Groovy MetaClass 的唯一实现，但我们目前的各种操作事实上都是通过它进行的。</p>
<h2 data-id="heading-9">8.3 方法合成</h2>
<blockquote>
<p>方法合成和方法拦截的区别在于：后者拦截所有 ( 包括不存在的 ) 的调用，从而实现 AOP 切面编程。而前者只专注于拦截运行期间不存在的方法调用，并希望能够根据传入的方法名，参数等语义推测用户行为，并返回合理的处理结果，从而让用户感觉 "什么调用都好像是动态生成的一样"。</p>
</blockquote>
<p>Groovy 提供的 <code>methodMissing</code> 对方法合成非常有用。比如 Grail / GORM 可以在调用时为领域对象合成出 <code>findByFirstName</code> 和 <code>findByFirstNameAndLast</code> 这样的查找方法。<strong>合成的方法只有在调用时才会作为独立的方法存在</strong>，因此无法通过通常的反射手段找到它们。与此同时，合成的方法也可以缓存下来方便以后复用，来减少对 <code>methodMissing</code> 方法的频繁调用。Grails 的创建者 Graeme Rocher 称之为 "<strong>拦截，缓存，调用</strong>" 模式。</p>
<p>这是一个 Groovy 方法合成的一个简单例子。假定有一个 <code>Person</code> 类，而他有一些爱好，这些爱好存在一个 <code>plays</code> 字段中，并且有可能会后续的运行中继续添加。现在要求对于 <code>plays</code> 内的每一个元素都编写出一个 <code>playXXX</code> 方法。</p>
<p>最基本的方式，就是在代码内进行硬编码。一旦客户后续在 <code>plays</code> 列表了添加，或者是修改了某个字段，我们就会被迫地回到源代码中重做修改并编译。显然，在 Groovy 中绝对不会这么做。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class Person{
    def plays = ["Football","Basketball","TableTennis"]
    String name
    def playFootBall(){
        // 实际生产中，这可能是一个数据库查询。
        println("$name is playing FootBall")
    }
    def playBasketball(){println("$name is playing Basketball")}
    // 相似的套路 ...
}

def john = new Person(name: "john")
john.playBasketball()
john.playFootBall()
<span class="copy-code-btn">复制代码</span></code></pre>
<p>我们在此引入 <code>methodMissing</code> 方法，用方法合成的思路解决问题。该方法不像 <code>invokeMethod</code> 那样对所有的方法进行拦截，仅在目标方法不存在的场合才会被 Groovy 调用。</p>
<p>下面的代码块是这样做的：根据用户提供的方法名解析出他可能期望获得的字段，然后程序查询这个字段是否在 <code>plays</code> 列表内，如果有，返回结果。否则，抛出 <code>MissingMethodException</code> ( 或者抛出其它合理的异常也可以 ) 。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class Person {
    private def sout = { any -&gt; System.out.println(any)}
    def plays = ["Football","Basketball","TableTennis"]
    def name
    def run(){sout "running..."}
    def methodMissing(String name,args){
        def key = name.split("play")[1]
        if(!plays.contains(key)) throw new MissingMethodException(name,this.class,args as Object[])
        sout "${this.name} is playing ${key}"
    }
}

def john = new Person(name: "john")

// 存在的方法可以正常调用，不存在的方法会在 methodMissing 临时合成。
john.playBasketball()
john.playFootball()
john.run()
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-10">8.3.1 方法合成的记忆性</h3>
<p>与此同时，我们希望这种合成是具备 "记忆性" 的 —— 当第一次调用新合成的方法时，将它注入到 <code>MetaClass</code> 内部。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def methodMissing(String name,args){
    println "//--------first call for method $name-------//"
    def key = name.split("play")[1]
    if(!plays.contains(key)) throw new MissingMethodException(name,this.class,args as Object[])
    
    // 创建一个闭包
    def impl = {
        -&gt; println "playing ${name.split("play")[1]}"
    }
    
    // 将闭包注入到当前对象的 MetaClass.
    Person self = this
    self.metaClass."$name" = impl
    impl()
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这种缓存手段在简单的例子中甚至比不缓存还要更慢一些。但这种缓存手段很重要，只是在这个案例中，我们的 <code>methodMissing</code> 逻辑相比之下实在是太简单了。在大型项目中， <code>methodMissing</code> 需要处理各种方法合成请求，逻辑也会变得复杂，耗时明显会变长。此时，缓存手段的优势才会体现出来。</p>
<p>一旦目标是一个 POJO，或者我们没有对它的修改权限，这种手段就行不通了。此时如果要实现方法合成，我们需要将 <code>methodMissing</code> 方法注入到元类型 <code>MetaClass</code> 内部，之前已经演示过了。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">john.metaClass.methodMissing = {
    String name, args -&gt;
        println "first call of method $name..."
        def key = name.split("play")[1]
        Person self = delegate
        if (!self.plays.contains(key)) throw new MissingMethodException(name, Person.class, args as Object[])
        def impl = { -&gt; println "${self.name} is playing $key" }
        self.metaClass."$name" = impl
        impl()
}
<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-11">9. 方法注入</h1>
<p>"要是 <code>java.lang.String</code> 原生支持一个 <code>encrypt</code> 方法那就太好了。" 面向对象编程本身就是为了拓展，但是能够拓展到什么程度，又往往受到编程语言的限制。如果我们能够基于实际需求为类拓展方法，那么写出一段富有表现力的代码就会十分轻松。</p>
<p>由于 MOP 协议的存在，Groovy 实现这些非常容易 ( 即便不通过 MOP 协议，我们也可以通过 SPI 接口进行方法拓展 )。在之前的章节中，我们了解了如何基于 <code>.metaClass</code> 提取元属性，元方法。本章开始，我们要逐渐了解如何利用 Groovy 为我们暴露的元信息并向内部注入一些基于现实需要的行为。</p>
<h2 data-id="heading-12">9.1 使用分类注入方法</h2>
<p>Groovy 提供了可控的，或者说仅在局部范围内生效的方法注入，分类 ( category ) 就是一种。形式上，它的用法比较接近 Scala 的隐式类 —— 在一个上下文环境中隐式地通过代理对象实现方法增强。在 Groovy 中，分类的代码增强效果仅仅在一段 <code>use</code> 作用域和执行线程有效。当线程退出这段代码块之后，一切都会恢复原样。</p>
<p>下面我们使用分类方法注入的形式重新实现在 "拓展 JDK" 章节中曾介绍的那个例子：为 <code>String</code> 拓展 <code>writeTo</code> 方法，以便我们直接将代码内的字符串输出到外部的文本文件。</p>
<p>类似地，我们需要令行准备一个拓展类，暂且为它起名 <code>StringExtension</code>，然后将 <code>writeTo</code> 方法补充到这里。有两点需要注意：首先，这个增强方法仍然需要使用 <code>static</code> 关键字修饰；其次，该方法的第一个形参用于表明拓展的类型，它代表了调用此方法的那个对象，但是不会在调用时体现出来。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class StringExtension {
    // 调用时，相当于 "xxxxx".writeTo(filename,charset)。
    // self 代表了调用的那个字符串。
    def static writeTo(String self,String filename,String charset){
        new File(filename).withWriterAppend(charset){
            it.writeLine(self)
        }
    }
}
// 创建了上下文
use(StringExtension){
    // 注意，仅在 use 语句块内有效
    "this is mop method...".writeTo("C:\\Users\\i\\Desktop\\武林秘籍.txt","UTF-8")
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>之后，在任意一处代码块内创建一个 <code>use</code> 块：第一个形参传入刚才设定好的增强类型 ( 不是传实例 )，然后我们就可以在后面的闭包块内享受到 <code>StringExtension</code> 为 <code>String</code> 拓展的增强方法 ( 这个闭包后附的语法参见笔者 Groovy 的第一篇入门教程 )。</p>
<p>对于分类的声明，还存在一种更简洁直观的 <code>@Category</code> 注解的写法：在注解标记被代理 ( 被增强 ) 的类型，然后内部无需再使用 <code>static</code> 声明增强方法，也不需要在形参列表中额外预留一个参数。同时，该增强类内部的 <code>this</code> 将不再指代自身，而是指代那个目标实例。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">@Category(String)
class StringExtension {
    def writeTo(String filename,String charset){
        new File(filename).withWriterAppend(charset){           
            // this 指代被修饰的 String，而不是 StringExtension
            it.writeLine(this)
        }
    }
}

// 创建了上下文
use(StringExtension){
    // 注意，仅在 use 语句块内有效
    "this is mop method...".writeTo("C:\\Users\\i\\Desktop\\武林秘籍.txt","UTF-8")
}
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-13">9.1.1 分类接受多个增强类</h3>
<p><code>use</code> 是一个重载的方法：它的第一个参数不仅可以接受单个增强类，还能受由多个增强类组成的数组 <code>List&lt;Class&gt;</code> 。从写法上，Groovy 支持以逗号的形式将这些类名传进 <code>()</code> 小括号内。</p>
<p>如果传入了多个增强类，那么就可能存在一个问题：方法重复。<strong>在多个增强类依次排列的情况下，Groovy 优先选择最后一个传进来的增强类</strong>。比如：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">@Category(String)
class StringExtension_01 {
    def shout() {
        println("from StringExtension_01")
    }
}

@Category(String)
class StringExtension_02 {
    def shout() {
        println("from StringExtension_02")
    }
}

use(StringExtension_01, StringExtension_02) {
    // from StringExtension_02
    "string".shout()
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>Groovy 在很多地方都遵守这样的原则，后文为了方便解释，笔者在这里暂且将这种原则称之为 "<strong>最远原则</strong>" ( 最后传来的优先级最高 ) 。</p>
<h3 data-id="heading-14">9.1.2 分类可以嵌套</h3>
<p>同样的，<code>use</code> 语句块内部也允许定义新的 <code>use</code> 块。如果此时发生了方法冲突，Groovy 的处理方式是：优先选择最内部层次的增强类方法。比如：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">use(StringExtension_02){
    // 对于不同层次的增强类而言，当发生方法重复时，Groovy 优先选择最内部的方法。
    use(StringExtension_01){
        // from StringExtension_01
        "string".shout()
    }
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>结合上一条考虑：一个增强类所处的 <code>use</code> 嵌套层次越深，且在同层次中定义的顺序越靠后，那么当发生方法冲突时，Groovy 选择它的优先级就越高。</p>
<h2 data-id="heading-15">9.2 使用 ExpandoMetaClass 注入方法</h2>
<p>想要创建领域特定语言 ( DSL )，我们需要向不同的类，甚至类的层次结构当中注入任意的方法，<strong>包括注入实例方法，静态方法，甚至是操作构造器</strong>。前文已经暗示了 —— 通过调取一个类的 <code>metaClass</code> ，我们能注入的可不止 <code>invokeMethod</code> 和 <code>methodMissing</code> 方法，理论上，只要想象力到位，我们想注入什么方法都可以。</p>
<p>下面是一个演示通过 EMC 实现方法注入的 case：向 <code>Integer</code> 类的 <code>MetaClass</code> 注入一个方法，该方法能够打印出 "基于这个天数之后的日期"。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 标准的拓展格式：
// 类.metaClass.方法名 = 一个闭包 {...}
// 方法名自拟，需要的参数写在闭包内部。
Integer.metaClass.daysFromNow = {
    -&gt;
    def now = Calendar.instance
    // delegate 指向那个被注入的 Integer
    now.add(Calendar.DAY_OF_MONTH,delegate as int)
    now.time
}


// 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021
println 5.daysFromNow()

<span class="copy-code-btn">复制代码</span></code></pre>
<p>此外，<code>daysFromNow()</code> 是一个<strong>内部无副作用，且外部不接受参数，纯粹用于返回一个值的纯函数</strong>。在 Scala 中，满足这种特性的方法都会被 "统一访问原则" 伪装成一个属性，Groovy 也能实现。因此，在这里不妨将 <code>daysFromNow</code> 方法改名为 <code>getDaysFromNow</code> 来去掉访问时那个多余的小括号。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// getDaysFromNow 方法被 Groovy 包装成了 DaysFromNow 属性。
// 当然，用户方可以选择任意一种方式来获取结果。
Integer.metaClass.getDaysFromNow = {
    // 这个方法不需要外部传递参数。
    -&gt;
    def now = Calendar.instance
    // delegate 指向那个被注入的 Integer 实例
    now.add(Calendar.DAY_OF_MONTH,delegate as int)
    now.time
}

// 这种套路在 DSL 语言中经常用到。
println 5.daysFromNow
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这也是 Groovy 不谈 "注入属性" 的原因：这只需要注入对应的 <code>getXXX</code> 方法就可以解决了，调用这段代码的用户不会发现 ( 也不会感兴趣 ) 这个属性是由方法 "伪装" 成的。</p>
<p>相比于分类 ( category ) 的拓展方式，这种方法注入会全局范围内生效，任意一个 <code>Integer</code> 实例都可以调用这个 <code>DaysFromNow</code> "属性"。但是，我们认为在经过适当的数值转换，精度舍入的处理之后，像 <code>Long</code>，或者 <code>Double</code> 这类数值应当也能支持 <code>getDaysFromNow</code> 方法。那么想要给多个类同时注入一个方法该怎么做呢？</p>
<p>第一种做法是先声明一个闭包，然后再将它注入到多个 <code>MetaClass</code> 内：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def getDaysFromNow = {
    -&gt;
    def now = Calendar.instance
    //
    now.add(Calendar.DAY_OF_MONTH,delegate as int)
    now.time
}

def injectName = "getDaysFromNow"
Integer.metaClass."$injectName" = getDaysFromNow
Long.metaClass."$injectName" = getDaysFromNow
Double.metaClass."$injectName" = getDaysFromNow

// 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021
println 5.daysFromNow
println 10.00d.daysFromNow
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这种做法有点啰嗦。而 <code>Integer</code>，<code>Long</code> 和 <code>Double</code> 都有一个共同父类，那就是 <code>Number</code> 类。那么只需要向这个父类注入实例方法，那么所有的子类就都会 "通过继承关系" 自动获得。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">Number.metaClass.getDaysFromNow = {
    -&gt;
    def now = Calendar.instance
    //
    now.add(Calendar.DAY_OF_MONTH,delegate as int)
    now.time
}

// 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021
println 5.daysFromNow
println 10.00d.daysFromNow
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-16">9.2.1 注入静态方法</h3>
<p>在了解注入实例方法之后，注入静态方法几乎没有什么难度，区别是多了一步 <code>'static'</code> ( 需要加引号 ) 的选择操作。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">Number.metaClass.'static'.getDaysFromNow = {
    Number number -&gt;
    def now = Calendar.instance
    now.add(Calendar.DAY_OF_MONTH,number as int)
    now.time
}

println Integer.daysFromNow(10)
println Number.daysFromNow(10)
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-17">9.2.2 注入构造器</h3>
<p>对构造器的注入分为两种：第一种是新增构造器，第二种是对已有的构造器进行覆盖。</p>
<p>对于第一种情况，需要进入到 <code>Clazz.metaClass.constructor</code> 域内部，然后借助 <code>&lt;&lt;</code> 运算符进行注入。如果此运算符被用于覆盖类原有的构造器，那么 Groovy 会报错。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">Integer.metaClass.constructor &lt;&lt; {
    Calendar c -&gt; new Integer(c.get(Calendar.DAY_OF_YEAR))
}
// 根据日期返回 "今天是今年的第几天"，为 Integer 类型。
def day = new Integer(Calendar.instance)
println day
<span class="copy-code-btn">复制代码</span></code></pre>
<p>对于第二种情况，我们使用 <code>=</code> 而非 <code>&lt;&lt;</code> 操作符，这里不再做演示。需要注意的是，Groovy 并非是真的覆盖了原来的构造器，通过 Java 的反射也可以重新调用它。</p>
<h3 data-id="heading-18">9.2.3 使用 EMC DSL 批量注入方法</h3>
<p>如果仅打算为一个类补充一两个方法，那么 <code>Clazz.metaClass.anyMethod = {...}</code> 的写法尚且可以接受。但如果一个类挂载了一系列实例方法，静态方法乃至构造器方法，此时将这些方法集中到大代码块内统一管理是更明智的做法。</p>
<p>Groovy 提供了 EMC DSL 来使我们能够像写 <code>yml</code> 文件一样，让类的注入方法呈现出清晰的树状层次：</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">Integer.metaClass {
    // 注入实例方法
    // 可以通过 .daysFromNow 获取
    getDaysFromNow = {
        -&gt;
        Calendar calendar = Calendar.instance
        calendar.add(Calendar.DAY_OF_MONTH,delegate as int)
        calendar.time
    }

    'static' {
        getDaysFromNow = {
            Integer integer -&gt;
            Calendar calendar = Calendar.instance
            calendar.add(Calendar.DAY_OF_MONTH,integer as int)
            calendar.time
        }
    }

    constructor &lt;&lt; {
        Calendar c -&gt; new Integer(c.get(Calendar.DAY_OF_YEAR))
    }
}

// 调用注入的静态方法
println Integer.getDaysFromNow(10)

// 调用注入的实例方法
println 10.daysFromNow

println(new Integer(Calendar.instance))
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-19">9.2.4 向实例注入方法</h3>
<p>如果不想将方法注入到整个类内部，那也可以仅提取某一个对象的 <code>MetaClass</code> 进行方法注入。下面的案例创建了两个对象 <code>p1</code> 和 <code>p2</code> ，其中，我们只为 <code>p1</code> 的元类型注入了 <code>sing</code> 方法，因此只有 <code>p1</code> 会 "唱歌"。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class Person{
    String name
    def talk(String s){println "${name}:[$s]"}
}


def p1 = new Person(name:"Wang Fang")
def p2 = new Person(name:"Lao Wang")

p1.metaClass {
    sing = {
        // 如果
        String s -&gt; "${delegate["name"]}:${s}~~~ oh~~"
    }
}

println p1.sing("oh baby baby")

// p2 的 EMC 没有绑定，因此这里会抛出 MissingMethodException 异常
println p2.sing("are you ok?")
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-20">9.3 利用 MOP 实现动态委托</h2>
<p>如果委托是静态的，那它就可以在编译期间确定，因此也就无需在运行时更改，关于动态委托的实现可以参考之前文章提到过的 <code>@Delegate</code> 注解 ( 这是编译时元编程技术 )。</p>
<p>现在有三个角色：老板 <code>Boss</code> ( 被委托人 )，普通职员 <code>Worker</code> 和分析师 <code>analyst</code> ( 委托人 )。后两者有各自的分工，但是所有的方法调用通过 <code>Boss</code> 进行。考虑到委托人的角色以及数量都可能动态变化，因此这里不使用静态的 <code>@Delegate</code> 注解。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">class Boss{}
class Employee{
    def work(){
        println "working now"
    }
}

class Analyst{
    def analize(){
        println "solving this problem..."
    }
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>首先，我们将代表动态委托功能的 <code>delegateTo</code> 方法注入给 Object ( 或者只注入给 <code>Boss</code> 类也可以 )，从形式上，只要将任意多个类型传入到方法当中，就可以建立该对象和这些类的委托关系。</p>
<p>具体的实现方式清晰明了：根据接受的 <code>Class[]</code> 创建出委托类的实例数组 <code>ins</code>，然后利用方法合成的套路，向被委托实例的 <code>delegate</code> 注入重写的 <code>methodMissing</code> 方法进行方法合成 ( 在这里应该是方法委托 )。</p>
<p>一旦调用了该对象不存在的方法，Groovy 就会试图从 <code>methodMissing</code> 那里返回一个结果。在 <code>methodMissing</code> 内部，我们通过轮询 <code>ins</code> 数组的方式寻找出第一个对该方法名做出响应的委托实例 ( 这里可通过 <code>find</code> 和 <code>responseTo</code> 方法实现 )，然后再通过 <code>invokeMethod()</code> 间接调用被委托的方法。</p>
<p>如果愿意的话，也可以向之前的套路那样，每调用一个新的委托方法，就将它注入到原先的被委托类的 <code>MetaClass</code> 中。下一次调用相同的方法时，Groovy 就没有必要重新去 <code>ins</code> 数组那里做轮询了。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">Object.metaClass.delegateTo = {
    Class... clazzs -&gt;
        def ins = clazzs.collect { it.getDeclaredConstructor().newInstance() }
        delegate.metaClass.methodMissing = {
            String name, args -&gt;
                // 找到能响应该方法的实例，找到第一个就返回。
                def proxy = ins.find {
                    it.respondsTo(name,args)
                }

                // 可选项，如果乐意的话，也可以向实例的 MetaClass 内部缓存。
                delegate.metaClass."${name}" = { Object[] vargs -&gt;
                    proxy.invokeMethod(name,vargs)
                }

                // 调用该实例的方法。
                proxy.invokeMethod(name,args)
        }
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>现在，我们能够在 Groovy 代码内以简洁地形式声明一个动态调用。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">def boss = new Boss()
boss.delegateTo(Employee,Analyst)

boss.work()
boss.analize()
<span class="copy-code-btn">复制代码</span></code></pre>
<p>由于查找代理实例的过程中依赖 <code>find</code> 方法进行，因此这无形间规定了优先级顺序：如果多个类都能完成某个委托，那么先传入的类，其方法调用的优先级最高。这是一个综合的练习，因为它除了还利用了以下知识点：</p>
<ol>
<li>通过调用一个对象的 <code>responseTo</code> 来检查它是否能对某一个方法做出响应。</li>
<li>通过调用一个对象的 <code>invokeMethod</code> 方法来动态调用方法。</li>
<li>通过注入 <code>methodMissing</code> 来实现方法合成 ( 在这个案例中，方法合成达成了方法委托的效果 )。</li>
</ol>
<h2 data-id="heading-21">9.4 总结 Groovy 调用方法的策略</h2>
<p>在调用一个方法时，Groovy 会根据这个对象是 POJO 还是 POGO ，是否使用了 <code>MetaClass</code> 注入等因素而采取不同的策略。整个 MOP 专题基本围绕两个主要的方法进行：<code>invokeMethod</code> 和 <code>methodMissing</code>。</p>
<h3 data-id="heading-22">9.4.1 If POJO</h3>
<p>对于 POJO 而言，优先级顺序：</p>
<ol>
<li>通过 <code>MetaClass</code> 注入的 <code>invokeMethod</code> 方法 ( 拦截所有调用 )。</li>
<li>通过 <code>MetaClass</code> 注入的普通方法。</li>
<li>原有方法。</li>
<li>通过 <code>MetaClass</code> 注入的 <code>methodMissing</code> 方法。</li>
<li><strong>抛出</strong> <code>MissingMethodException</code> 。</li>
</ol>
<p>注意 2，3 两项， 通过 <code>MetaClass</code> 注入的同名方法相比原本方法而言优先级更高。</p>
<h3 data-id="heading-23">9.4.2 If POGO</h3>
<p>对于没有实现 <code>GroovyInterceptor</code> 标记接口的 POGO 而言，方法调用优先级顺序：</p>
<ol>
<li><strong>通过 <code>MetaClass</code> 注入的 <code>invokeMethod</code> 方法。</strong> ( 拦截所有调用 )</li>
<li><strong>通过 <code>MetaClass</code> 注入的普通方法。</strong></li>
<li>原有方法 / 同名的闭包属性。</li>
<li><strong>通过 <code>MetaClass</code> 注入的 <code>methodMissing</code> 方法。</strong></li>
<li><strong>内部定义的 <code>methodMissing</code> 方法。</strong></li>
<li>内部定义的 <code>invokeMethod</code> 方法。</li>
<li><strong>抛出</strong> <code>MissingMethodException</code> 。</li>
</ol>
<p>事实上，我们不可能在一个类内部同时用上所有项。为了让思路更清晰一些，笔者从需求角度进行了划分：</p>
<p>a. 当需要在外部进行方法拦截时，只需要额外定义第 1 项 ( 不要和内部定义的第 6 项搞混 )。</p>
<p>b. 当需要动态拓展方法时，只需要额外定义第 2 项。</p>
<p>c. 当需要在外部实现方法合成时，只需要额外定义第 4 项。</p>
<p>d. 当需要在内部实现方法合成时，只需要额外定义第 5 项。</p>
<p>如果 POGO 在内部实现了 <code>GroovyInterceptor</code> 接口，所有调用将只会引导至内部定义的 <code>invokeMethod</code> 方法。</p>
<h2 data-id="heading-24">9.5 使用 Mixin 混合注入方法</h2>
<p>首先来举一个例子：动物 <code>Animal</code> 衍化成了两个类别：卵生动物的代表飞鸟 <code>Bird</code> 与哺乳动物的代表走兽 <code>Beast</code> 。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">abstract class Animal{
    // 动物都会叫 ...
    abstract def roar()
}

class Beast extends Animal{
    def roar(){println "beast yawn..."}
    // 走兽会捕食 ...
    def predate(){println "predate ..."}
}

class Bird extends Animal{
    def roar(){println "bird twitter..."}
    // 飞鸟会飞...
    def fly(){ println "hovering in the sky"
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>现在有一个特例蝙蝠 <code>Bat</code>：它自身虽然属于哺乳动物，但是却又具备飞鸟独有的 <code>fly</code> 方法，它无论单继承哪一边都好像缺点什么。但是，如果两者都继承也会出现问题：它是选择像飞鸟一样鸣叫呢？还是选择像走兽一样吼叫呢？</p>
<p>这是多重继承所带来的菱形继承问题。好在 Java 单继承的，假使在开发中遇到了类似的问题，最直接的思路就是仅保留公共方法到父类，将其它的方法放到接口去，这样就可以通过  "单继承 + 组合模式" 来规避菱形继承问题。</p>
<p>然而，Groovy 提供了 "通过混合类型 ( <code>Mixin</code> ) 来实现多重继承" 的方案。混合的方式有两种 —— 编译期混合和运行期混合。</p>
<h3 data-id="heading-25">9.5.1 编译期混入 Mixin</h3>
<p>如果要编译期混合类型，那么就要用到 <code>@Mixin</code> 注解。这个注解使用起来非常简单：将想要混入的类 ( 的数组 ) 传递到注解的 <code>value</code> 值就可以了。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">@Mixin([Beast,Bird])
class Bat extends Animal{
    @Override
    def roar() {
        println "I'm BATMAN, I'm rich."
    }
}

def b = new Bat()

// 自身的 roar 方法被压制了，调用的是 Bird 的方法。
b.roar()

// 混入 Bird 类获得的 fly 方法。
b.fly()

// 混入 Beast 类获得的 predate 方法。
b.predate()
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这里还有一处细节要交代：当我们调用 <code>roar</code> 方法时，<code>Bat</code> 对象并没有给出预期中的结果。其原因可以类比笔者在前文提到的 <strong>"最远原则"</strong>：在混入多个类的情况下，当发生方法冲突时，Groovy 优先选择数组内最后一个满足的类。</p>
<p>笔者的 Groovy 版本为 3.0.8。在当前版本当中，编译期混入其实已经不推荐再使用 <code>@Mixin</code> 注解了，Groovy 建议使用更简单的关键字 <code>trait</code> 来代替。</p>
<h3 data-id="heading-26">9.5.2 运行期混入</h3>
<p>如果选择在运行期间混入，那么可以先提取出一个类 ( 对象 ) 的元类型 <code>MetaClass</code> ，然后通过 <code>mixin</code> 方法按照 "最远原则" 依次插入混入的类型。同样地，运行时混入避免了对类的源代码进行修改。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">// 没有对类定义进行修改 
abstract class Animal{
    abstract def roar()
}

class Beast extends Animal{
    def roar(){println "beast yawn..."}
    def predate(){println "prey ..."}
}

class Bird extends Animal{
    def roar(){println "bird twitter..."}
    def fly(){ println "hovering in the sky"}
}

class Bat extends Animal{
    @Override
    def roar() {
        println "I'm BATMAN, I'm rich."
    }
}
//----------------------------

def bat = new Bat()
bat.metaClass.mixin(Bird,Beast)
// 根据 "最远原则",优先调用 Beast 的方法。
bat.roar()
bat.fly()
bat.predate()
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-27">9.6 编译期 Mixin 的替代方案：Trait</h2>
<p>Groovy 或许也觉得 Mixin 和 Scala 混入特质的思路大体相同，因此在 2.3.x 版本之后，Groovy 也开始采用 <code>trait</code> 关键字，用以代替具备侵入性的 <code>@Mixin</code> 注解。</p>
<p><strong>特质 Trait 使得 Groovy 类像实现多接口一样去继承多个 ( 抽象 ) 类</strong>。当出现菱形继承问题时，Groovy 会按照 "<strong>最远原则</strong>" 去处理。但和之前 <code>@Mixin</code> 注解不一样之处在：<strong>如果这个类本身有重写实现，那么就相当于消除了二义性， Groovy 就不会再考虑任何父特质的方法了</strong>。</p>
<p>特质本身可以同时定义抽象方法和实例方法 ( 按 Scala 的说法就是 "富特质" )，或者只有其一。由于它的存在，Groovy 的 <code>interface</code> 接口没有再引入 JDK 8 的  "默认方法" ( <code>default</code> 保留字在 Groovy 中无法用于接口 )。特质可以继承特质，但是特质无法继承类，或是实现接口。类可以实现 <code>implements</code> 特质，但是不能继承 <code>extends</code> 特质。</p>
<pre><code class="hljs language-groovy copyable" lang="groovy">trait Animal{
    abstract def roar()
}

trait Beast extends Animal{
    def roar(){println "beast yawn..."}
    def predate(){println "prey ..."}
}
trait Bird extends Animal{
    def roar(){println "bird twitter..."}
    def fly(){ println "hovering in the sky"}
}

// 由于 Bat 自身拥有此方法，因此 Groovy 不会再考虑 "最远原则"。
class Bat implements Beast,Bird{
    @Override
    def roar() {
        println "I'm BATMAN, I'm rich."
    }
}

def bat = new Bat()
// BAT MAN
bat.roar()
bat.fly()
bat.predate()
<span class="copy-code-btn">复制代码</span></code></pre></div><style>.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></div></article> <div class="article-end" data-v-4b9f9746="" data-v-020666e8=""><div class="tag-list-box" data-v-4b9f9746="" data-v-020666e8=""><div class="tag-list" data-v-4b9f9746="" data-v-020666e8=""><div class="tag-list-title" data-v-4b9f9746="" data-v-020666e8="">分类：</div> <a href="https://juejin.cn/backend" target="_blank" rel="" class="item category-item" data-v-020666e8="" data-v-4b9f9746=""><span class="tag-title" data-v-020666e8="">后端</span></a></div> <div class="tag-list" data-v-4b9f9746="" data-v-020666e8=""><div class="tag-list-title" data-v-4b9f9746="" data-v-020666e8="">标签：</div> <div class="tag-list-container" data-v-4b9f9746="" data-v-020666e8=""><a href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="item tag-item" data-v-020666e8="" data-v-4b9f9746=""><span class="tag-title" data-v-020666e8="">Groovy</span></a></div></div></div> <div data-v-8c900db2="" data-v-020666e8="" class="column-container"><div data-v-8c900db2="" class="column-header"><span data-v-8c900db2="" class="column-title">文章被收录于专栏：</span></div> <div data-v-8c900db2="" class="column-content"><div data-v-79b79a50="" data-v-8c900db2="" class="item-container"><img data-v-248050e4="" data-v-79b79a50="" loading="eager" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/674d913150fa4dbcac9d0cc223160d6d_tplv-k3u1fbpfcp-no-mark_160_160_160_120.awebp" alt="cover" class="lazy"> <div data-v-79b79a50="" class="content"><div data-v-79b79a50="" class="title">
      Groovy 从入门到 MOP
    </div> <span data-v-79b79a50="" class="tooltip"><div class="byte-tooltip byte-tooltip--dark" style="display: none;">
        从基础开始，逐步了解这门运作在 JVM 之上的动态语言，并且尝试着利用动态特性进行元编程，或者是设计内部 DSL 。
      </div><span class="byte-tooltip__wrapper"><span data-v-79b79a50="" class="description">
        从基础开始，逐步了解这门运作在 JVM 之上的动态语言，并且尝试着利用动态特性进行元编程，或者是设计内部 DSL 。
      </span></span></span></div> <!----> <!----> <button data-v-05e27314="" data-v-79b79a50="" class="ui-btn btn follow-btn primary mini default attention"><!----> 
    关注专栏
  </button></div></div></div> <div data-fetch-key="1" class="extension-banner" data-v-bf9647a6="" data-v-020666e8="" data-v-4b9f9746=""><span class="banner-icon" data-v-bf9647a6=""></span> <div class="banner-wrapper" data-v-bf9647a6=""><a class="banner-title" data-v-bf9647a6="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">
      安装掘金浏览器插件
    </a> <div class="banner-content" data-v-bf9647a6="">多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！</div></div> <a class="banner-action" data-v-bf9647a6="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">前往安装</a></div></div> <div data-v-9bc035e6="" data-v-020666e8="" class="wrap category-course-recommend"><div data-v-9bc035e6="" class="title">相关课程</div> <div data-v-9bc035e6="" class="list"><div data-v-7a387154="" data-v-9bc035e6="" data-booklet-id="7128579738355892254" class="book-card-wrap"><div data-v-077cd020="" data-v-7a387154="" class="book-thumb book-card-cover"><img data-v-248050e4="" data-v-077cd020="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/a708dacc97a74d6e9e7512fc2f2049ae_tplv-k3u1fbpfcp-no-mark_420_420_300_420.awebp" alt="「深度剖析 ZooKeeper 核心原理」封面" class="lazy book-thumb-img" loading="lazy" style=""> <!----></div> <div data-v-7a387154="" class="book-card-info"><div data-v-7a387154="" class="book-card-top"><div data-v-7a387154="" title="深度剖析 ZooKeeper 核心原理" class="book-card-title"><!----> <span data-v-7a387154="" class="book-card-title-text">深度剖析 ZooKeeper 核心原理</span></div> <div data-v-7a387154="" class="book-card-content"><a data-v-0ef8bafa="" data-v-7a387154="" href="https://juejin.cn/user/1003231605955214" target="_blank" rel="" class="username author-name"><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
      编程界的小學生
    </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/lv-2.99ba5b2.png" alt="lv-2" title="创作等级"></span> <!----> <!----> </a> <div data-v-7a387154="" class="book-card-count">
          581购买
        </div></div></div> <div data-v-7a387154="" class="book-card-price-wrap"><div data-v-7a387154="" class="book-card-price">
        ¥19.95
      </div> <div data-v-7a387154="" class="book-card-sale">
        ¥39.9
      </div> <div data-v-7a387154="" class="sale-tooltip-entry-box"><div data-v-6a0ef028="" data-v-7a387154="" class="sale-tooltip-wrap sale-tooltip-entry"><!----> <div data-v-6a0ef028="" class="sale-tooltip">
    首单券后价
    <!----> <div data-v-6a0ef028="" class="sale-tooltip-content">
      首单券后价
      <!----></div></div> <!----></div></div></div></div></div><div data-v-7a387154="" data-v-9bc035e6="" data-booklet-id="6844733814074245133" class="book-card-wrap"><div data-v-077cd020="" data-v-7a387154="" class="book-thumb book-card-cover"><img data-v-248050e4="" data-v-077cd020="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/16e5857b0c541381_tplv-t2oaga2asx-no-mark_420_420_300_420.awebp" alt="「Spring Boot 大型线上商城项目实战教程」封面" class="lazy book-thumb-img" loading="lazy" style=""> <!----></div> <div data-v-7a387154="" class="book-card-info"><div data-v-7a387154="" class="book-card-top"><div data-v-7a387154="" title="Spring Boot 大型线上商城项目实战教程" class="book-card-title"><div data-v-7a387154="" class="book-card-vip">VIP</div> <span data-v-7a387154="" class="book-card-title-text">Spring Boot 大型线上商城项目实战教程</span></div> <div data-v-7a387154="" class="book-card-content"><a data-v-0ef8bafa="" data-v-7a387154="" href="https://juejin.cn/user/3808363978174302" target="_blank" rel="" class="username author-name"><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
      程序员十三
    </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/lv-6.b69935b.png" alt="lv-6" title="创作等级"></span> <!----> <div data-v-38a29e30="" data-v-0ef8bafa="" class="vip-level"><span data-v-38a29e30="" class="tooltip"><div class="byte-tooltip byte-tooltip--dark" style="display: none;">
        VIP.3 渐入佳境
      </div><span class="byte-tooltip__wrapper"><img data-v-38a29e30="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/ffdbad884aa0e7884cbcf924226df6ce.svg" alt=""></span></span></div> </a> <div data-v-7a387154="" class="book-card-count">
          2201购买
        </div></div></div> <div data-v-7a387154="" class="book-card-price-wrap"><div data-v-7a387154="" class="book-card-price">
        ¥44.5
      </div> <div data-v-7a387154="" class="book-card-sale">
        ¥89
      </div> <div data-v-7a387154="" class="sale-tooltip-entry-box"><div data-v-6a0ef028="" data-v-7a387154="" class="sale-tooltip-wrap sale-tooltip-entry"><!----> <div data-v-6a0ef028="" class="sale-tooltip">
    首单券后价
    <!----> <div data-v-6a0ef028="" class="sale-tooltip-content">
      首单券后价
      <!----></div></div> <!----></div></div></div></div></div></div></div> <!----> <div data-v-38c0fdbe="" data-v-020666e8="" data-jj-helper="comment-container" class="container comment-list-box" id="comment-box" data-v-4b9f9746=""><div data-v-48a7e3c5="" data-v-38c0fdbe="" class="comment-form"><div data-v-48a7e3c5="" class="header"><span data-v-48a7e3c5="" class="header-title">评论</span></div><div data-v-48a7e3c5="" class="content"><div data-v-48a7e3c5="" class="avatar-box"><img data-v-248050e4="" data-v-47508ed8="" data-v-48a7e3c5="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/58aaf1326ac763d8a1054056f3b7f2ef.svg" alt="" class="lazy avatar avatar" loading="lazy"></div><div data-v-48a7e3c5="" class="form-box"><div data-v-7c7c7498="" data-v-48a7e3c5="" class="auth-card"><!----> <div data-v-48a7e3c5="" data-v-7c7c7498="" class="input-box"><div data-v-48a7e3c5="" data-v-7c7c7498="" contenteditable="true" spellcheck="false" placeholder="输入评论（Enter换行，Ctrl + Enter发送）" disabled="disabled" class="rich-input empty"></div><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide"><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide-text">看完啦，</div><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide-button">登录</div><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide-text">分享一下感受吧～</div></div><!----></div></div><div data-v-48a7e3c5="" class="action-box"><div data-v-9fe533ba="" data-v-48a7e3c5="" class="emoji-container emoji-btn" style="display: none;"><div data-v-9fe533ba="" class="emoji-box"><svg data-v-9fe533ba="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-9fe533ba="" fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"></path></svg> <span data-v-9fe533ba="">表情</span></div> <!----></div><div data-v-48a7e3c5="" class="image-btn" style="display: none;"><svg data-v-48a7e3c5="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-48a7e3c5="" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"></path></svg><span data-v-48a7e3c5="">图片</span></div><div data-v-48a7e3c5="" class="submit" style="display: none;"><span data-v-48a7e3c5="">Ctrl + Enter</span><button data-v-48a7e3c5="" disabled="disabled" class="submit-btn">发表评论</button></div></div></div><input data-v-48a7e3c5="" type="file" class="hidden"></div></div> <!----> <div data-v-38c0fdbe="" class="comment-list-wrapper"><div data-v-38c0fdbe="" class="title">
      全部评论 3
      <div data-v-38c0fdbe="" class="sort"><div data-v-38c0fdbe="" class="item active"><svg data-v-38c0fdbe="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-38c0fdbe="" fill-rule="evenodd" clip-rule="evenodd" d="M5.99951 0.5C9.03708 0.5 11.4995 2.96243 11.4995 6C11.4995 9.03757 9.03708 11.5 5.99951 11.5C2.96195 11.5 0.499512 9.03757 0.499512 6C0.499512 2.96243 2.96195 0.5 5.99951 0.5ZM6.25 3.49988C6.38807 3.49988 6.5 3.61181 6.5 3.74988V5.49988H8.25C8.38807 5.49988 8.5 5.61181 8.5 5.74988V6.24988C8.5 6.38795 8.38807 6.49988 8.25 6.49988H5.75C5.61193 6.49988 5.5 6.38795 5.5 6.24988V3.74988C5.5 3.61181 5.61193 3.49988 5.75 3.49988H6.25Z"></path></svg>
          最新
        </div> <div data-v-38c0fdbe="" class="item"><svg data-v-38c0fdbe="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-38c0fdbe="" d="M4.88933 0.613974C4.92947 0.616946 4.96831 0.629568 5.00253 0.650767C6.67348 1.68589 7.55141 3.13884 7.63632 5.00962C7.947 5.00962 8.2245 4.65999 8.46882 3.96072L8.49487 3.88447C8.53862 3.75351 8.68025 3.68282 8.8112 3.72656C8.83398 3.73417 8.85554 3.74502 8.87522 3.75878C9.96316 4.5193 10.5048 5.50231 10.5 6.70782C10.4999 6.73762 10.4982 6.76675 10.495 6.7952C10.4985 6.86294 10.5 6.93131 10.5 7.00005C10.5 9.48533 8.48528 11.5 6 11.5C3.51472 11.5 1.5 9.48533 1.5 7.00005C1.5 6.90255 1.5031 6.80578 1.50921 6.70983C1.5062 6.70917 1.5031 6.70849 1.5 6.70782C1.50864 6.60849 1.52139 6.50994 1.53824 6.41219C1.54515 6.35775 1.55321 6.30373 1.56222 6.25003L1.57017 6.24983C1.7622 5.3813 2.28426 4.57601 3.13635 3.83394C4.00892 3.07405 4.50079 2.11523 4.61198 0.957499L4.62156 0.844839C4.63175 0.707146 4.75163 0.603784 4.88933 0.613974Z"></path></svg>
          最热
        </div></div></div> <div data-v-065db163="" data-v-38c0fdbe="" class="comment-list comment-list"><div data-v-5ca9a68f="" data-v-065db163="" class="image-viewer-box"><!----></div> <div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="6962783371575984932"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/2c3d36ac68756ea7f747669b94554d42_100x100.awebp" alt="花花子的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    花花子
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/lv-4.a78c420.png" alt="lv-4" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/8c6985e2aa4c06f307ae3734da4b43ac.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <div data-v-38a29e30="" data-v-0ef8bafa="" class="vip-level"><span data-v-38a29e30="" class="tooltip"><div class="byte-tooltip byte-tooltip--dark" style="display: none;">
        VIP.4 融会贯通
      </div><span class="byte-tooltip__wrapper"><img data-v-38a29e30="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/07302452a7ad81cb43a173b5cd580237.svg" alt=""></span></span></div> </a></div> <span data-v-28fac216="" class="author-badge-text">
          （作者）
        </span> <span data-v-28fac216="" class="position">
          学生 @ 新东方烹饪学校
        </span> <time data-v-28fac216="" datetime="1621149338000" title="Sun May 16 2021 15:15:38 GMT+0800 (中国标准时间)" class="time">
          1年前
        </time></div> <div data-v-28fac216="" class="content">蹲个有缘人</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          2
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7099345680002892557"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/1996368844689607" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/4110ee1df66e6c3351e11f6ba04d2e90_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/1996368844689607" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    青橘T
  </span> <!----> <!----> <!----> </a></div> <!----> <!----> <time data-v-d11b5ece="" datetime="1652945334000" title="Thu May 19 2022 15:28:54 GMT+0800 (中国标准时间)" class="time">
          6月前
        </time></div> <div data-v-d11b5ece="" class="content">mark 一下，对于初步涉及到 groovy 的人来说太深入了，其实还是想看看 DSL 是如何通过 MOP 来定义的。</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7099495936728761095"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/2c3d36ac68756ea7f747669b94554d42_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    花花子
  </span> <!----> <!----> <div data-v-38a29e30="" data-v-0ef8bafa="" class="vip-level"><span data-v-38a29e30="" class="tooltip"><div class="byte-tooltip byte-tooltip--dark" style="display: none;">
        VIP.4 融会贯通
      </div><span class="byte-tooltip__wrapper"><img data-v-38a29e30="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/07302452a7ad81cb43a173b5cd580237.svg" alt=""></span></span></div> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <div data-v-d11b5ece="" class="rely-box"><span data-v-d11b5ece="">回复</span> <div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/1996368844689607" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              青橘T
            </a></div></div> <time data-v-d11b5ece="" datetime="1652980693000" title="Fri May 20 2022 01:18:13 GMT+0800 (中国标准时间)" class="time">
          6月前
        </time></div> <div data-v-d11b5ece="" class="content">哈哈哈，没想到在这日子里蹲到有缘人!<img class="emoji" draggable="false" "="" loading="lazy" alt="[呲牙]" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/jj_emoji_2.cd1e2bd.png"></div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-d11b5ece="" class="parent-wrapper"><div data-v-d11b5ece="">“</div> <div data-v-d11b5ece="" class="parent-content">mark 一下，对于初步涉及到 groovy 的人来说太深入了，其实还是想看看 DSL 是如何通过 MOP 来定义的。</div> <div data-v-d11b5ece="">”</div></div> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div></div> <!----></div></div> <div data-v-4fa94e66="" data-v-020666e8="" class="action-box action-bar" data-v-4b9f9746=""><div data-v-4fa94e66="" class="praise-action action"><div data-v-4fa94e66="" class="action-title-box"><img data-v-4fa94e66="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/00ba359ecd0075e59ffbc3d810af551d.svg"> <span data-v-4fa94e66="" class="action-title">
          2
        </span></div></div> <div data-v-4fa94e66="" class="comment-action action"><div data-v-4fa94e66="" class="action-title-box"><img data-v-4fa94e66="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/336af4d1fafabcca3b770c8ad7a50781.svg"> <span data-v-4fa94e66="" class="action-title">
          3
        </span></div></div> <div data-v-4fa94e66="" class="collect-action action"><div data-v-4fa94e66="" class="action-title-box"><img data-v-4fa94e66="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/3d482c7a948bac826e155953b2a28a9e.svg"> <span data-v-4fa94e66="" class="action-title">收藏</span></div></div> <!----></div></div> <div data-v-020666e8="" data-v-4b9f9746="" class="main-area recommended-area shadow"><div data-v-020666e8="" data-v-4b9f9746="" class="recommended-list-title-wrapper"><div data-v-020666e8="" data-v-4b9f9746="" class="title"><span data-v-020666e8="" data-v-4b9f9746="" class="title-content">相关推荐</span></div></div> <div data-v-3ff8f708="" data-v-2bf301c8="" data-v-020666e8="" name="entry-list" tag="div" class="entry-list list recommended-entry-list" data-v-4b9f9746=""><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6992013495692689422" data-original-type="0" data-draft-id="6992012896817381384" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/993614243303053" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91" target="_blank" rel="" class="tag">
        敏捷开发
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6992013495692689422" target="_blank" rel="" title="复杂多变场景下的Groovy脚本引擎实战" class="title">复杂多变场景下的Groovy脚本引擎实战</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6992013495692689422" target="_blank" rel=""><div data-v-d5649b80="">互联网时代随着业务的飞速发展，不仅产品迭代、更新的速度越来越快，个性化需求也是越来越多，如：多维度（条件）的查询、业务流转规则等。通过项目实战，带大家了解Groovy在脚本引擎方面的应用。</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">1452</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            10
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7069550779454980104" data-original-type="0" data-draft-id="7069549381598314527" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/668101431009496" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">8月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/gradle" target="_blank" rel="" class="tag">
        gradle
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7069550779454980104" target="_blank" rel="" title="相比 Groovy 脚本, KTS 性能到底怎么样？" class="title">相比 Groovy 脚本, KTS 性能到底怎么样？</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7069550779454980104" target="_blank" rel=""><div data-v-d5649b80="">KTS在易用性，可读性，IDE支持等方面都提供了比Groovy更好的支持，但目前在性能方面稍弱，那么相比 Groovy 脚本, KTS 性能到底怎么样？</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">3353</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            21
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            10
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/b75ea37d868b4956837279e90f1a9c8e_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="相比 Groovy 脚本, KTS 性能到底怎么样？" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7148456353332215838" data-original-type="0" data-draft-id="7148448574865408014" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/3421335918746109" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/gradle" target="_blank" rel="" class="tag">
        gradle
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Android%20Studio" target="_blank" rel="" class="tag">
        Android Studio
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7148456353332215838" target="_blank" rel="" title="Android 混淆规则是如何生效的？" class="title">Android 混淆规则是如何生效的？</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7148456353332215838" target="_blank" rel=""><div data-v-d5649b80="">记录一下关于 Android 中关于混淆配置文件的生效规则、混淆规则的细节、build 产物中和混淆相关的内容及其作用。</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">1047</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            9
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            6
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/f81848c9352049ccaf19947bb7f231c9_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="Android 混淆规则是如何生效的？" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7092366305977696287" data-original-type="0" data-draft-id="7092364477974183967" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">6月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Java" target="_blank" rel="" class="tag">
        Java
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7092366305977696287" target="_blank" rel="" title="通过 javax.mail 实现系统异常自动告警" class="title">通过 javax.mail 实现系统异常自动告警</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7092366305977696287" target="_blank" rel=""><div data-v-d5649b80="">事情的起因：笔者在服务器中运行的 OLAP 程序有时会因意外的错误而 "悄悄" 地宕机。更糟糕的是，系统在宕机时没有任何机制提醒笔者上线进行故障排除，这导致积压在消息队列的 msg 迟迟得不到处理。为</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">926</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/b2ac537c675641aea3b8c06da3c5e322_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="通过 javax.mail 实现系统异常自动告警" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7088897451725160461" data-original-type="0" data-draft-id="7088687673107283998" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/1882007127197694" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">7月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7088897451725160461" target="_blank" rel="" title="有道词典Android客户端包体积优化之路" class="title">有道词典Android客户端包体积优化之路</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7088897451725160461" target="_blank" rel=""><div data-v-d5649b80="">本文主要介绍了包体积包含的内容以及优化方法，分析了技术实现的具体细节，在接下来的工作中，我们会对启动速度、安装包体积以及内存占用等多方面进行持续优化，欢迎大家关注！</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">790</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            2
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/f5c6a76631fa4e4fa74f7441b654db94_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="有道词典Android客户端包体积优化之路" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7121643784638562317" data-original-type="0" data-draft-id="7121643497199042590" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/3615671881575853" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">4月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7121643784638562317" target="_blank" rel="" title="学完ASM Tree api，再也不怕hook了" class="title">学完ASM Tree api，再也不怕hook了</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7121643784638562317" target="_blank" rel=""><div data-v-d5649b80="">背景 看完本章，你将会学习到用ASM的tree api进行对匿名线程的hook操作，同时也能够了解到asm相关的操作和背景知识介绍！</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">6128</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            77
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            28
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6979968924951527432" data-original-type="0" data-draft-id="6979959364031348772" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/2066737589654327" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/gradle" target="_blank" rel="" class="tag">
        gradle
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6979968924951527432" target="_blank" rel="" title="掌握Gradle，还需要掌握这些知识--Groovy MOP" class="title">掌握Gradle，还需要掌握这些知识--Groovy MOP</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6979968924951527432" target="_blank" rel=""><div data-v-d5649b80="">掌握Gradle，还需要掌握Groovy的一些知识，本篇就和大家一起快速掌握Groovy的高阶内容：MOP</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">731</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            13
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844904080075128846" data-original-type="0" data-draft-id="6845076657003298829" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/2840793777968238" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">2年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/%E6%B5%8B%E8%AF%95" target="_blank" rel="" class="tag">
        测试
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6844904080075128846" target="_blank" rel="" title="用Groovy处理JMeter断言和日志" class="title">用Groovy处理JMeter断言和日志</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6844904080075128846" target="_blank" rel=""><div data-v-d5649b80="">首先说明一下，我并不擅长jmeter，因为我基本不用这个，关于jmeter设置的疑问可以多去搜索引擎求助。本篇文章内容主要是自己在协助同事的时候一点点实践，分享一下jmeter除BeanShell之外的另外一种脚本语言Groovy。本来想弄个断言就好了，没想到日志模块比较简单，…</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">921</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7121882245605883934" data-original-type="0" data-draft-id="7121881325572718622" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/4001878057422087" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">4月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/Java" target="_blank" rel="" class="tag">
        Java
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7121882245605883934" target="_blank" rel="" title=" 既然有HTTP协议，为什么还要有RPC" class="title"> 既然有HTTP协议，为什么还要有RPC</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7121882245605883934" target="_blank" rel=""><div data-v-d5649b80="">我想起了我刚工作的时候，第一次接触RPC协议，当时就很懵，我HTTP协议用的好好的，为什么还要用RPC协议？于是就到网上去搜。不少解释显得非常官方，我相信大家在各种平台上也都看到过，解释了又好像没解释</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">1.3w</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            347
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            41
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/d337fef5815143bb80aef0013645ac06_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt=" 既然有HTTP协议，为什么还要有RPC" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903864223662093" data-original-type="0" data-draft-id="6845076339586760712" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/1996368846000157" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">3年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6844903864223662093" target="_blank" rel="" title="Grails3.2+新增了一些新东西" class="title">Grails3.2+新增了一些新东西</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6844903864223662093" target="_blank" rel=""><div data-v-d5649b80="">Grails3.2-版可以直接在domain中注入service，在Grails3.2+中默认关闭了自动注入功能开启方式方式一方式二方式三参考</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">530</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            点赞
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6959817005989888008" data-original-type="0" data-draft-id="6959815785556475911" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6959817005989888008" target="_blank" rel="" title="了解 Groovy 对 JDK 的拓展" class="title">了解 Groovy 对 JDK 的拓展</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6959817005989888008" target="_blank" rel=""><div data-v-d5649b80="">不仅是 Groovy，我们也可以通过它预留的 SPI 实现 JDK 拓展，比如拓展 java.lang.String。</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">541</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/513ca2613e274479b6c022ad2c3bff20_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="了解 Groovy 对 JDK 的拓展" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7084949825866694686" data-original-type="0" data-draft-id="7084941275912208392" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/307518988879325" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">7月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7084949825866694686" target="_blank" rel="" title="我与 Groovy 不共戴天" class="title">我与 Groovy 不共戴天</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7084949825866694686" target="_blank" rel=""><div data-v-d5649b80="">打死我都不可能写 groovy 的，这辈子都不可能.................................. 咦，真香</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">2797</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            23
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            13
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/03fd939a307c4da0bc0749b71651e622_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="我与 Groovy 不共戴天" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903982817640455" data-original-type="0" data-draft-id="6845076512434028551" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/3087084378930302" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">3年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Kotlin" target="_blank" rel="" class="tag">
        Kotlin
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6844903982817640455" target="_blank" rel="" title="Kotlin 和 Groovy 的 lambda 对比" class="title">Kotlin 和 Groovy 的 lambda 对比</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6844903982817640455" target="_blank" rel=""><div data-v-d5649b80="">Kotlin 的 lambda 在赋值个一个变量时，不能完全省去类型声明。在作为一个函数的参数时，可以省略。 当函数的最后一个参数是一个函数类型，可将 lambda 表达式放到参数列表外。 当 lambda 只有一个参数时，可以用 it 来代表。 Kotlin 的 lambda…</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">2275</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            点赞
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6972423148742377508" data-original-type="0" data-draft-id="6972422709649080333" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6972423148742377508" target="_blank" rel="" title="Groovy DSL 设计之道" class="title">Groovy DSL 设计之道</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6972423148742377508" target="_blank" rel=""><div data-v-d5649b80="">优雅地设计内部领域特定语言 DSL 是 Groovy 的核心特点之一，这需要严谨的设计，以及聪明的技巧。</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">2638</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            3
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/0713e6bb8fa6476f9c8b7784516731df_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="Groovy DSL 设计之道" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6956793861570035742" data-original-type="0" data-draft-id="6956791929593921567" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6956793861570035742" target="_blank" rel="" title="如何用 Groovy 闭包优雅地 FP 编程？" class="title">如何用 Groovy 闭包优雅地 FP 编程？</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6956793861570035742" target="_blank" rel=""><div data-v-d5649b80="">和 Java 的函数式接口相比，Groovy 的闭包结合动态特性让人眼前一亮。文末通过一道线性规划题阐述了 Groovy 的优雅解决之道。</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">1025</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            3
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/aa49eeb1a77746e7a02189e2b347c103_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="如何用 Groovy 闭包优雅地 FP 编程？" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7021704130569715719" data-original-type="0" data-draft-id="7021703647230689310" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/2840793777968238" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">1年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/%E6%B5%8B%E8%AF%95" target="_blank" rel="" class="tag">
        测试
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7021704130569715719" target="_blank" rel="" title="Groovy动态添加方法和属性及Spock单测" class="title">Groovy动态添加方法和属性及Spock单测</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7021704130569715719" target="_blank" rel=""><div data-v-d5649b80="">在最近的一边学习一边复习的过程中，发现了很多有意思的事情。今天就分享一个groovy.lang.MetaClass应用：如何运行中，动态给类和对象增加属性和添加方法。 对于Java、Groovy来讲，</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">920</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/be796ae5f1c24ca49a0a45e7eaf2b3d0_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="Groovy动态添加方法和属性及Spock单测" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903763321290760" data-original-type="0" data-draft-id="6845076160414482439" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/1996368846000157" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">3年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6844903763321290760" target="_blank" rel="" title="Grails集成Quartz插件实现定时任务（Job）" class="title">Grails集成Quartz插件实现定时任务（Job）</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6844903763321290760" target="_blank" rel=""><div data-v-d5649b80="">build.gradle依赖：创建一个job，执行命令：修改TestJob：控制器中动态调用：暂停定时任务恢复定时任务JobManagerService服务中常用方法可自行查看grails.plugi</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">815</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            点赞
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844904191987548174" data-original-type="0" data-draft-id="6845076823819157518" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/4353721774906039" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">2年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Groovy" target="_blank" rel="" class="tag">
        Groovy
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6844904191987548174" target="_blank" rel="" title="ShardingSphere 解析Groovy表规则表达式" class="title">ShardingSphere 解析Groovy表规则表达式</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6844904191987548174" target="_blank" rel=""><div data-v-d5649b80="">groovyShell的evaluate和parse的区别是，parse会提前编译为Script进行缓存，执行run方法才开始解析。而evaluate是直接解析出结果。</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">616</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            点赞
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7129298214959710244" data-original-type="0" data-draft-id="7128658632727592973" class="entry" style="margin-bottom: 0px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/2305054774145918" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">3月前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/7129298214959710244" target="_blank" rel="" title="一文教你搞定所有前端鉴权与后端鉴权方案，让你不再迷惘" class="title">一文教你搞定所有前端鉴权与后端鉴权方案，让你不再迷惘</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/7129298214959710244" target="_blank" rel=""><div data-v-d5649b80="">关于前端鉴权这块，Token、Cookie、Session、JWT、单点登录、扫码登录、一键登录是什么意思？分别有什么作用？你一般是怎么做的？以及你是怎么存储的呢？那你又是怎么保证它的安全的呢？</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">4.4w</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            1132
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            79
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-d5649b80="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/fcea0e4f9e064e94a8bf152014a36b40_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="一文教你搞定所有前端鉴权与后端鉴权方案，让你不再迷惘" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-d5649b80="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903727007006733" data-original-type="0" data-draft-id="6845075775222185991" class="entry" style="margin-bottom: 20px;"><div data-v-d5649b80="" class="meta-container"><a data-v-d5649b80="" href="https://juejin.cn/user/3087084378393623" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d5649b80="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-d5649b80="" class="date">3年前</div> <div data-v-d5649b80="" class="tag_list"><a data-v-d5649b80="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/.NET" target="_blank" rel="" class="tag">
        .NET
      </a><a data-v-d5649b80="" href="https://juejin.cn/tag/%E5%91%BD%E4%BB%A4%E8%A1%8C" target="_blank" rel="" class="tag">
        命令行
      </a></div></div> <div data-v-d5649b80="" class="content-wrapper" style="border-bottom: 0px;"><div data-v-d5649b80="" class="content-main"><div data-v-d5649b80="" class="title-row"> <!----> <!----> <!----> <a data-v-d5649b80="" href="https://juejin.cn/post/6844903727007006733" target="_blank" rel="" title="com.android.support冲突的解决办法" class="title">com.android.support冲突的解决办法</a></div> <div data-v-d5649b80="" class="abstract"><a data-v-d5649b80="" href="https://juejin.cn/post/6844903727007006733" target="_blank" rel=""><div data-v-d5649b80="">因为这个问题还是很常见的，但是收藏起来之后很可能到时候又会忘记。所以发表出来，以便之后查看。 当我们使用android studio添加一些第三方的依赖库时，很可能会提示上面这个错误。 大致意思就是com.android.support的包版本号要保持一致，但是可能我们自己新建…</div></a></div> <ul data-v-d5649b80="" class="action-list jh-timeline-action-area"><li data-v-d5649b80="" class="item view"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">1377</span></li> <li data-v-d5649b80="" class="item like"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            点赞
          </span></li> <li data-v-d5649b80="" class="item comment"><i data-v-d5649b80=""></i> <span data-v-d5649b80="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li></div></div> <div data-v-d96003d4="" data-v-020666e8="" class="recommended-links main-area" data-v-4b9f9746=""><p data-v-d96003d4="">友情链接：</p> <ul data-v-d96003d4=""><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.douyin.com/zhuanti/7149010607692417060" title="世界杯赛事时间表" target="_blank" rel="noopener noreferrer">
        世界杯赛事时间表
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.douyin.com/zhuanti/7152844062012278797" title="2022年卡塔尔世界杯32强" target="_blank" rel="noopener noreferrer">
        2022年卡塔尔世界杯32强
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.douyin.com/zhuanti/7149010619486816269" title="世界杯几年举行一次" target="_blank" rel="noopener noreferrer">
        世界杯几年举行一次
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.douyin.com/zhuanti/7148803464615741477" title="历届女足世界杯" target="_blank" rel="noopener noreferrer">
        历届女足世界杯
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.51qiche.net/traffic-aggregation/82162" title="汽车 镀铬条 喷漆" target="_blank" rel="noopener noreferrer">
        汽车 镀铬条 喷漆
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.51qiche.net/traffic-aggregation/82163" title="汽车加雨刷水箱怎么拆" target="_blank" rel="noopener noreferrer">
        汽车加雨刷水箱怎么拆
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.51qiche.net/traffic-aggregation/82181" title="别克汽车4s店地址和电话号码查询" target="_blank" rel="noopener noreferrer">
        别克汽车4s店地址和电话号码查询
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.51qiche.net/traffic-aggregation/82187" title="北京汽车b40首付多钱" target="_blank" rel="noopener noreferrer">
        北京汽车b40首付多钱
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.51qiche.net/traffic-aggregation/82192" title="换个汽车的发电机多少钱" target="_blank" rel="noopener noreferrer">
        换个汽车的发电机多少钱
      </a></li><li data-v-d96003d4=""><a data-v-d96003d4="" href="https://www.51qiche.net/traffic-aggregation/82204" title="汽车电折后视镜原理简介视频" target="_blank" rel="noopener noreferrer">
        汽车电折后视镜原理简介视频
      </a></li></ul></div> <div st:block="sidebar" class="sidebar sidebar" style="" data-v-4a8226b0="" data-v-020666e8="" data-v-4b9f9746=""><div class="sidebar-block author-block pure" data-v-71f2d09e="" data-v-2d7c39c6="" data-v-4a8226b0=""><a href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="user-item item" data-v-2d7c39c6="" data-v-71f2d09e=""><img src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/2c3d36ac68756ea7f747669b94554d42_100x100.awebp" alt="" class="lazy avatar avatar" data-v-248050e4="" data-v-47508ed8="" data-v-2d7c39c6="" loading="lazy"> <div class="info-box" data-v-2d7c39c6=""><a data-v-0ef8bafa="" data-v-2d7c39c6="" href="https://juejin.cn/user/465848663023160" target="_blank" rel="" class="username"><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
      花花子
    </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/lv-4.a78c420.png" alt="lv-4" title="创作等级"></span> <!----> <div data-v-38a29e30="" data-v-0ef8bafa="" class="vip-level"><span data-v-38a29e30="" class="tooltip"><div class="byte-tooltip byte-tooltip--dark" style="display: none;">
        VIP.4 融会贯通
      </div><span class="byte-tooltip__wrapper"><img data-v-38a29e30="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/07302452a7ad81cb43a173b5cd580237.svg" alt=""></span></span></div> </a> <div title="学生 @ 新东方烹饪学校" class="position" data-v-2d7c39c6="">
        学生 @ 新东方烹饪学校
      </div></div></a> <div class="operate-btn" data-v-71f2d09e="" data-v-2d7c39c6=""><button st:name="followBtn" class="ui-btn follow-btn primary large default attention" data-v-05e27314="" data-v-2d7c39c6="" data-v-71f2d09e=""><!----> 
    关注
  </button> <a href="https://juejin.cn/notification/im?participantId=465848663023160" class="im-button im-btn" data-v-11443840="" data-v-2d7c39c6="" data-v-71f2d09e=""><!----> <div data-v-11443840="">私信</div></a></div> <div class="cut-off" data-v-71f2d09e="" data-v-2d7c39c6=""></div>  <div class="stat-item item" data-v-71f2d09e="" data-v-2d7c39c6=""><svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" class="zan" data-v-71f2d09e="" data-v-2d7c39c6=""><g fill="none" fill-rule="evenodd" transform="translate(0 .57)" data-v-71f2d09e="" data-v-2d7c39c6=""><ellipse cx="12.5" cy="12.57" fill="#E1EFFF" rx="12.5" ry="12.57" data-v-71f2d09e="" data-v-2d7c39c6=""></ellipse><path fill="#7BB9FF" d="M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z" data-v-71f2d09e="" data-v-2d7c39c6=""></path></g></svg> <span class="content" data-v-71f2d09e="" data-v-2d7c39c6="">
      获得点赞
      <span class="count" data-v-71f2d09e="" data-v-2d7c39c6="">&nbsp;365</span></span></div> <div class="stat-item item" data-v-71f2d09e="" data-v-2d7c39c6=""><svg width="25" height="25" viewBox="0 0 25 25" class="icon stat-view-icon" data-v-71f2d09e="" data-v-2d7c39c6=""><g fill="none" fill-rule="evenodd" data-v-71f2d09e="" data-v-2d7c39c6=""><circle cx="12.5" cy="12.5" r="12.5" fill="#E1EFFF" data-v-71f2d09e="" data-v-2d7c39c6=""></circle><path fill="#7BB9FF" d="M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z" data-v-71f2d09e="" data-v-2d7c39c6=""></path></g></svg> <span class="content" data-v-71f2d09e="" data-v-2d7c39c6="">
      文章被阅读
      <span class="count" data-v-71f2d09e="" data-v-2d7c39c6="">&nbsp;97,821</span></span></div> <!----></div> <ul data-v-4a8226b0="" class="sidebar-bd-entry"><li data-v-4a8226b0=""><a data-v-25f2c691="" data-v-4a8226b0="" href="https://conf.juejin.cn/future2022/?utm_source=jjtofu1" target="_blank" class="sidebar-entry" style="background-image: url(&quot;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/646c43a0f83d4fc584eec1f18f7f14ac~tplv-k3u1fbpfcp-watermark.image?&quot;);"></a></li><li data-v-4a8226b0=""><a data-v-25f2c691="" data-v-4a8226b0="" href="https://juejin.cn/post/7162096952883019783?utm_source=article&amp;utm_medium=banner&amp;utm_campaign=jinshijihua02" target="_blank" class="sidebar-entry" style="background-image: url(&quot;https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45c30b323e2042e39beb0a32e903a4cc~tplv-k3u1fbpfcp-watermark.image?&quot;);"></a></li><li data-v-4a8226b0=""><a data-v-25f2c691="" data-v-4a8226b0="" href="https://juejin.cn/live/2209714" target="_blank" class="sidebar-entry" style="background-image: url(&quot;https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d18575a69084ee08671ccb09d506659~tplv-k3u1fbpfcp-watermark.image?&quot;);"></a></li></ul> <a href="https://juejin.cn/user/center/signin?from=item" target="" rel="" data-v-4a8226b0=""><img data-v-4a8226b0="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/sign-in.d6891e5.png" alt="限时领掘金会员" class="banner"></a> <!----> <div data-v-71f2d09e="" data-v-54794b76="" data-v-4a8226b0="" class="sidebar-block related-entry-sidebar-block shadow" st:block="relatedEntrySidebarBlock"><div data-v-71f2d09e="" class="block-title">相关文章</div> <div data-v-71f2d09e="" class="block-body"><div data-v-54794b76="" data-v-71f2d09e="" class="entry-list"><a data-v-54794b76="" href="https://juejin.cn/post/7084949825866694686" target="_blank" rel="" st:name="link" title="我与 Groovy 不共戴天" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">我与 Groovy 不共戴天</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">23点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">13评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6844904070889603085" target="_blank" rel="" st:name="link" title="(建议收藏)TCP协议灵魂之问，巩固你的网路底层基础" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">(建议收藏)TCP协议灵魂之问，巩固你的网路底层基础</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">1823点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">100评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/7092366305977696287" target="_blank" rel="" st:name="link" title="通过 javax.mail 实现系统异常自动告警" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">通过 javax.mail 实现系统异常自动告警</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">1点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">0评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6844904128594853902" target="_blank" rel="" st:name="link" title="深度探索 Gradle 自动化构建技术（二、Groovy 筑基篇）" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">深度探索 Gradle 自动化构建技术（二、Groovy 筑基篇）</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">94点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">12评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6844903972977770503" target="_blank" rel="" st:name="link" title="Scala 初体验" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">Scala 初体验</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">4点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">5评论</div></div></a></div></div></div> <div class="sticky-block-box" data-v-4a8226b0=""><div class="sidebar-block catalog-block catalog-block pure" style="" data-v-71f2d09e="" data-v-4a8226b0=""><nav class="article-catalog" style="" data-v-cb93f23a="" data-v-71f2d09e=""><div class="catalog-title" data-v-cb93f23a="">目录</div> <div class="catalog-body" data-v-cb93f23a=""><ul class="catalog-list" style="margin-top:0px;" data-v-cb93f23a=""><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-0" title="7. Groovy 元对象协议" class="catalog-aTag">
      7. Groovy 元对象协议
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-1" title="7.1 POGO &amp; POJO，MetaClass" class="catalog-aTag">
      7.1 POGO &amp; POJO，MetaClass
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-2" title="7.2 基于 MetaClass 获取元信息" class="catalog-aTag">
      7.2 基于 MetaClass 获取元信息
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-3" title="7.4 动态访问对象" class="catalog-aTag">
      7.4 动态访问对象
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-4" title="7.5 动态创建类" class="catalog-aTag">
      7.5 动态创建类
    </a></div> <!----></li></ul></li><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-5" title="8. 基于 MOP 方法拦截" class="catalog-aTag">
      8. 基于 MOP 方法拦截
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-6" title="8.0 闭包属性可能会代替方法调用" class="catalog-aTag">
      8.0 闭包属性可能会代替方法调用
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-7" title="8.1 GroovyInterceptable 接口实现" class="catalog-aTag">
      8.1 GroovyInterceptable 接口实现
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-8" title="8.2 MetaClass 注入的实现" class="catalog-aTag">
      8.2 MetaClass 注入的实现
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-9" title="8.3 方法合成" class="catalog-aTag">
      8.3 方法合成
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-10" title="8.3.1 方法合成的记忆性" class="catalog-aTag">
      8.3.1 方法合成的记忆性
    </a></div> <!----></li></ul></li></ul></li><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-11" title="9. 方法注入" class="catalog-aTag">
      9. 方法注入
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-12" title="9.1 使用分类注入方法" class="catalog-aTag">
      9.1 使用分类注入方法
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-13" title="9.1.1 分类接受多个增强类" class="catalog-aTag">
      9.1.1 分类接受多个增强类
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-14" title="9.1.2 分类可以嵌套" class="catalog-aTag">
      9.1.2 分类可以嵌套
    </a></div> <!----></li></ul></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-15" title="9.2 使用 ExpandoMetaClass 注入方法" class="catalog-aTag">
      9.2 使用 ExpandoMetaClass 注入方法
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-16" title="9.2.1 注入静态方法" class="catalog-aTag">
      9.2.1 注入静态方法
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-17" title="9.2.2 注入构造器" class="catalog-aTag">
      9.2.2 注入构造器
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-18" title="9.2.3 使用 EMC DSL 批量注入方法" class="catalog-aTag">
      9.2.3 使用 EMC DSL 批量注入方法
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-19" title="9.2.4 向实例注入方法" class="catalog-aTag">
      9.2.4 向实例注入方法
    </a></div> <!----></li></ul></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-20" title="9.3 利用 MOP 实现动态委托" class="catalog-aTag">
      9.3 利用 MOP 实现动态委托
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-21" title="9.4 总结 Groovy 调用方法的策略" class="catalog-aTag">
      9.4 总结 Groovy 调用方法的策略
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-22" title="9.4.1 If POJO" class="catalog-aTag">
      9.4.1 If POJO
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-23" title="9.4.2 If POGO" class="catalog-aTag">
      9.4.2 If POGO
    </a></div> <!----></li></ul></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-24" title="9.5 使用 Mixin 混合注入方法" class="catalog-aTag">
      9.5 使用 Mixin 混合注入方法
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-25" title="9.5.1 编译期混入 Mixin" class="catalog-aTag">
      9.5.1 编译期混入 Mixin
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-26" title="9.5.2 运行期混入" class="catalog-aTag">
      9.5.2 运行期混入
    </a></div> <!----></li></ul></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6962777564335046687#heading-27" title="9.6 编译期 Mixin 的替代方案：Trait" class="catalog-aTag">
      9.6 编译期 Mixin 的替代方案：Trait
    </a></div> <!----></li></ul></li></ul></div></nav></div> <nav data-v-04051bd0="" data-v-4a8226b0="" class="next-article"><div data-v-04051bd0="" class="next-article-header"><div data-v-04051bd0="" class="next-article-title">下一篇</div> <svg data-v-04051bd0="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="list-icon"><path data-v-04051bd0="" fill-rule="evenodd" clip-rule="evenodd" d="M2.00001 2C1.63182 2 1.33334 2.29848 1.33334 2.66667C1.33334 3.03486 1.63182 3.33333 2.00001 3.33333H3.33334C3.70153 3.33333 4.00001 3.03486 4.00001 2.66667C4.00001 2.29848 3.70153 2 3.33334 2H2.00001ZM6.00034 2C5.63215 2 5.33367 2.29848 5.33367 2.66667C5.33367 3.03486 5.63215 3.33333 6.00034 3.33333H14.0003C14.3685 3.33333 14.667 3.03486 14.667 2.66667C14.667 2.29848 14.3685 2 14.0003 2H6.00034ZM6.00034 7.33333C5.63215 7.33333 5.33367 7.63181 5.33367 8C5.33367 8.36819 5.63215 8.66667 6.00034 8.66667H14.0003C14.3685 8.66667 14.667 8.36819 14.667 8C14.667 7.63181 14.3685 7.33333 14.0003 7.33333H6.00034ZM1.33367 8C1.33367 7.63181 1.63215 7.33333 2.00034 7.33333H3.33367C3.70186 7.33333 4.00034 7.63181 4.00034 8C4.00034 8.36819 3.70186 8.66667 3.33367 8.66667H2.00034C1.63215 8.66667 1.33367 8.36819 1.33367 8ZM1.33367 13.3333C1.33367 12.9651 1.63215 12.6667 2.00034 12.6667H3.33367C3.70186 12.6667 4.00034 12.9651 4.00034 13.3333C4.00034 13.7015 3.70186 14 3.33367 14H2.00034C1.63215 14 1.33367 13.7015 1.33367 13.3333ZM6.00034 12.6667C5.63215 12.6667 5.33367 12.9651 5.33367 13.3333C5.33367 13.7015 5.63215 14 6.00034 14H14.0003C14.3685 14 14.667 13.7015 14.667 13.3333C14.667 12.9651 14.3685 12.6667 14.0003 12.6667H6.00034Z"></path></svg></div> <hr data-v-04051bd0="" class="next-article-hr"> <div data-v-04051bd0="" class="article-content"><a data-v-04051bd0="" href="https://juejin.cn/post/6959817005989888008" title="了解 Groovy 对 JDK 的拓展" target="_blank" class="article">
      了解 Groovy 对 JDK 的拓展
    </a></div> <!----></nav></div></div> <div class="article-suspended-panel article-suspended-panel" data-v-b7c4e7d2="" data-v-020666e8="" data-v-4b9f9746=""><svg xmlns="http://www.w3.org/2000/svg" style="display:none;" data-v-b7c4e7d2="" class=""><symbol id="icon-collect" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M5.24287 18.3845C4.89724 18.5507 4.48229 18.4053 4.31605 18.0596C4.26029 17.9437 4.23783 17.8146 4.25117 17.6866L4.75725 12.8332C4.77762 12.6379 4.71431 12.443 4.583 12.297L1.29207 8.63594C1.03567 8.35071 1.05905 7.91164 1.34428 7.65524C1.43464 7.574 1.54475 7.5179 1.66358 7.49254L6.47789 6.46509C6.66998 6.42409 6.83572 6.30367 6.93407 6.13365L9.39894 1.87248C9.59098 1.54049 10.0158 1.42704 10.3478 1.61907C10.453 1.67992 10.5403 1.76729 10.6012 1.87248L13.0661 6.13365C13.1644 6.30367 13.3301 6.42409 13.5222 6.46509L18.3365 7.49254C18.7116 7.57259 18.9508 7.94155 18.8707 8.31664C18.8454 8.43547 18.7893 8.54557 18.708 8.63594L15.4171 12.297C15.2858 12.443 15.2225 12.6379 15.2429 12.8332L15.7489 17.6866C15.7887 18.0681 15.5117 18.4096 15.1303 18.4493C15.0023 18.4627 14.8732 18.4402 14.7572 18.3845L10.3011 16.2412C10.1108 16.1497 9.8893 16.1497 9.69906 16.2412L5.24287 18.3845Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-comment" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M4.62739 1.25C2.9347 1.25 1.5625 2.6222 1.5625 4.31489L1.56396 12.643C1.56403 14.3356 2.9362 15.7078 4.62885 15.7078H6.48326L6.93691 17.6869L6.93884 17.6948C7.16894 18.6441 8.28598 19.0599 9.08073 18.4921L12.7965 15.7078H15.5001C17.1928 15.7078 18.565 14.3355 18.565 12.6428L18.5635 4.31477C18.5635 2.62213 17.1913 1.25 15.4986 1.25H4.62739ZM5.98265 9.89255C6.68783 9.89255 7.2595 9.32089 7.2595 8.61571C7.2595 7.91053 6.68783 7.33887 5.98265 7.33887C5.27747 7.33887 4.70581 7.91053 4.70581 8.61571C4.70581 9.32089 5.27747 9.89255 5.98265 9.89255ZM9.95604 9.89255C10.6612 9.89255 11.2329 9.32089 11.2329 8.61571C11.2329 7.91053 10.6612 7.33887 9.95604 7.33887C9.25086 7.33887 8.6792 7.91053 8.6792 8.61571C8.6792 9.32089 9.25086 9.89255 9.95604 9.89255ZM15.2124 8.61571C15.2124 9.32089 14.6407 9.89255 13.9355 9.89255C13.2304 9.89255 12.6587 9.32089 12.6587 8.61571C12.6587 7.91053 13.2304 7.33887 13.9355 7.33887C14.6407 7.33887 15.2124 7.91053 15.2124 8.61571Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-zan" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M13.0651 3.25923C12.6654 2.21523 12.1276 1.60359 11.4633 1.40559C10.8071 1.21 10.2539 1.48626 9.97848 1.67918C9.43962 2.05668 9.17297 2.64897 9.0009 3.12662C8.93522 3.30893 8.87504 3.50032 8.82077 3.67291L8.82077 3.67292C8.80276 3.73019 8.78541 3.78539 8.76872 3.8375C8.6974 4.06017 8.63455 4.23905 8.56561 4.38315C8.07104 5.41687 7.64014 6.034 7.2617 6.43277C6.89154 6.8228 6.5498 7.0275 6.18413 7.21038C5.8887 7.35813 5.69369 7.66144 5.69365 8.00211L5.69237 17.3908C5.6923 17.8783 6.08754 18.2736 6.57511 18.2736H14.8382C15.2621 18.2736 15.5829 18.1393 15.8149 17.9421C15.9234 17.8497 15.9985 17.7554 16.0484 17.6856C16.0695 17.6561 16.088 17.6282 16.0983 17.6126L16.1017 17.6075L16.1033 17.6051L16.1194 17.5857L16.1428 17.5478C16.913 16.3019 17.4472 15.3088 17.8659 14.1183C18.3431 12.7613 18.5849 11.5853 18.6874 10.6685C18.7871 9.77617 18.7612 9.07318 18.6558 8.68779C18.5062 8.14118 18.138 7.82653 17.7668 7.66617C17.4231 7.51771 17.0763 7.49836 16.8785 7.49807L13.1134 7.44551C13.662 5.19751 13.31 3.89889 13.0651 3.25923ZM1.251 8.0848C1.22726 7.5815 1.62891 7.16046 2.13277 7.16046H3.4408C3.92832 7.16046 4.32354 7.55568 4.32354 8.04321V17.4303C4.32354 17.9178 3.92832 18.313 3.4408 18.313H2.57554C2.10419 18.313 1.71599 17.9427 1.69378 17.4718L1.251 8.0848Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-share" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M10.4167 6.40399C5.35406 6.40399 1.25 10.5675 1.25 15.7035C1.25 16.0225 1.28448 16.4512 1.35344 16.9898C1.36807 17.1039 1.47243 17.1846 1.58655 17.17C1.6483 17.1621 1.70328 17.127 1.73643 17.0743L1.86865 16.8676C1.99553 16.6731 2.10644 16.5147 2.20137 16.3925C3.69554 14.4692 6.13777 13.3823 9.35515 13.3378L10.4167 13.3364V17.0757C10.4167 17.3101 10.6086 17.5 10.8453 17.5C10.959 17.5 11.068 17.4553 11.1483 17.3757L18.145 10.45C18.3961 10.2015 18.3961 9.79853 18.145 9.55L11.1483 2.62426C10.981 2.45858 10.7096 2.45858 10.5422 2.62426C10.4618 2.70383 10.4167 2.81174 10.4167 2.92426V6.40399Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-report" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8389 1.89381C11.0873 2.03868 11.2939 2.24532 11.4388 2.49366L18.9369 15.0065C19.4007 15.8015 19.1322 16.8221 18.3371 17.2859C18.0822 17.4346 17.7924 17.5129 17.4973 17.5129H2.50041C1.57993 17.5129 0.83374 16.7667 0.83374 15.8462C0.83374 15.5512 0.912088 15.2614 1.06078 15.0065L8.5595 2.49366C9.0233 1.69857 10.0438 1.43001 10.8389 1.89381ZM10.3118 13.3459C10.6283 13.3459 10.8848 13.6025 10.8848 13.9189V14.4918C10.8848 14.8082 10.6283 15.0647 10.3118 15.0647H9.73893C9.42252 15.0647 9.16602 14.8082 9.16602 14.4918V13.9189C9.16602 13.6025 9.42252 13.3459 9.73893 13.3459H10.3118ZM10.8356 7.09513C10.8356 6.86502 10.6491 6.67847 10.419 6.67847H9.58512C9.35501 6.67847 9.16846 6.86502 9.16846 7.09513V12.0956C9.16846 12.3257 9.35501 12.5123 9.58512 12.5123H10.419C10.6491 12.5123 10.8356 12.3257 10.8356 12.0956V7.09513Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-immerse" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M0.25 1C0.25 0.585786 0.585786 0.25 1 0.25H4C4.41421 0.25 4.75 0.585786 4.75 1C4.75 1.41421 4.41421 1.75 4 1.75H1.75V4C1.75 4.41421 1.41421 4.75 1 4.75C0.585786 4.75 0.25 4.41421 0.25 4V1ZM0.25 19C0.25 19.4142 0.585786 19.75 1 19.75H4C4.41421 19.75 4.75 19.4142 4.75 19C4.75 18.5858 4.41421 18.25 4 18.25H1.75V16C1.75 15.5858 1.41421 15.25 1 15.25C0.585786 15.25 0.25 15.5858 0.25 16V19ZM19 0.25C19.4142 0.25 19.75 0.585786 19.75 1V4C19.75 4.41421 19.4142 4.75 19 4.75C18.5858 4.75 18.25 4.41421 18.25 4V1.75H16C15.5858 1.75 15.25 1.41421 15.25 1C15.25 0.585786 15.5858 0.25 16 0.25H19ZM19.75 19C19.75 19.4142 19.4142 19.75 19 19.75H16C15.5858 19.75 15.25 19.4142 15.25 19C15.25 18.5858 15.5858 18.25 16 18.25H18.25V16C18.25 15.5858 18.5858 15.25 19 15.25C19.4142 15.25 19.75 15.5858 19.75 16V19ZM7 5C5.89543 5 5 5.89543 5 7V13C5 14.1046 5.89543 15 7 15H13C14.1046 15 15 14.1046 15 13V7C15 5.89543 14.1046 5 13 5H7Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-wechat" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5578 5.34061C12.0476 2.85722 8.90911 1.73257 6.11813 2.05358C4.56413 2.23231 3.0449 2.85861 1.88463 3.92471C1.00689 4.72863 0.354462 5.78486 0.109889 6.95889C-0.187864 8.37395 0.125815 9.85314 0.957723 11.0298C1.28982 11.4994 1.68479 11.9193 2.11951 12.2941C2.25136 12.4079 2.38694 12.5172 2.52543 12.6228C2.59301 12.6742 2.66115 12.7249 2.73011 12.7745C2.74195 12.7831 2.75392 12.7902 2.76512 12.7969C2.80389 12.8201 2.83351 12.8378 2.81653 12.8887L2.67458 13.3177C2.53986 13.7252 2.40492 14.1325 2.26998 14.5399C2.22084 14.6883 2.17169 14.8366 2.12256 14.985L2.61572 14.7368C2.85714 14.6151 3.09863 14.4935 3.34012 14.3719C3.58099 14.2507 3.82186 14.1294 4.06266 14.0081L4.40902 13.8337C4.42474 13.8257 4.44104 13.8164 4.45775 13.8069C4.51759 13.7728 4.58265 13.7356 4.64501 13.7481C4.76613 13.7723 4.88708 13.7972 5.00801 13.8221C5.08094 13.8372 5.15386 13.8522 5.22681 13.867C6.06287 14.0373 6.88508 14.1348 7.73859 14.0675C7.4486 13.0669 7.44915 12.0016 7.7559 11.0045C8.09853 9.88624 8.81438 8.89831 9.74448 8.19773C11.0171 7.23915 12.6431 6.81493 14.2212 6.99199C14.0895 6.4081 13.8688 5.85148 13.5578 5.34061ZM4.77922 5.02147C4.28094 5.02147 3.71299 5.35514 3.71299 5.90829C3.71299 6.46088 4.28066 6.79844 4.77922 6.79844C5.29233 6.79844 5.66293 6.42291 5.66293 5.90829C5.66293 5.39311 5.29205 5.02147 4.77922 5.02147ZM10.6158 5.90829C10.6158 6.42444 10.2434 6.79844 9.7296 6.79844C9.23076 6.79844 8.66641 6.46032 8.66641 5.90829C8.66641 5.3557 9.23104 5.02147 9.7296 5.02147C10.2431 5.02147 10.6158 5.39158 10.6158 5.90829ZM17.7911 8.53846C15.3552 6.80489 11.734 6.93368 9.53048 9.01108C8.77779 9.72181 8.22909 10.6485 8.04061 11.6744C7.78288 13.0799 8.22536 14.5441 9.17304 15.605C10.0674 16.6063 11.2889 17.2564 12.5986 17.5166C13.4216 17.6806 14.2559 17.6931 15.0799 17.5344C15.2863 17.4948 15.4911 17.4481 15.6954 17.3986C15.7826 17.3774 15.8697 17.3559 15.9568 17.334C15.9655 17.3319 15.9784 17.3272 15.9934 17.3219C16.0359 17.3068 16.0949 17.2858 16.118 17.2984C16.2476 17.3695 16.3771 17.4408 16.5066 17.5122L17.0557 17.8142L17.0577 17.8153L17.0598 17.8164C17.3912 17.9986 17.7227 18.1809 18.054 18.3634C17.9748 18.0977 17.895 17.832 17.8153 17.5664L17.8146 17.5641L17.6749 17.0981L17.5814 16.7863L17.5332 16.6257C17.5159 16.5675 17.5927 16.5183 17.6556 16.4779C17.6753 16.4653 17.6937 16.4535 17.7073 16.4426C18.0608 16.1622 18.3952 15.8558 18.6963 15.5191C19.1832 14.9747 19.5895 14.3498 19.8161 13.6505C20.0122 13.039 20.0488 12.392 19.9377 11.7604C19.7098 10.438 18.8643 9.30511 17.7911 8.53846ZM15.2396 11.0049C15.1595 10.6088 15.5334 10.1787 15.931 10.1787C16.3063 10.1787 16.7409 10.3931 16.8096 10.7989C16.8724 11.1695 16.556 11.4696 16.227 11.5617C15.8032 11.6802 15.3326 11.4649 15.2396 11.0049ZM12.0348 10.1787C11.6369 10.1787 11.2573 10.6064 11.3385 11.0049C11.4325 11.4667 11.9081 11.68 12.3327 11.5617C12.6626 11.4696 12.9753 11.1695 12.9134 10.7989C12.8453 10.3914 12.4112 10.1787 12.0348 10.1787Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-weibo" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M-0.000244141 13.0984C-0.000244141 8.70757 6.6145 3.5004 9.18008 4.57052C10.1717 4.98415 9.97381 6.1693 9.85415 6.88576C9.8069 7.16863 9.77186 7.37844 9.82705 7.43887C9.92921 7.55074 10.2955 7.42054 10.7994 7.2414C11.8362 6.87286 13.4557 6.2972 14.5566 7.19617C15.2665 7.77576 14.9657 8.72382 14.7905 9.27603C14.7289 9.4701 14.6829 9.61528 14.7017 9.6784C14.741 9.81053 14.9858 9.91133 15.317 10.0477C15.926 10.2984 16.8269 10.6692 17.2784 11.5759C18.3716 13.7713 15.2036 18.2504 8.62234 18.2504C3.25024 18.2504 -0.000244141 15.6688 -0.000244141 13.0984ZM8.45309 17.057C11.7733 16.7393 14.2944 14.7397 14.0842 12.5908C13.874 10.4418 11.012 8.95732 7.69179 9.27503C4.37159 9.59274 1.85045 11.5924 2.06068 13.7413C2.2709 15.8902 5.13288 17.3747 8.45309 17.057Z" data-v-b7c4e7d2=""></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.7098 12.7012C11.1162 14.1374 10.0604 15.6852 8.35157 16.1581C6.64275 16.6311 4.92801 15.8502 4.5216 14.4139C4.11518 12.9777 5.171 11.4299 6.87982 10.957C8.58865 10.484 10.3034 11.2649 10.7098 12.7012ZM7.67026 13.6265C7.89619 14.1072 7.61751 14.7092 7.04779 14.9711C6.47808 15.2331 5.83308 15.0558 5.60715 14.5751C5.38122 14.0945 5.6599 13.4925 6.22962 13.2306C6.79933 12.9686 7.44433 13.1459 7.67026 13.6265ZM8.41746 13.3766C8.63945 13.2745 8.74804 13.0399 8.66001 12.8526C8.57197 12.6654 8.32065 12.5963 8.09866 12.6984C7.87667 12.8004 7.76808 13.035 7.85612 13.2223C7.94415 13.4095 8.19547 13.4786 8.41746 13.3766Z" data-v-b7c4e7d2=""></path><path d="M13.648 3.54836C13.9523 3.47388 14.2712 3.43418 14.6004 3.43418C16.7813 3.43418 18.5492 5.18267 18.5492 7.33955C18.5492 7.81593 18.4633 8.27085 18.3066 8.69104C18.168 9.06261 18.3602 9.47493 18.7359 9.61199C19.1116 9.74904 19.5285 9.55894 19.6671 9.18737C19.8822 8.61063 19.9993 7.98781 19.9993 7.33955C19.9993 4.3906 17.5822 2 14.6004 2C14.1528 2 13.717 2.05403 13.2996 2.15619C12.9109 2.25133 12.6738 2.64011 12.77 3.02455C12.8662 3.40899 13.2593 3.6435 13.648 3.54836Z" data-v-b7c4e7d2=""></path><path d="M14.2887 6.05162C14.388 6.02824 14.4923 6.01569 14.6004 6.01569C15.3397 6.01569 15.939 6.6084 15.939 7.33955C15.939 7.49914 15.9108 7.65062 15.8596 7.7904C15.7232 8.16277 15.9179 8.57396 16.2944 8.70881C16.6709 8.84366 17.0867 8.65112 17.2231 8.27875C17.3307 7.98466 17.3891 7.66805 17.3891 7.33955C17.3891 5.81633 16.1406 4.58152 14.6004 4.58152C14.3784 4.58152 14.1614 4.60734 13.9529 4.65643C13.5633 4.74813 13.3227 5.1348 13.4154 5.52008C13.5082 5.90535 13.8991 6.14333 14.2887 6.05162Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-qq" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path d="M11.8841 17.1943C11.1815 17.1943 10.5625 17.2136 10.0541 17.26C9.44625 17.2112 8.8365 17.1898 8.22671 17.1956C6.20498 17.1956 4.40588 17.9613 4.40588 18.5263C4.40588 19.0681 5.89998 19.0076 7.91657 18.987C8.64426 18.985 9.3699 18.9096 10.0824 18.7618C10.6796 18.8879 11.4079 18.9677 12.193 18.9741C14.2095 18.9947 15.7024 19.0552 15.7024 18.5173C15.7024 17.9549 13.9045 17.1943 11.8841 17.1943V17.1943Z" data-v-b7c4e7d2=""></path><path d="M16.9138 11.6311C16.5346 10.6112 16.1212 9.60428 15.6745 8.61206C15.6951 8.37141 15.7054 8.12818 15.7054 7.8811C15.7054 4.08086 13.7622 1 10.0649 1C6.36759 1 4.42307 4.08086 4.42307 7.8811C4.42307 8.11274 4.43208 8.34052 4.45138 8.56573C3.99804 9.5756 3.57913 10.6006 3.19536 11.6389C2.41678 13.7494 2.38203 15.6566 2.65357 15.7982C2.84661 15.8985 3.54797 15.1611 4.21845 13.9669C4.66115 16.7801 6.53102 18.8842 10.0649 18.8842C13.5871 18.8842 15.457 16.7916 15.9074 13.99C16.5728 15.1611 17.2664 15.8818 17.4569 15.7814C17.7284 15.6399 17.6937 13.7365 16.9138 11.6311V11.6311Z" data-v-b7c4e7d2=""></path><path d="M8.5542 3.2522C8.00598 3.26507 7.57358 3.90981 7.58902 4.69739C7.60447 5.48369 8.06132 6.11299 8.60954 6.1027C9.15776 6.0924 9.59016 5.44637 9.57472 4.65879C9.56056 3.87249 9.10243 3.24319 8.5542 3.25348V3.2522ZM11.5862 3.26764C11.0315 3.25734 10.5695 3.88278 10.5541 4.66651C10.5386 5.44895 10.9749 6.0924 11.5308 6.1027C12.0842 6.11299 12.5475 5.48755 12.5629 4.70512C12.5784 3.92139 12.1408 3.27794 11.5862 3.26764V3.26764Z" data-v-b7c4e7d2=""></path><path d="M13.6704 9.57861C12.5971 9.76521 11.354 9.87074 10.0285 9.87074C8.7287 9.87074 7.50742 9.76779 6.44959 9.58762C5.71605 10.4962 5.65942 11.8307 5.65942 13.3184C5.65942 16.0505 7.20371 18.2665 10.0645 18.2665C12.924 18.2665 14.4696 16.0505 14.4696 13.3184C14.4696 11.8243 14.4104 10.4859 13.6704 9.57861V9.57861Z" data-v-b7c4e7d2=""></path><path d="M10.0628 6.56616C8.14273 6.56616 6.58557 6.95223 6.58557 7.26238C6.58557 7.57124 8.62146 8.42188 10.0641 8.42188C11.5054 8.42188 13.5413 7.55065 13.5413 7.26238C13.5413 6.97411 11.9842 6.56745 10.0641 6.56745L10.0628 6.56616Z" data-v-b7c4e7d2=""></path><path d="M15.6744 8.6121L15.6757 8.59151C14.264 9.05866 12.2718 9.35078 10.0648 9.35078C7.8513 9.35078 5.85402 9.05737 4.441 8.58765C4.14115 9.25684 3.85546 9.93375 3.58521 10.6171C4.45644 10.9054 5.43192 11.1357 6.48332 11.2992V13.8858C6.48332 13.8858 7.22715 14.0235 7.92981 14.0531C8.42784 14.0737 8.95676 13.9888 8.95676 13.9888V11.5398C9.32095 11.5565 9.6903 11.5656 10.0635 11.5656C12.4919 11.5656 14.7311 11.2142 16.5251 10.6222C16.2566 9.94593 15.9729 9.27571 15.6744 8.6121V8.6121Z" data-v-b7c4e7d2=""></path><path d="M8.87981 4.24829C8.63787 4.24829 8.44226 4.53656 8.44226 4.89174C8.44226 5.24693 8.63787 5.5352 8.87981 5.5352C9.12046 5.5352 9.31736 5.24693 9.31736 4.89174C9.31736 4.53656 9.12046 4.24829 8.87981 4.24829V4.24829ZM12.0997 4.65624C12.0997 4.65624 11.9246 4.41816 11.4819 4.48122C11.0444 4.54428 10.8745 4.83126 10.8423 4.86215C10.8423 4.86215 10.7381 5.0243 10.8115 5.12467C10.8848 5.22505 11.0174 5.06676 11.0174 5.06676C11.0174 5.06676 11.2194 4.78364 11.4806 4.77335C11.6273 4.76349 11.7729 4.80489 11.8925 4.89046C11.8925 4.89046 12.0211 4.99856 12.0984 4.89046C12.1769 4.78364 12.0997 4.65624 12.0997 4.65624V4.65624Z" data-v-b7c4e7d2=""></path></symbol></svg> <div badge="2" class="panel-btn with-badge" data-v-b7c4e7d2=""><svg class="sprite-icon icon-zan" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-zan" data-v-0f838daa=""></use></svg></div> <div badge="3" class="panel-btn with-badge" data-v-b7c4e7d2=""><svg class="sprite-icon icon-comment" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-comment" data-v-0f838daa=""></use></svg></div> <div class="panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-collect" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-collect" data-v-0f838daa=""></use></svg> <div class="collect-popover" data-v-d0b73df6="" data-v-b7c4e7d2=""><div class="title" data-v-d0b73df6="">收藏成功！</div> <div class="sub-title" data-v-d0b73df6="">
    已添加到「」，
    <span class="modify-btn" data-v-d0b73df6="">点击更改</span></div></div> <!----> <!----></div> <div class="share-btn panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-share" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-share" data-v-0f838daa=""></use></svg> <div class="share-popup" data-v-b7c4e7d2=""><ul data-v-b7c4e7d2=""><li class="share-item wechat" data-v-b7c4e7d2=""><svg class="sprite-icon share-icon icon-wechat" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-wechat" data-v-0f838daa=""></use></svg> <span class="share-item-title" data-v-b7c4e7d2="">微信</span> <div class="wechat-qrcode" data-v-b7c4e7d2=""><img src="https://juejin.cn/post/6962777564335046687" class="wechat-qrcode-img" style="display:none;" data-v-b7c4e7d2=""> <span class="wechat-qrcode-title" data-v-b7c4e7d2="">微信扫码分享</span></div></li> <li class="share-item weibo" data-v-b7c4e7d2=""><svg class="sprite-icon share-icon icon-weibo" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-weibo" data-v-0f838daa=""></use></svg> <span class="share-item-title" data-v-b7c4e7d2="">新浪微博</span></li> <li class="share-item qq" data-v-b7c4e7d2=""><svg class="sprite-icon share-icon icon-qq" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-qq" data-v-0f838daa=""></use></svg> <span class="share-item-title" data-v-b7c4e7d2="">QQ</span></li></ul></div></div> <div class="divider" data-v-b7c4e7d2=""></div> <div class="panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-report" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-report" data-v-0f838daa=""></use></svg></div> <span class="tooltip" data-v-b7c4e7d2=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        沉浸阅读
      </div><span class="byte-tooltip__wrapper"><div class="panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-immerse" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-immerse" data-v-0f838daa=""></use></svg></div></span></span></div></div> <!----></main> <!----></div> <!----> <div class="global-component-box"><div data-v-262fe4c6="" class="alert-list alert-list"></div> <div data-v-0b2d23d8="" class="suspension-panel suspension-panel"><!----> <button data-v-0b2d23d8="" title="回到顶部" class="btn to-top-btn" style="display: none;"><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M2.75 1C2.33579 1 2 1.33579 2 1.75C2 2.16421 2.33579 2.5 2.75 2.5H13.25C13.6642 2.5 14 2.16421 14 1.75C14 1.33579 13.6642 1 13.25 1H2.75ZM7.24407 3.87287C7.64284 3.41241 8.35716 3.41241 8.75593 3.87287L13.0622 8.84535C13.6231 9.49299 13.163 10.5 12.3063 10.5H10V14C10 14.5523 9.55228 15 9 15H7C6.44772 15 6 14.5523 6 14V10.5H3.69371C2.83696 10.5 2.37691 9.49299 2.93778 8.84535L7.24407 3.87287Z" fill="#8A919F"></path></svg></button> <button data-v-0b2d23d8="" title="建议反馈" class="btn meiqia-btn" style=""><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-feedback"><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M1.8252 4.002C1.8252 2.80032 2.79935 1.82617 4.00102 1.82617H12.001C13.2027 1.82617 14.1768 2.80032 14.1768 4.002V9.71628C14.1768 10.918 13.2027 11.8921 12.001 11.8921H9.43308L6.92709 14.1281C6.4455 14.5578 5.68234 14.216 5.68234 13.5706V11.8921H4.00102C2.79934 11.8921 1.8252 10.918 1.8252 9.71628V4.002ZM11.2414 7.86753C11.3826 7.65526 11.3249 7.36878 11.1126 7.22764C10.9004 7.08651 10.6139 7.14417 10.4728 7.35643C9.94042 8.15705 9.03153 8.68309 7.99997 8.68309C6.96841 8.68309 6.05952 8.15705 5.52719 7.35643C5.38605 7.14417 5.09957 7.08651 4.88731 7.22764C4.67504 7.36878 4.61738 7.65526 4.75852 7.86753C5.45467 8.91452 6.64645 9.60617 7.99997 9.60617C9.35349 9.60617 10.5453 8.91452 11.2414 7.86753Z" fill="#1E80FF"></path></svg></button></div> <!----> <!----> <!----> <!----> <!----></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){u.loading=a;u.skeleton=b;u.cursor=f;u.data=[];u.total=d;u.hasMore=b;return {layout:"default",data:[{skipSSR:a,additionalDataUseCSR:b}],fetch:[{bdPageUrlForNav:"https:\u002F\u002Fbd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=nav",queryString:e,isShowUserDropdownList:a,isShowAddMoreList:a,isFocus:a,isPhoneMenuShow:a,visibleBadge:a,placeholder:e,hiddenProperty:"hidden",searchHistoryVisible:a,searchHistoryItems:[],tabBadge:c,isChangePlaceholder:b,showMallBridge:a,isGuideLoginHeaderVisible:a,loginGuideTimer:c,loginGuideStartTime:d,loginGuideNextTime:d,needLoginGuide:a},{articleBanner:{url:"https:\u002F\u002Fjuejin.cn\u002Fextension\u002F?utm_source=standalone&utm_medium=post&utm_campaign=extension_promotion",title:"安装掘金浏览器插件",content:"多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！"},showExtension:b}],error:c,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:b,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:k,name:k,title:"推荐 ",id:k},{type:l,name:l,title:"热门 ",id:l},{type:s,name:s,title:"关注 ",id:s},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:t}},search:{search_result_from:d,query:e,list:[],linkList:[],loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:m,category:"all"},hotList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{tdkTemplates:[],categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:t,category:k,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",DELETE_USER_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_USER_ENTRIES",DELETE_TAG_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_TAG_ENTRIES",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,skeleton:b,hasMore:b,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:b,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:b,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:[],actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE",FETCH_ANNUALS:"@\u002Fview\u002Fuser\u002FFETCH_ANNUALS"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:m,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},searchList:{list:[],hasMore:a,skeleton:a,loading:a,key_word:e,search_type:d,cursor:f,isPostSearch:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:b,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:b,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET",TOGGLE_FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FTOGGLE_FOLLOW_COLLECTION",FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFOLLOW_COLLECTION",UNFOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUNFOLLOW_COLLECTION",DELELTE_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FDELELTE_COLLECTION",ADD_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FADD_COLLECTION",EDIT_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FEDIT_COLLECTION"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},followingTeamsList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:b,hasMore:a,loading:a,type:"bought",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}},selfColumnList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FRESET"}},columnFollowedList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FRESET",FILTER:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFILTER"}},realtimes:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FDELETE"}},realtimeliked:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fuser\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d}},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fsystem\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{renderPost:b,serverRenderList:a,column:{id:w},entry:{id:w,screenshot:void 0,liked:a,article_id:w,article_info:{article_id:w,user_id:"465848663023160",category_id:"6809637769959178254",tag_ids:[6809640862281105000],visible_level:d,link_url:e,cover_image:"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fba3e6b0364ca43bc88a06fa17f676862~tplv-k3u1fbpfcp-watermark.image",is_gfw:d,title:"一文通读 Groovy 元对象协议 MOP",brief_content:"元数据是描述数据的数据；元编程，就是用程序编写程序。本文介绍 Groovy 如何通过 MOP 实现运行时元编程。",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1621148553",mtime:"1621222650",rtime:"-62135596800",draft_id:"6962777777569595406",view_count:911,collect_count:g,digg_count:n,comment_count:3,hot_index:50,is_hot:d,rank_index:2.3e-7,status:g,verify_status:g,audit_status:n,mark_content:"---\nhighlight: an-old-hope\ntheme: hydrogen\n---\n# 7. Groovy 元对象协议\n\n编程中我们总是会听到 \"元\" ( Meta- ) 信息，或者 \"元\" 数据的一些说法，它们的通俗解释就是：描述信息的信息，或者是描述数据的数据。拿一张相片举例子，除了相片自身携带的图像信息以外，有关于它的印刷时间，拍摄时间，标签等都可以属于 \"元信息\"。在本篇文章中，信息本身就是 POJO \u002F POGO 对象，而它的描述信息则是元方法 `MetaMethod` 和元属性 `MetaProperty`，后文统称两者为元信息。\n\n由此引申，元编程 ( Metaprogramming )，就是 \"用于编写程序的程序\"，简单来说，通过操纵，创建各种元信息来达到动态编程，或者是自动化编程的手段。一个例子就是：Grails\u002FGORM 利用元编程的能力为数据查询动态合成类和方法。元编程依赖一种约定 —— 那就是元对象协议 Meta Object Protocol，简称 MOP。Groovy 的 MOP 本身很简单 —— 仅仅用一个 `groovy.lang.MetaObjectProtocol ` 接口规范了如何获取元信息，设置元信息。因此我们的关注点也不在 MOP 本身，而是围绕 MOP 的各种应用：**方法拦截，方法合成，方法注入**。\n\n在 Java 当中，有关一个类的所有信息都已经在编译期间尘埃落定。我们常说 \"Java 的动态反射\" 也仅限于 \"动态获取已有的静态信息\"，而不能在运行时修改它的类型，或者赋予它全新的行为。但如果一个类是在运行期间基于各种元信息构建 ( 拼凑 ) 出来的呢？Groovy 的确提供了这么一个类 —— Expando。\n\n本章首先介绍 MOP 最基本的内容，对于 POJO 或者 POGO，应该如何获取它们的元信息，然后再介绍基于这些元信息的实用操作。对于方法拦截，方法注入，方法合成等内容本章围绕两个重要的方法进行：`invokeMethod` 和 `methodMissing`。\n\n## 7.1 POGO & POJO，MetaClass\n\nPOJO ( Plain Old Java Object )，简单 Java 对象，代表没有额外类继承 ( 只继承于 `java.lang.Object` )，没有额外接口实现，也没有被其它框架侵入的 Java 对象。从广义上来讲，它指不受任何特定 Java 对象模型，约定，框架约束的 Java 对象；而正因为它不和任何详细的业务功能绑定，从狭义上来看，POJO 又可以代表那些只用于承载数据，仅设置了 `setter` 和 `getter` 方法的 Java 对象，因此 POJO 有时又会和 Entity，DTO 等概念混淆，本文的 POJO 指广义的概念。\n\n同理，在 Groovy 中，POGO 代表了普通的 Groovy 对象，它既是 `java.lang.Object` 的子类，又天然地实现了 `groovy.lang.GroovyObject` 接口；而 POJO 在这里可以是任何其它 JVM 语言实现的。下面是 `groovy.lang.GroovyObject` 接口的内容：\n\n```java\n\u002F\u002F 来自 IDEA 的反编译内容。\npublic interface GroovyObject {\n    @Internal\n    default Object invokeMethod(String name, Object args) {\n        return this.getMetaClass().invokeMethod(this, name, args);\n    }\n\n    @Internal\n    default Object getProperty(String propertyName) {\n        return this.getMetaClass().getProperty(this, propertyName);\n    }\n\n    @Internal\n    default void setProperty(String propertyName, Object newValue) {\n        this.getMetaClass().setProperty(this, propertyName, newValue);\n    }\n    \n    MetaClass getMetaClass();\n    void setMetaClass(MetaClass var1);\n}\n```\n\n从方法名称来看，它们都和 元类型 `MetaClass` 紧密相关，事实也是如此。幸运的是，不论一个对象属于 POGO 还是 POJO，我们总通过 `.metaClass` 简单地提取出它们的元类型：\n\n```groovy\n\u002F\u002F 该对象是一个 Java 实现\ndef pojo = new POJO(10)\n\n\u002F\u002F 该对象是一个 Groovy 实现\ndef pogo = new POGO()\n\n\u002F\u002F 任何在 Groovy Script 中使用的类都可以使用 .metaClass ，这而与它的源 JVM 语言无关。\n\u002F\u002F 结合了之前 \"统一访问原则\" 的设计思想。\npogo.metaClass\npojo.metaClass\n```\n\n实际上，两者的 `metaClass` 的获取途径并不相同：对于 POJO，Groovy 维护用于获取 `MetaClass` 的一个 `MetaClassRegistry`。而对于 POGO ，其 `.metaClass` 指向接口中的 `setMetaClass` 方法，这个语法糖在前文介绍 \"统一访问原则\" 时提到过。\n\n## 7.2 基于 MetaClass 获取元信息\n\n无论是 POJO 还是 POGO，一旦获取了其 `MetaClass`，我们就能以类似 \"Java 反射\" 的形式在运行时获取这个类一切的元方法 `MetaMethod` 和元属性 `MetaProperty` ( 所以说访问修饰符在 Groovy 中 \"形同虚设\" )。\n\n**元方法** ( Meta Method )，包含了实例方法和静态方法，因此对应的获取方法叫 `getMetaMethod` ，`getStaticMetaMethod`。如果要获取重载的方法列表，那么对应的方法则是 `getMetaMethods` 和 `getStaticMetaMethods` 。获取的元方法可以通过 `invoke` 方法调用。下面是一个简单的例子：\n\n```groovy\ndef pojo = new POJO(10)\ndef methodName = \"yawn\"\ndef staticMethodName = \"greet\"\n\n\u002F\u002F 获取实例方法 (元方法) 的一个 \"句柄\"。\ndef method = pojo.metaClass.getMetaMethod(methodName)\n\n\u002F\u002F 通过 invoke 方法绑定一个实例并调用。\n\u002F\u002F 如果调用的方法是空括号方法，那么可以只传进一个实例。\nmethod.invoke(pojo)\n\n\u002F\u002F 如果获取的元方法需要参数列表，则需要以可变参数的形式提供这些参数类型 Class, 或者是对应类型的任意 Object。\n\u002F\u002F 这里存在方法重载，如果只传入 null, 那么 Groovy 会疑惑第二个参数是 Class[] 还是 Object[] 因而报错。\n\u002F\u002F null as Class[] 是避免歧义的做法。\ndef staticMethod =  pojo.metaClass.getStaticMetaMethod(staticMethodName,null as Class[])\nstaticMethod.invoke(pojo)\n\n\u002F\u002F 下面演示了获取有参数列表的 \"静态\" 元方法的方式。\ndef staticMethodWithParam = pojo.metaClass.getStaticMetaMethod(staticMethodName,String.class)\n\u002F\u002F 静态方法不需要绑定特定对象。\nstaticMethodWithParam.invoke(null,\"Tom\")\n```\n\n**元属性** ( Meta Property )，包含了实例属性和静态属性，对应的获取方法叫 `getMetaProperty`，`getStaticMetaProperty`。假定我们只是想对某些元信息的 \"存在性\" 做检查，那么可以使用 `responseTo` ( 检查元方法，在之前我们曾用于对 \"鸭子类型\"  进行检查 ) 或者是 `hasProperty` ( 检查元属性 ) 。\n\n```groovy\ndef pojo = new POJO(10)\n\ndef methodName = \"SayHi\"\ndef propertyName = \"property\"\n\nprintln( \"the pojo has the method ${methodName} ? ${pojo.respondsTo(methodName)?\"yes\":\"no\"}\")\nprintln( \"the pojo has the method ${propertyName} ? ${pojo.hasProperty(propertyName)?\"yes\":\"no\"}\")\n```\n\n## 7.4 动态访问对象\n\n我们之前已经介绍了一个动态访问对象属性的语法糖 —— 通过重载的 `getAt` 方法。这个属性完全可能是对象已有的，或者是我们通过操纵元属性添加的。\n\n```groovy\ndef pojo = new POJO(10)\nprintln pojo[\"property\"]\n```\n\n下面介绍通过另一种方式：\n\n```groovy\nprintln pojo.\"property\"\n```\n\n或者是通过 GString 引用的方式指代属性名 ( 后文会经常使用这个操作方法 )：\n\n```groovy\ndef propertyName = \"property\"\nprintln pojo.\"${propertyName}\"\n```\n\n同理，如果要动态调用方法，除了 `invokeMethod()` 之外，还可以写成：\n\n```groovy\ndef methodName = \"SayHi\"\n\u002F\u002F 等价于 pojo.SayHi()\nprintln pojo.\"${methodName}\"()\n```\n\n此外，如果要查看 **POGO 的**所有属性 ( 包括 `class` 信息 )，可以通过 `.properties` ( `.getProperties()` 方法 ) 获取 Map 形式，或者是通过 `.metaPropertyValues` 获取 List 形式。这两个方法不是元对象协议的一部分，对 POJO 使用只能访问到 `class` 信息。\n\n```groovy\n\u002F\u002F 获取一个 POGO 对象的所有属性。\npogo.properties\n\u002F\u002F 由于返回值是 Map，因此可以像 k-v 对那样 \"取值\"。\npogo.properties[\"property\"]\n\n\u002F\u002F 或者拿到 for 循环里遍历：\ndef name,value\n(name,value) = [\"\",\"\"]\ndef str = \u002Fproperty name {${-\u003E name}},value is {${-\u003E value}}\u002F\npogo.properties.each {\n    entry -\u003E\n        name = entry.key\n        value = entry.value\n        println str\n}\n\n\u002F\u002F 获取链表形式\n\u002F\u002F getProperties() 方法本质上就是通过这个方法获取的，只不过额外包装了放入 Map 的过程。\npogo.metaPropertyValues.each {println \"[${-\u003E it.value}:${it.name}]\"}\n```\n\n## 7.5 动态创建类\n\nGroovy 提供了 `Expando` 来允许程序在运行时动态塑造出一个类。我们可以在构造器内部传入一个 Map 来任意指派它内部的属性，也可以通过赋值的形式随时为它注入全新的属性或者方法。\n\n```groovy\ndef namelessObj = new Expando(name:\"jdbcConfiguration\")\n\nnamelessObj.Ip = \"192.168.2.140\"\nnamelessObj.Port = \"3306\"\nnamelessObj.Db = \"mysql\"\n\n\u002F\u002F Expando 不支持统一访问原则，因此不能隐式地转换成 \"uri\" 属性。\nnamelessObj.getUri= {\n    return \"${delegate.Db}:\u002F\u002F${delegate.Ip}:${delegate.Port}\"\n}\n\n\n\u002F\u002F 支持对这个合成类的动态属性调用\nprintln namelessObj[\"Ip\"]\n\n\u002F\u002F 等价于以下访问方式\nprintln namelessObj.Ip\n\n\u002F\u002F 支持对这个合成类的动态方法调用\ndef eval = \"getUri\"\nprintln namelessObj.\"${eval}\"()\n\n\u002F\u002F 等价于以下调用方式\n\u002F\u002F 访问不存在的属性返回 null\n\u002F\u002F 调用不存在的方法会被引导至 methodMissing 方法\nprintln namelessObj.getUri()\n```\n\n它是轻量级的，且十分灵活。比如，为单元测试创建一个模拟对象 ( Mock ) 时，这个特性会大放光彩。\n\n# 8. 基于 MOP 方法拦截\n\n对于学习过 Spring 的读者而言，方法拦截一定不陌生。Groovy 实现 AOP 不需要借助任何的框架来实现。本文所提到的方法拦截，形式上非常接近于 Spring 的环绕通知 ( Around Advice ) 。在这个环绕通知内部，我们将自由地支配前向通知，后向通知，以及在何时去调用原方法等等。\n\n这一大章介绍方法拦截的两个思路，两者的区别在于是我们是否有权限修改这个类定义。如果我们是这个类的作者，那么可以通过硬编码 `GroovyInterceptable` 接口实现，否则，我们就需要借助元类型 `MetaClass` 注入特定方法的形式在外部进行方法拦截。\n\n## 8.0 闭包属性可能会代替方法调用\n\nGroovy 有这样的语法现象：如果找不到一个实例的方法，那么就去寻找有无同名的闭包属性可以调用：\n\n```groovy\nclass POGO {\n    \u002F\u002F POGO 的一个名为 greet 的方法，优先被调用\n    def greet(){\n        println \"greet by method\"\n    }\n    \u002F\u002F POGO 的一个名为 greet 的闭包属性，由于同名方法已经存在，因此该闭包不会被优先调用\n    \u002F\u002F 结合统一访问原则，以下写法会优先调用闭包： new POGO().greet, new POGO().getGreet().call()\n    def greet = {\n        println \"greet by closure\"\n    }\n    \u002F\u002F 在同名方法不存在的情况下，Groovy 尝试去调用该闭包的 .call() 方法\n    def hi = {\n        println \"hi by closure\"\n    }\n    \u002F\u002F 当发现方法不存在时的重载版 methodMiss() 方法\n    def methodMissing(String name, def args) {\n        println \"a method $name doesn't exist.\"\n        return null\n    }\n}\n```\n\n下面是一段测试结果：\n\n```groovy\n\u002F\u002F 当方法和闭包属性同名时，这种写法优先选择前者。\n\u002F\u002F greet by method\npogo.greet()\n\n\u002F\u002F 注意，这种写法总是获取闭包属性。\npogo.greet\n\n\u002F\u002F 没有可用方法时选择同名的闭包属性并调用 call 方法，或者说使用这个闭包属性 \"顶替\" 不存在的同名方法。\n\u002F\u002F hi by closure\npogo.hi()\n\n\u002F\u002F 调用确实不存在的方法或闭包属性，会被引导至 methodMissing 方法。\n\u002F\u002F 如果自身没有实现 methodMissing 方法，那么就会抛出异常。\n\u002F\u002F a method echo doesn't exist.\npogo.echo()\n```\n\n注意，`greet()` 和 `greet` 在这里是不一样的：\n\n1. `greet()` 表示方法调用，在同名方法不存在时，这也有可能指向一个名为 `greet` 的闭包调用。\n2. `greet` 表示访问属性，它在这里表示返回那个名为 `greet` 的闭包。但严格来说，它也有可能指向 `getGreet()` 方法。\n\n## 8.1 GroovyInterceptable 接口实现\n\n现在我们了解了，一个对象的方法如果要被成功调用，要么它的确有这个方法定义，要么它具备同名闭包的属性。而如果一个 POGO 实现了 `GroovyInterceptable` 接口，那么这个规则会被改写 —— 所有的方法调用会被其自身的 `invokeMethod()` 方法拦截，**甚至这个方法或者闭包属性可以完全不存在**。我们可以在这个方法内部加入统一的前向通知和后向通知，来达到切面编程的目的。\n\n下面是一个 `Car` 的定义，这辆车有一些行为：启动 `run` 和仪表盘 `speed` 。假定我们想要在调用这两个方法之前和之后加上统一的处理方法，此时就可以使用 `GroovyInterceptable` 接口配合 `invokeMethod()` 方法对这些调用拦截。\n\n```groovy\nclass Car implements GroovyInterceptable {\n    \n\t\u002F\u002F 此处设计是为了避免 Car 自身对 println 方法进行拦截。\n    def static outline = { any -\u003E System.out.println(any) }\n\n    \u002F\u002F 调用这些方法都会被拦截。\n    def run() {outline \"running!\"}\n    def speed(double kmh){\"${kmh} km \u002F h\"}\n\n    \u002F\u002F 核心方法。\n    def invokeMethod(String name, args) {\n        \u002F\u002F 前向通知\n        outline \"pre:the method ${name} needs check.\"\n\n        \u002F\u002F 通过 metaClass 调用原本的方法\n        def result = this.metaClass.getMetaMethod(name, args as Object[]).invoke(this, args as Object[])\n\n        \u002F\u002F 后向通知\n        outline \"after:done \"\n        if (!result.is(null)){\n            \u002F\u002F 有结果则打印\n            outline \"and the result is ${result}\"\n        }\n    }\n}\n\ndef car = new Car()\ncar.run()\ncar.speed(109)\n\n\u002F\u002F 运行结果\n\u002F\u002F pre:the method run needs check.\n\u002F\u002F running!\n\u002F\u002F after:done\n\n\u002F\u002F pre:the method speed needs check.\n\u002F\u002F after:done \n\u002F\u002F and the result is 109.0 km \u002F h\n```\n\n注意，这个代码块特意没有使用原生的 `println` 方法进行控制台输出。原因是：`println` 方法是 Groovy 为 Object 注入的方法，这个方法也会被 POGO 自身的 `invokeMethod` 方法拦截，但我们并不希望这么做。`System.out.println()` 是 `PrintStream` 的一个 `static` 方法，它不会受此影响，且笔者又不想处处留下一长串的 `sout`，因此用一个命名更简短的闭包取而代之。\n\n对这个套路比较熟悉的读者会明白：这是对**代理模式**的一个实践。被代理 ( 或称被 \"拦截\" ) 的方法名和方法参数都可以通过 `name` 和 `args` 获取，我们利用这两条信息在 `.metaClass` 中找到原来的方法并调用。这里同样是为了避免 Groovy 混淆重载的 `getMetaMethod` 方法，因此特意通过 `as` 关键字限定了类型。\n\n如果调用的方法是不存在的，那么 `invokeMethod` 也会对此进行拦截。所有的前向通知都能够正常执行，直到通过调用 `getMetaMethod` 获取元方法这一步为止。对于不存在的方法，我们只能获取到一个空指针，对空指针调用 `invoke` 方法会抛出空指针异常。\n\n##  8.2 MetaClass 注入的实现\n\n`GroovyIntercptable` 接口通过硬编码到类定义的方式实现方法拦截。但是如果我们并不是这个类的设计者，或者无权对原来的类定义做出修改时，这一招就行不通了。如果无法从内部定义类的方法拦截，那就想想如何在外部实现它 —— 比如说通过 `.metaClass` 获取元类型，然后对它注入 `invokeMethod` 方法。\n\n```groovy\n\u002F\u002F 还是刚才的 Car，只不过现在没有办法修改了。\nfinal class Car  {\n    def static outline = { any -\u003E System.out.println(any) }\n    def run() { outline \"running!\"}\n    def speed(double kmh) {\"${kmh} km \u002F h\"}\n}\n\n\u002F\u002F 打印方法注入之前的 metaClass 类型\nprintln Car.metaClass.getClass().name\n\n\u002F\u002F IDEA 的 Groovy 插件不会对外部注入的方法进行代码提示，甚至可能还会说 can not resovle symbol ...\n\u002F\u002F 这是插件的问题，程序能够正常运行。\nCar.metaClass.invokeMethod = {\n    String name,args-\u003E\n        def outline = {any -\u003E System.out.println(any)}\n        outline \"before running, the method ${name} needs check.\"\n        def result = Car.metaClass.getMetaMethod(name,args as Object[]).invoke(delegate,args as Object[])\n        outline \"after running....${result.is(null)?\"\":\"and the result is ${result}\"}\"\n}\n\ndef car = new Car()\ncar.run()\ncar.speed(109)\n\n\u002F\u002F 打印方法注入之后的 metaClass 类型。\nprintln Car.metaClass.getClass().name\n```\n\n我们通过为 `Car.metaClass.invokeMethod` 赋值闭包的方式，实现了在 `Car` 的元信息内注入方法。不止是 `invokeMethod` 方法，在元类型内注入任何其它的方法也是相似的套路 ( 见后文 ) 。只不过 `invokeMethod` 更特殊一些：后续对该类实例的所有方法调用全部会率先引导至 `invokeMethod` 方法。\n\n在闭包内部，使用 `delegate` 来指向调用的那个对象，而非 `this`。如果要使用到对象的一些内部属性，比如说 `name`，需要借助 Groovy 的动态访问语法来完成：`delegate[\"name\"]` 。\n\n和前者的 `GroovyInterceptable` 接口实现相比，它的一大优势是：Groovy 也支持提取 POJO 的 `metaClass` ，因此这个方法也能用于拓展 POJO。\n\n如果拦截到的方法确实不存在，在直接抛出空指针异常之前，我们更希望通过 `methodMissing` 做一些善后工作。下一节我们就会介绍如何利用 `methodMissing` 方法做一些更体面的处理 —— 比如根据用户传入的方法名来推测用户的需求，然后给出合适的结果，而不是像现在一样给出一行枯燥的代码提示。值得注意的是，在 `invokeMethod` 内部，我们需要借助 `invokeMissingMethod` 来间接调用该对象的 `methodMissing` 方法，否则 `methodMissing` 方法也会意外地被 `invokeMethod` 拦截。\n\n这个 `methodMissing` 方法本身也是通过外部注入来实现的。\n\n```groovy\n\u002F\u002F 在其它 Groovy 脚本外部注入 `invokeMethod`\nCar.metaClass.invokeMethod = {\n    String name,args-\u003E\n        def outline = {any -\u003E System.out.println(any)}\n        outline \"before running, the method ${name} needs check.\"\n\n        def job = Car.metaClass.getMetaMethod(name,args as Object[])\n        def result = null\n\n        \u002F\u002F 相当于是调用了 delegate.methodMiss(name,args)\n        if(job == null) Car.metaClass.invokeMissingMethod(delegate,name,args as Object[])\n        else {\n            result = job.invoke(delegate,args as Object[])\n        }\n        outline \"after running....${result.is(null)?\"\":\"and the result is ${result}\"}\"\n}\n\n\u002F\u002F 同理，如果在内部无法定义，就在外部通过 metaClass 注入 methodMissing 方法。\nCar.metaClass.methodMissing = {\n     String name,args-\u003E\n        System.err.println(\"this object has no method ${name}, and the args ${args} are unused.\")\n}\n```\n\n这里还有一处小细节，通过打印 `.metaClass.getClass().name` 能够观察到，对元类型进行方法注入会改变 `MetaClass` 自身的类型：在最开始，它属于 `org.codehaus.groovy.runtime.HandleMetaClass` 类。而一旦有注入的动作，它就会变更为 `groovy.lang.ExpandoMetaClass` 类型 ( 后文简称为 EMC )。这是一个历史遗留问题：EMC 目前并不是 Groovy MetaClass 的唯一实现，但我们目前的各种操作事实上都是通过它进行的。\n\n## 8.3 方法合成\n\n\u003E 方法合成和方法拦截的区别在于：后者拦截所有 ( 包括不存在的 ) 的调用，从而实现 AOP 切面编程。而前者只专注于拦截运行期间不存在的方法调用，并希望能够根据传入的方法名，参数等语义推测用户行为，并返回合理的处理结果，从而让用户感觉 \"什么调用都好像是动态生成的一样\"。\n\nGroovy 提供的 `methodMissing` 对方法合成非常有用。比如 Grail \u002F GORM 可以在调用时为领域对象合成出 `findByFirstName` 和 `findByFirstNameAndLast` 这样的查找方法。**合成的方法只有在调用时才会作为独立的方法存在**，因此无法通过通常的反射手段找到它们。与此同时，合成的方法也可以缓存下来方便以后复用，来减少对 `methodMissing` 方法的频繁调用。Grails 的创建者 Graeme Rocher 称之为 \"**拦截，缓存，调用**\" 模式。\n\n这是一个 Groovy 方法合成的一个简单例子。假定有一个 `Person` 类，而他有一些爱好，这些爱好存在一个 `plays` 字段中，并且有可能会后续的运行中继续添加。现在要求对于 `plays` 内的每一个元素都编写出一个 `playXXX` 方法。\n\n最基本的方式，就是在代码内进行硬编码。一旦客户后续在 `plays` 列表了添加，或者是修改了某个字段，我们就会被迫地回到源代码中重做修改并编译。显然，在 Groovy 中绝对不会这么做。\n\n```groovy\nclass Person{\n    def plays = [\"Football\",\"Basketball\",\"TableTennis\"]\n    String name\n    def playFootBall(){\n        \u002F\u002F 实际生产中，这可能是一个数据库查询。\n        println(\"$name is playing FootBall\")\n    }\n    def playBasketball(){println(\"$name is playing Basketball\")}\n    \u002F\u002F 相似的套路 ...\n}\n\ndef john = new Person(name: \"john\")\njohn.playBasketball()\njohn.playFootBall()\n```\n\n我们在此引入 `methodMissing` 方法，用方法合成的思路解决问题。该方法不像 `invokeMethod` 那样对所有的方法进行拦截，仅在目标方法不存在的场合才会被 Groovy 调用。\n\n下面的代码块是这样做的：根据用户提供的方法名解析出他可能期望获得的字段，然后程序查询这个字段是否在 `plays` 列表内，如果有，返回结果。否则，抛出 `MissingMethodException` ( 或者抛出其它合理的异常也可以 ) 。\n\n```groovy\nclass Person {\n    private def sout = { any -\u003E System.out.println(any)}\n    def plays = [\"Football\",\"Basketball\",\"TableTennis\"]\n    def name\n    def run(){sout \"running...\"}\n    def methodMissing(String name,args){\n        def key = name.split(\"play\")[1]\n        if(!plays.contains(key)) throw new MissingMethodException(name,this.class,args as Object[])\n        sout \"${this.name} is playing ${key}\"\n    }\n}\n\ndef john = new Person(name: \"john\")\n\n\u002F\u002F 存在的方法可以正常调用，不存在的方法会在 methodMissing 临时合成。\njohn.playBasketball()\njohn.playFootball()\njohn.run()\n```\n\n### 8.3.1 方法合成的记忆性\n\n与此同时，我们希望这种合成是具备 \"记忆性\" 的 —— 当第一次调用新合成的方法时，将它注入到 `MetaClass` 内部。\n\n```groovy\ndef methodMissing(String name,args){\n    println \"\u002F\u002F--------first call for method $name-------\u002F\u002F\"\n    def key = name.split(\"play\")[1]\n    if(!plays.contains(key)) throw new MissingMethodException(name,this.class,args as Object[])\n    \n    \u002F\u002F 创建一个闭包\n    def impl = {\n        -\u003E println \"playing ${name.split(\"play\")[1]}\"\n    }\n    \n    \u002F\u002F 将闭包注入到当前对象的 MetaClass.\n    Person self = this\n    self.metaClass.\"$name\" = impl\n    impl()\n}\n```\n\n这种缓存手段在简单的例子中甚至比不缓存还要更慢一些。但这种缓存手段很重要，只是在这个案例中，我们的 `methodMissing` 逻辑相比之下实在是太简单了。在大型项目中， `methodMissing` 需要处理各种方法合成请求，逻辑也会变得复杂，耗时明显会变长。此时，缓存手段的优势才会体现出来。\n\n一旦目标是一个 POJO，或者我们没有对它的修改权限，这种手段就行不通了。此时如果要实现方法合成，我们需要将 `methodMissing` 方法注入到元类型 `MetaClass` 内部，之前已经演示过了。\n\n```groovy\njohn.metaClass.methodMissing = {\n    String name, args -\u003E\n        println \"first call of method $name...\"\n        def key = name.split(\"play\")[1]\n        Person self = delegate\n        if (!self.plays.contains(key)) throw new MissingMethodException(name, Person.class, args as Object[])\n        def impl = { -\u003E println \"${self.name} is playing $key\" }\n        self.metaClass.\"$name\" = impl\n        impl()\n}\n```\n\n# 9. 方法注入\n\n\"要是 `java.lang.String` 原生支持一个 `encrypt` 方法那就太好了。\" 面向对象编程本身就是为了拓展，但是能够拓展到什么程度，又往往受到编程语言的限制。如果我们能够基于实际需求为类拓展方法，那么写出一段富有表现力的代码就会十分轻松。\n\n由于 MOP 协议的存在，Groovy 实现这些非常容易 ( 即便不通过 MOP 协议，我们也可以通过 SPI 接口进行方法拓展 )。在之前的章节中，我们了解了如何基于 `.metaClass` 提取元属性，元方法。本章开始，我们要逐渐了解如何利用 Groovy 为我们暴露的元信息并向内部注入一些基于现实需要的行为。\n\n## 9.1 使用分类注入方法\n\nGroovy 提供了可控的，或者说仅在局部范围内生效的方法注入，分类 ( category ) 就是一种。形式上，它的用法比较接近 Scala 的隐式类 —— 在一个上下文环境中隐式地通过代理对象实现方法增强。在 Groovy 中，分类的代码增强效果仅仅在一段 `use` 作用域和执行线程有效。当线程退出这段代码块之后，一切都会恢复原样。\n\n下面我们使用分类方法注入的形式重新实现在 \"拓展 JDK\" 章节中曾介绍的那个例子：为 `String` 拓展 `writeTo` 方法，以便我们直接将代码内的字符串输出到外部的文本文件。\n\n类似地，我们需要令行准备一个拓展类，暂且为它起名 `StringExtension`，然后将 `writeTo` 方法补充到这里。有两点需要注意：首先，这个增强方法仍然需要使用 `static` 关键字修饰；其次，该方法的第一个形参用于表明拓展的类型，它代表了调用此方法的那个对象，但是不会在调用时体现出来。\n\n```groovy\nclass StringExtension {\n    \u002F\u002F 调用时，相当于 \"xxxxx\".writeTo(filename,charset)。\n    \u002F\u002F self 代表了调用的那个字符串。\n    def static writeTo(String self,String filename,String charset){\n        new File(filename).withWriterAppend(charset){\n            it.writeLine(self)\n        }\n    }\n}\n\u002F\u002F 创建了上下文\nuse(StringExtension){\n    \u002F\u002F 注意，仅在 use 语句块内有效\n    \"this is mop method...\".writeTo(\"C:\\\\Users\\\\i\\\\Desktop\\\\武林秘籍.txt\",\"UTF-8\")\n}\n```\n\n之后，在任意一处代码块内创建一个 `use` 块：第一个形参传入刚才设定好的增强类型 ( 不是传实例 )，然后我们就可以在后面的闭包块内享受到 `StringExtension` 为 `String` 拓展的增强方法 ( 这个闭包后附的语法参见笔者 Groovy 的第一篇入门教程 )。\n\n对于分类的声明，还存在一种更简洁直观的 `@Category` 注解的写法：在注解标记被代理 ( 被增强 ) 的类型，然后内部无需再使用 `static` 声明增强方法，也不需要在形参列表中额外预留一个参数。同时，该增强类内部的 `this` 将不再指代自身，而是指代那个目标实例。\n\n```groovy\n@Category(String)\nclass StringExtension {\n    def writeTo(String filename,String charset){\n        new File(filename).withWriterAppend(charset){           \n            \u002F\u002F this 指代被修饰的 String，而不是 StringExtension\n            it.writeLine(this)\n        }\n    }\n}\n\n\u002F\u002F 创建了上下文\nuse(StringExtension){\n    \u002F\u002F 注意，仅在 use 语句块内有效\n    \"this is mop method...\".writeTo(\"C:\\\\Users\\\\i\\\\Desktop\\\\武林秘籍.txt\",\"UTF-8\")\n}\n```\n\n### 9.1.1 分类接受多个增强类\n\n`use` 是一个重载的方法：它的第一个参数不仅可以接受单个增强类，还能受由多个增强类组成的数组 `List\u003CClass\u003E` 。从写法上，Groovy 支持以逗号的形式将这些类名传进 `()` 小括号内。\n\n如果传入了多个增强类，那么就可能存在一个问题：方法重复。**在多个增强类依次排列的情况下，Groovy 优先选择最后一个传进来的增强类**。比如：\n\n```groovy\n@Category(String)\nclass StringExtension_01 {\n    def shout() {\n        println(\"from StringExtension_01\")\n    }\n}\n\n@Category(String)\nclass StringExtension_02 {\n    def shout() {\n        println(\"from StringExtension_02\")\n    }\n}\n\nuse(StringExtension_01, StringExtension_02) {\n    \u002F\u002F from StringExtension_02\n    \"string\".shout()\n}\n```\n\nGroovy 在很多地方都遵守这样的原则，后文为了方便解释，笔者在这里暂且将这种原则称之为 \"**最远原则**\" ( 最后传来的优先级最高 ) 。\n\n### 9.1.2 分类可以嵌套\n\n同样的，`use` 语句块内部也允许定义新的 `use` 块。如果此时发生了方法冲突，Groovy 的处理方式是：优先选择最内部层次的增强类方法。比如：\n\n```groovy\nuse(StringExtension_02){\n    \u002F\u002F 对于不同层次的增强类而言，当发生方法重复时，Groovy 优先选择最内部的方法。\n    use(StringExtension_01){\n        \u002F\u002F from StringExtension_01\n        \"string\".shout()\n    }\n}\n```\n\n结合上一条考虑：一个增强类所处的 `use` 嵌套层次越深，且在同层次中定义的顺序越靠后，那么当发生方法冲突时，Groovy 选择它的优先级就越高。\n\n## 9.2 使用 ExpandoMetaClass 注入方法\n\n想要创建领域特定语言 ( DSL )，我们需要向不同的类，甚至类的层次结构当中注入任意的方法，**包括注入实例方法，静态方法，甚至是操作构造器**。前文已经暗示了 —— 通过调取一个类的 `metaClass` ，我们能注入的可不止 `invokeMethod` 和 `methodMissing` 方法，理论上，只要想象力到位，我们想注入什么方法都可以。\n\n下面是一个演示通过 EMC 实现方法注入的 case：向 `Integer` 类的 `MetaClass` 注入一个方法，该方法能够打印出 \"基于这个天数之后的日期\"。\n\n```groovy\n\u002F\u002F 标准的拓展格式：\n\u002F\u002F 类.metaClass.方法名 = 一个闭包 {...}\n\u002F\u002F 方法名自拟，需要的参数写在闭包内部。\nInteger.metaClass.daysFromNow = {\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F delegate 指向那个被注入的 Integer\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\n\n\u002F\u002F 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021\nprintln 5.daysFromNow()\n\n```\n\n此外，`daysFromNow()` 是一个**内部无副作用，且外部不接受参数，纯粹用于返回一个值的纯函数**。在 Scala 中，满足这种特性的方法都会被 \"统一访问原则\" 伪装成一个属性，Groovy 也能实现。因此，在这里不妨将 `daysFromNow` 方法改名为 `getDaysFromNow` 来去掉访问时那个多余的小括号。\n\n```groovy\n\u002F\u002F getDaysFromNow 方法被 Groovy 包装成了 DaysFromNow 属性。\n\u002F\u002F 当然，用户方可以选择任意一种方式来获取结果。\nInteger.metaClass.getDaysFromNow = {\n    \u002F\u002F 这个方法不需要外部传递参数。\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F delegate 指向那个被注入的 Integer 实例\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\n\u002F\u002F 这种套路在 DSL 语言中经常用到。\nprintln 5.daysFromNow\n```\n\n这也是 Groovy 不谈 \"注入属性\" 的原因：这只需要注入对应的 `getXXX` 方法就可以解决了，调用这段代码的用户不会发现 ( 也不会感兴趣 ) 这个属性是由方法 \"伪装\" 成的。\n\n相比于分类 ( category ) 的拓展方式，这种方法注入会全局范围内生效，任意一个 `Integer` 实例都可以调用这个 `DaysFromNow` \"属性\"。但是，我们认为在经过适当的数值转换，精度舍入的处理之后，像 `Long`，或者 `Double` 这类数值应当也能支持 `getDaysFromNow` 方法。那么想要给多个类同时注入一个方法该怎么做呢？\n\n第一种做法是先声明一个闭包，然后再将它注入到多个 `MetaClass` 内：\n\n```groovy\ndef getDaysFromNow = {\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\ndef injectName = \"getDaysFromNow\"\nInteger.metaClass.\"$injectName\" = getDaysFromNow\nLong.metaClass.\"$injectName\" = getDaysFromNow\nDouble.metaClass.\"$injectName\" = getDaysFromNow\n\n\u002F\u002F 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021\nprintln 5.daysFromNow\nprintln 10.00d.daysFromNow\n```\n\n这种做法有点啰嗦。而 `Integer`，`Long` 和 `Double` 都有一个共同父类，那就是 `Number` 类。那么只需要向这个父类注入实例方法，那么所有的子类就都会 \"通过继承关系\" 自动获得。\n\n```groovy\nNumber.metaClass.getDaysFromNow = {\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\n\u002F\u002F 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021\nprintln 5.daysFromNow\nprintln 10.00d.daysFromNow\n```\n\n### 9.2.1 注入静态方法\n\n在了解注入实例方法之后，注入静态方法几乎没有什么难度，区别是多了一步 `'static'` ( 需要加引号 ) 的选择操作。\n\n```groovy\nNumber.metaClass.'static'.getDaysFromNow = {\n    Number number -\u003E\n    def now = Calendar.instance\n    now.add(Calendar.DAY_OF_MONTH,number as int)\n    now.time\n}\n\nprintln Integer.daysFromNow(10)\nprintln Number.daysFromNow(10)\n```\n\n### 9.2.2 注入构造器\n\n对构造器的注入分为两种：第一种是新增构造器，第二种是对已有的构造器进行覆盖。\n\n对于第一种情况，需要进入到 `Clazz.metaClass.constructor` 域内部，然后借助 `\u003C\u003C` 运算符进行注入。如果此运算符被用于覆盖类原有的构造器，那么 Groovy 会报错。\n\n```groovy\nInteger.metaClass.constructor \u003C\u003C {\n    Calendar c -\u003E new Integer(c.get(Calendar.DAY_OF_YEAR))\n}\n\u002F\u002F 根据日期返回 \"今天是今年的第几天\"，为 Integer 类型。\ndef day = new Integer(Calendar.instance)\nprintln day\n```\n\n对于第二种情况，我们使用 `=` 而非 `\u003C\u003C` 操作符，这里不再做演示。需要注意的是，Groovy 并非是真的覆盖了原来的构造器，通过 Java 的反射也可以重新调用它。\n\n### 9.2.3 使用 EMC DSL 批量注入方法\n\n如果仅打算为一个类补充一两个方法，那么 `Clazz.metaClass.anyMethod = {...}` 的写法尚且可以接受。但如果一个类挂载了一系列实例方法，静态方法乃至构造器方法，此时将这些方法集中到大代码块内统一管理是更明智的做法。\n\nGroovy 提供了 EMC DSL 来使我们能够像写 `yml` 文件一样，让类的注入方法呈现出清晰的树状层次：\n\n```groovy\nInteger.metaClass {\n    \u002F\u002F 注入实例方法\n    \u002F\u002F 可以通过 .daysFromNow 获取\n    getDaysFromNow = {\n        -\u003E\n        Calendar calendar = Calendar.instance\n        calendar.add(Calendar.DAY_OF_MONTH,delegate as int)\n        calendar.time\n    }\n\n    'static' {\n        getDaysFromNow = {\n            Integer integer -\u003E\n            Calendar calendar = Calendar.instance\n            calendar.add(Calendar.DAY_OF_MONTH,integer as int)\n            calendar.time\n        }\n    }\n\n    constructor \u003C\u003C {\n        Calendar c -\u003E new Integer(c.get(Calendar.DAY_OF_YEAR))\n    }\n}\n\n\u002F\u002F 调用注入的静态方法\nprintln Integer.getDaysFromNow(10)\n\n\u002F\u002F 调用注入的实例方法\nprintln 10.daysFromNow\n\nprintln(new Integer(Calendar.instance))\n```\n\n### 9.2.4 向实例注入方法\n\n如果不想将方法注入到整个类内部，那也可以仅提取某一个对象的 `MetaClass` 进行方法注入。下面的案例创建了两个对象 `p1` 和 `p2` ，其中，我们只为 `p1` 的元类型注入了 `sing` 方法，因此只有 `p1` 会 \"唱歌\"。\n\n```groovy\nclass Person{\n    String name\n    def talk(String s){println \"${name}:[$s]\"}\n}\n\n\ndef p1 = new Person(name:\"Wang Fang\")\ndef p2 = new Person(name:\"Lao Wang\")\n\np1.metaClass {\n    sing = {\n        \u002F\u002F 如果\n        String s -\u003E \"${delegate[\"name\"]}:${s}~~~ oh~~\"\n    }\n}\n\nprintln p1.sing(\"oh baby baby\")\n\n\u002F\u002F p2 的 EMC 没有绑定，因此这里会抛出 MissingMethodException 异常\nprintln p2.sing(\"are you ok?\")\n```\n\n## 9.3 利用 MOP 实现动态委托\n\n如果委托是静态的，那它就可以在编译期间确定，因此也就无需在运行时更改，关于动态委托的实现可以参考之前文章提到过的 `@Delegate` 注解 ( 这是编译时元编程技术 )。\n\n现在有三个角色：老板 `Boss` ( 被委托人 )，普通职员 `Worker` 和分析师 `analyst` ( 委托人 )。后两者有各自的分工，但是所有的方法调用通过 `Boss` 进行。考虑到委托人的角色以及数量都可能动态变化，因此这里不使用静态的 `@Delegate` 注解。\n\n```groovy\nclass Boss{}\nclass Employee{\n    def work(){\n        println \"working now\"\n    }\n}\n\nclass Analyst{\n    def analize(){\n        println \"solving this problem...\"\n    }\n}\n```\n\n首先，我们将代表动态委托功能的 `delegateTo` 方法注入给 Object ( 或者只注入给 `Boss` 类也可以 )，从形式上，只要将任意多个类型传入到方法当中，就可以建立该对象和这些类的委托关系。\n\n具体的实现方式清晰明了：根据接受的 `Class[]` 创建出委托类的实例数组 `ins`，然后利用方法合成的套路，向被委托实例的 `delegate` 注入重写的 `methodMissing` 方法进行方法合成 ( 在这里应该是方法委托 )。\n\n一旦调用了该对象不存在的方法，Groovy 就会试图从 `methodMissing` 那里返回一个结果。在 `methodMissing` 内部，我们通过轮询 `ins` 数组的方式寻找出第一个对该方法名做出响应的委托实例 ( 这里可通过 `find` 和 `responseTo` 方法实现 )，然后再通过 `invokeMethod()` 间接调用被委托的方法。\n\n如果愿意的话，也可以向之前的套路那样，每调用一个新的委托方法，就将它注入到原先的被委托类的 `MetaClass` 中。下一次调用相同的方法时，Groovy 就没有必要重新去 `ins` 数组那里做轮询了。\n\n```groovy\nObject.metaClass.delegateTo = {\n    Class... clazzs -\u003E\n        def ins = clazzs.collect { it.getDeclaredConstructor().newInstance() }\n        delegate.metaClass.methodMissing = {\n            String name, args -\u003E\n                \u002F\u002F 找到能响应该方法的实例，找到第一个就返回。\n                def proxy = ins.find {\n                    it.respondsTo(name,args)\n                }\n\n                \u002F\u002F 可选项，如果乐意的话，也可以向实例的 MetaClass 内部缓存。\n                delegate.metaClass.\"${name}\" = { Object[] vargs -\u003E\n                    proxy.invokeMethod(name,vargs)\n                }\n\n                \u002F\u002F 调用该实例的方法。\n                proxy.invokeMethod(name,args)\n        }\n}\n```\n\n现在，我们能够在 Groovy 代码内以简洁地形式声明一个动态调用。\n\n```groovy\ndef boss = new Boss()\nboss.delegateTo(Employee,Analyst)\n\nboss.work()\nboss.analize()\n```\n\n由于查找代理实例的过程中依赖 `find` 方法进行，因此这无形间规定了优先级顺序：如果多个类都能完成某个委托，那么先传入的类，其方法调用的优先级最高。这是一个综合的练习，因为它除了还利用了以下知识点：\n\n1. 通过调用一个对象的 `responseTo` 来检查它是否能对某一个方法做出响应。\n2. 通过调用一个对象的 `invokeMethod` 方法来动态调用方法。\n3. 通过注入 `methodMissing` 来实现方法合成 ( 在这个案例中，方法合成达成了方法委托的效果 )。\n\n## 9.4 总结 Groovy 调用方法的策略\n\n在调用一个方法时，Groovy 会根据这个对象是 POJO 还是 POGO ，是否使用了 `MetaClass` 注入等因素而采取不同的策略。整个 MOP 专题基本围绕两个主要的方法进行：`invokeMethod` 和 `methodMissing`。\n\n### 9.4.1 If POJO\n\n对于 POJO 而言，优先级顺序：\n\n1. 通过 `MetaClass` 注入的 `invokeMethod` 方法 ( 拦截所有调用 )。\n2. 通过 `MetaClass` 注入的普通方法。\n3. 原有方法。\n4. 通过 `MetaClass` 注入的 `methodMissing` 方法。\n5. \u003Cfont color=\"AAAA\"\u003E**抛出**\u003C\u002Ffont\u003E `MissingMethodException` 。\n\n注意 2，3 两项， 通过 `MetaClass` 注入的同名方法相比原本方法而言优先级更高。\n\n### 9.4.2 If POGO\n\n对于没有实现 `GroovyInterceptor` 标记接口的 POGO 而言，方法调用优先级顺序：\n\n1. **通过 `MetaClass` 注入的 `invokeMethod` 方法。** ( 拦截所有调用 )\n2. **通过 `MetaClass` 注入的普通方法。**\n3. 原有方法 \u002F 同名的闭包属性。\n4. **通过 `MetaClass` 注入的 `methodMissing` 方法。**\n5. **内部定义的 `methodMissing` 方法。**\n6. 内部定义的 `invokeMethod` 方法。\n7. \u003Cfont color=\"AAAA\"\u003E**抛出**\u003C\u002Ffont\u003E `MissingMethodException` 。\n\n事实上，我们不可能在一个类内部同时用上所有项。为了让思路更清晰一些，笔者从需求角度进行了划分：\n\na. 当需要在外部进行方法拦截时，只需要额外定义第 1 项 ( 不要和内部定义的第 6 项搞混 )。\n\nb. 当需要动态拓展方法时，只需要额外定义第 2 项。\n\nc. 当需要在外部实现方法合成时，只需要额外定义第 4 项。\n\nd. 当需要在内部实现方法合成时，只需要额外定义第 5 项。\n\n如果 POGO 在内部实现了 `GroovyInterceptor` 接口，所有调用将只会引导至内部定义的 `invokeMethod` 方法。\n\n## 9.5 使用 Mixin 混合注入方法 \n\n首先来举一个例子：动物 `Animal` 衍化成了两个类别：卵生动物的代表飞鸟 `Bird` 与哺乳动物的代表走兽 `Beast` 。\n\n```groovy\nabstract class Animal{\n    \u002F\u002F 动物都会叫 ...\n    abstract def roar()\n}\n\nclass Beast extends Animal{\n    def roar(){println \"beast yawn...\"}\n    \u002F\u002F 走兽会捕食 ...\n    def predate(){println \"predate ...\"}\n}\n\nclass Bird extends Animal{\n    def roar(){println \"bird twitter...\"}\n    \u002F\u002F 飞鸟会飞...\n    def fly(){ println \"hovering in the sky\"\n}\n```\n\n现在有一个特例蝙蝠 `Bat`：它自身虽然属于哺乳动物，但是却又具备飞鸟独有的 `fly` 方法，它无论单继承哪一边都好像缺点什么。但是，如果两者都继承也会出现问题：它是选择像飞鸟一样鸣叫呢？还是选择像走兽一样吼叫呢？\n\n这是多重继承所带来的菱形继承问题。好在 Java 单继承的，假使在开发中遇到了类似的问题，最直接的思路就是仅保留公共方法到父类，将其它的方法放到接口去，这样就可以通过  \"单继承 + 组合模式\" 来规避菱形继承问题。\n\n然而，Groovy 提供了 \"通过混合类型 ( `Mixin` ) 来实现多重继承\" 的方案。混合的方式有两种 —— 编译期混合和运行期混合。\n\n### 9.5.1 编译期混入 Mixin\n\n如果要编译期混合类型，那么就要用到 `@Mixin` 注解。这个注解使用起来非常简单：将想要混入的类 ( 的数组 ) 传递到注解的 `value` 值就可以了。\n\n```groovy\n@Mixin([Beast,Bird])\nclass Bat extends Animal{\n    @Override\n    def roar() {\n        println \"I'm BATMAN, I'm rich.\"\n    }\n}\n\ndef b = new Bat()\n\n\u002F\u002F 自身的 roar 方法被压制了，调用的是 Bird 的方法。\nb.roar()\n\n\u002F\u002F 混入 Bird 类获得的 fly 方法。\nb.fly()\n\n\u002F\u002F 混入 Beast 类获得的 predate 方法。\nb.predate()\n```\n\n这里还有一处细节要交代：当我们调用 `roar` 方法时，`Bat` 对象并没有给出预期中的结果。其原因可以类比笔者在前文提到的 **\"最远原则\"**：在混入多个类的情况下，当发生方法冲突时，Groovy 优先选择数组内最后一个满足的类。\n\n笔者的 Groovy 版本为 3.0.8。在当前版本当中，编译期混入其实已经不推荐再使用 `@Mixin` 注解了，Groovy 建议使用更简单的关键字 `trait` 来代替。\n\n### 9.5.2 运行期混入 \n\n如果选择在运行期间混入，那么可以先提取出一个类 ( 对象 ) 的元类型 `MetaClass` ，然后通过 `mixin` 方法按照 \"最远原则\" 依次插入混入的类型。同样地，运行时混入避免了对类的源代码进行修改。\n\n```groovy\n\u002F\u002F 没有对类定义进行修改 \nabstract class Animal{\n    abstract def roar()\n}\n\nclass Beast extends Animal{\n    def roar(){println \"beast yawn...\"}\n    def predate(){println \"prey ...\"}\n}\n\nclass Bird extends Animal{\n    def roar(){println \"bird twitter...\"}\n    def fly(){ println \"hovering in the sky\"}\n}\n\nclass Bat extends Animal{\n    @Override\n    def roar() {\n        println \"I'm BATMAN, I'm rich.\"\n    }\n}\n\u002F\u002F----------------------------\n\ndef bat = new Bat()\nbat.metaClass.mixin(Bird,Beast)\n\u002F\u002F 根据 \"最远原则\",优先调用 Beast 的方法。\nbat.roar()\nbat.fly()\nbat.predate()\n```\n\n## 9.6 编译期 Mixin 的替代方案：Trait\n\nGroovy 或许也觉得 Mixin 和 Scala 混入特质的思路大体相同，因此在 2.3.x 版本之后，Groovy 也开始采用 `trait` 关键字，用以代替具备侵入性的 `@Mixin` 注解。\n\n**特质 Trait 使得 Groovy 类像实现多接口一样去继承多个 ( 抽象 ) 类**。当出现菱形继承问题时，Groovy 会按照 \"**最远原则**\" 去处理。但和之前 `@Mixin` 注解不一样之处在：**如果这个类本身有重写实现，那么就相当于消除了二义性， Groovy 就不会再考虑任何父特质的方法了**。\n\n特质本身可以同时定义抽象方法和实例方法 ( 按 Scala 的说法就是 \"富特质\" )，或者只有其一。由于它的存在，Groovy 的 `interface` 接口没有再引入 JDK 8 的  \"默认方法\" ( `default` 保留字在 Groovy 中无法用于接口 )。特质可以继承特质，但是特质无法继承类，或是实现接口。类可以实现 `implements` 特质，但是不能继承 `extends` 特质。\n\n```groovy\ntrait Animal{\n    abstract def roar()\n}\n\ntrait Beast extends Animal{\n    def roar(){println \"beast yawn...\"}\n    def predate(){println \"prey ...\"}\n}\ntrait Bird extends Animal{\n    def roar(){println \"bird twitter...\"}\n    def fly(){ println \"hovering in the sky\"}\n}\n\n\u002F\u002F 由于 Bat 自身拥有此方法，因此 Groovy 不会再考虑 \"最远原则\"。\nclass Bat implements Beast,Bird{\n    @Override\n    def roar() {\n        println \"I'm BATMAN, I'm rich.\"\n    }\n}\n\ndef bat = new Bat()\n\u002F\u002F BAT MAN\nbat.roar()\nbat.fly()\nbat.predate()\n```\n\n",display_count:d,is_markdown:g},author_user_info:{user_id:"465848663023160",user_name:"花花子",company:"新东方烹饪学校",job_title:"学生",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F2c3d36ac68756ea7f747669b94554d42~300x300.image",level:4,description:"浪漫主义coder",followee_count:56,follower_count:142,post_article_count:98,digg_article_count:267,got_digg_count:365,got_view_count:97821,post_shortmsg_count:3,digg_shortmsg_count:16,isfollowed:a,favorable_author:d,power:3811,study_point:1530,university:{university_id:"6888594369101152269",name:"黑龙江大学",logo:e},major:{major_id:f,parent_id:f,name:e},student_status:3,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:465848663023160,jpower:3811,jscore:394.2,jpower_level:4,jscore_level:4,jscore_title:"进阶掘友",author_achievement_list:[],vip_level:4,vip_title:"融会贯通",jscore_next_level_score:500,jscore_this_level_mini_score:d},is_vip:b,become_author_days:d,collection_set_article_count:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:n,promote_tag_cap:4,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:void 0,subscribed:a,id:"6809640862281105415",tag_id:"6809640862281105415",tag_name:"Groovy",color:"#000000",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F59e008bf567fda17a009.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1489100571,mtime:1668179383,id_type:9,tag_alias:e,post_article_count:180,concern_user_count:2512,title:"Groovy",tagId:"6809640862281105415",articleCount:180,subscribersCount:2512,createdAt:c,updatedAt:c}],user_interact:{id:6962777564335047000,omitempty:n,user_id:d,is_digg:a,is_follow:a,is_collect:a},org:{org_info:c,org_user:c,is_followed:a},req_id:"20221121223946010204059234223A0F9A",status:{push_status:d},author_interact:c,extra:{boost_type:e},title:"一文通读 Groovy 元对象协议 MOP",user:{id:"465848663023160",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:4,user_id:"465848663023160",user_name:"花花子",company:"新东方烹饪学校",job_title:"学生",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F2c3d36ac68756ea7f747669b94554d42~300x300.image",description:"浪漫主义coder",followee_count:56,follower_count:142,post_article_count:98,digg_article_count:267,got_digg_count:365,got_view_count:97821,post_shortmsg_count:3,digg_shortmsg_count:16,isfollowed:a,favorable_author:d,power:3811,study_point:1530,university:{university_id:"6888594369101152269",name:"黑龙江大学",logo:e},major:{major_id:f,parent_id:f,name:e},student_status:3,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:465848663023160,jpower:3811,jscore:394.2,jpower_level:4,jscore_level:4,jscore_title:"进阶掘友",author_achievement_list:[],vip_level:4,vip_title:"融会贯通",jscore_next_level_score:500,jscore_this_level_mini_score:d},is_vip:b,become_author_days:d,collection_set_article_count:d,juejinPower:3811,jobTitle:"学生",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"花花子",blogAddress:void 0,selfDescription:"浪漫主义coder",beLikedCount:365,beReadCount:97821,followerCount:142,followingCount:56,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:98,pinCount:3,likedArticleCount:267,likedPinCount:16,avatar:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F2c3d36ac68756ea7f747669b94554d42~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:56,applyEventCount:d,need_lead:d,followTopicCnt:void 0},viewCount:void 0,commentsCount:3,isEvent:void 0,abstract:"元数据是描述数据的数据；元编程，就是用程序编写程序。本文介绍 Groovy 如何通过 MOP 实现运行时元编程。",latestCommentAt:c,createdAt:new Date(1621148553000),updatedAt:c,isTopicEvent:a,likedCount:n,likeCount:n,content:e,originalUrl:e,type:"post",collected:a,viewsCount:911,username:"花花子",viewerHasLiked:a,draftId:"6962777777569595406",collectionCount:g},entryView:{},author:{id:"465848663023160",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:4,user_id:"465848663023160",user_name:"花花子",company:"新东方烹饪学校",job_title:"学生",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F2c3d36ac68756ea7f747669b94554d42~300x300.image",description:"浪漫主义coder",followee_count:56,follower_count:142,post_article_count:98,digg_article_count:267,got_digg_count:365,got_view_count:97821,post_shortmsg_count:3,digg_shortmsg_count:16,isfollowed:a,favorable_author:d,power:3811,study_point:1530,university:{university_id:"6888594369101152269",name:"黑龙江大学",logo:e},major:{major_id:f,parent_id:f,name:e},student_status:3,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:465848663023160,jpower:3811,jscore:394.2,jpower_level:4,jscore_level:4,jscore_title:"进阶掘友",author_achievement_list:[],vip_level:4,vip_title:"融会贯通",jscore_next_level_score:500,jscore_this_level_mini_score:d},is_vip:b,become_author_days:d,collection_set_article_count:d,juejinPower:3811,jobTitle:"学生",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"花花子",blogAddress:void 0,selfDescription:"浪漫主义coder",beLikedCount:365,beReadCount:97821,followerCount:142,followingCount:56,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:98,pinCount:3,likedArticleCount:267,likedPinCount:16,avatar:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F2c3d36ac68756ea7f747669b94554d42~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:56,applyEventCount:d,need_lead:d,followTopicCnt:void 0},adEntryList:[],relatedEntryList:[],linkVotingList:[],userAnnuals:[],columnList:[],cachedHtml:"\u003Cstyle\u003E@charset \"UTF-8\";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:\"#\";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:\"\";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image\u002Fpng;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq\u002Fo4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC\u002FIhh2Z0nVV27VnZnenumW9i6ddV7\u002F\u002FfrV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd\u002FigC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG\u002FwjMeqAkijwW4xQJ5Gf\u002FZzRC8OW3hiBTGGlURRswW55Bh\u002FSsxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe\u002FC2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn\u002FZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe\u002FsHJ6MxN5lnoSpnC\u002FUGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q\u002FQM69V26jjW86Gvov\u002FEaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5\u002FS19gsAzGKqm6LE5FrShbdS0ku465DjDwKA\u002FoQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD\u002FAp80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre\u003Ecode{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:\"\";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image\u002Fsvg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:\"“\";top:4px;left:6px}.markdown-body blockquote:after{content:\"”\";right:8px;bottom:-8px}.markdown-body blockquote\u003Ep,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}\u003C\u002Fstyle\u003E\u003Ch1 data-id=\"heading-0\"\u003E7. Groovy 元对象协议\u003C\u002Fh1\u003E\n\u003Cp\u003E编程中我们总是会听到 \"元\" ( Meta- ) 信息，或者 \"元\" 数据的一些说法，它们的通俗解释就是：描述信息的信息，或者是描述数据的数据。拿一张相片举例子，除了相片自身携带的图像信息以外，有关于它的印刷时间，拍摄时间，标签等都可以属于 \"元信息\"。在本篇文章中，信息本身就是 POJO \u002F POGO 对象，而它的描述信息则是元方法 \u003Ccode\u003EMetaMethod\u003C\u002Fcode\u003E 和元属性 \u003Ccode\u003EMetaProperty\u003C\u002Fcode\u003E，后文统称两者为元信息。\u003C\u002Fp\u003E\n\u003Cp\u003E由此引申，元编程 ( Metaprogramming )，就是 \"用于编写程序的程序\"，简单来说，通过操纵，创建各种元信息来达到动态编程，或者是自动化编程的手段。一个例子就是：Grails\u002FGORM 利用元编程的能力为数据查询动态合成类和方法。元编程依赖一种约定 —— 那就是元对象协议 Meta Object Protocol，简称 MOP。Groovy 的 MOP 本身很简单 —— 仅仅用一个 \u003Ccode\u003Egroovy.lang.MetaObjectProtocol \u003C\u002Fcode\u003E 接口规范了如何获取元信息，设置元信息。因此我们的关注点也不在 MOP 本身，而是围绕 MOP 的各种应用：\u003Cstrong\u003E方法拦截，方法合成，方法注入\u003C\u002Fstrong\u003E。\u003C\u002Fp\u003E\n\u003Cp\u003E在 Java 当中，有关一个类的所有信息都已经在编译期间尘埃落定。我们常说 \"Java 的动态反射\" 也仅限于 \"动态获取已有的静态信息\"，而不能在运行时修改它的类型，或者赋予它全新的行为。但如果一个类是在运行期间基于各种元信息构建 ( 拼凑 ) 出来的呢？Groovy 的确提供了这么一个类 —— Expando。\u003C\u002Fp\u003E\n\u003Cp\u003E本章首先介绍 MOP 最基本的内容，对于 POJO 或者 POGO，应该如何获取它们的元信息，然后再介绍基于这些元信息的实用操作。对于方法拦截，方法注入，方法合成等内容本章围绕两个重要的方法进行：\u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 和 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-1\"\u003E7.1 POGO &#x26; POJO，MetaClass\u003C\u002Fh2\u003E\n\u003Cp\u003EPOJO ( Plain Old Java Object )，简单 Java 对象，代表没有额外类继承 ( 只继承于 \u003Ccode\u003Ejava.lang.Object\u003C\u002Fcode\u003E )，没有额外接口实现，也没有被其它框架侵入的 Java 对象。从广义上来讲，它指不受任何特定 Java 对象模型，约定，框架约束的 Java 对象；而正因为它不和任何详细的业务功能绑定，从狭义上来看，POJO 又可以代表那些只用于承载数据，仅设置了 \u003Ccode\u003Esetter\u003C\u002Fcode\u003E 和 \u003Ccode\u003Egetter\u003C\u002Fcode\u003E 方法的 Java 对象，因此 POJO 有时又会和 Entity，DTO 等概念混淆，本文的 POJO 指广义的概念。\u003C\u002Fp\u003E\n\u003Cp\u003E同理，在 Groovy 中，POGO 代表了普通的 Groovy 对象，它既是 \u003Ccode\u003Ejava.lang.Object\u003C\u002Fcode\u003E 的子类，又天然地实现了 \u003Ccode\u003Egroovy.lang.GroovyObject\u003C\u002Fcode\u003E 接口；而 POJO 在这里可以是任何其它 JVM 语言实现的。下面是 \u003Ccode\u003Egroovy.lang.GroovyObject\u003C\u002Fcode\u003E 接口的内容：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-java copyable\" lang=\"java\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F 来自 IDEA 的反编译内容。\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EGroovyObject\u003C\u002Fspan\u003E {\n    \u003Cspan class=\"hljs-meta\"\u003E@Internal\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Edefault\u003C\u002Fspan\u003E Object \u003Cspan class=\"hljs-title function_\"\u003EinvokeMethod\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(String name, Object args)\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.getMetaClass().invokeMethod(\u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E, name, args);\n    }\n\n    \u003Cspan class=\"hljs-meta\"\u003E@Internal\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Edefault\u003C\u002Fspan\u003E Object \u003Cspan class=\"hljs-title function_\"\u003EgetProperty\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(String propertyName)\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.getMetaClass().getProperty(\u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E, propertyName);\n    }\n\n    \u003Cspan class=\"hljs-meta\"\u003E@Internal\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Edefault\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EsetProperty\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(String propertyName, Object newValue)\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.getMetaClass().setProperty(\u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E, propertyName, newValue);\n    }\n    \n    MetaClass \u003Cspan class=\"hljs-title function_\"\u003EgetMetaClass\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E()\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-keyword\"\u003Evoid\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EsetMetaClass\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(MetaClass var1)\u003C\u002Fspan\u003E;\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E从方法名称来看，它们都和 元类型 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 紧密相关，事实也是如此。幸运的是，不论一个对象属于 POGO 还是 POJO，我们总通过 \u003Ccode\u003E.metaClass\u003C\u002Fcode\u003E 简单地提取出它们的元类型：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 该对象是一个 Java 实现\ndef pojo = new POJO(10)\n\n\u002F\u002F 该对象是一个 Groovy 实现\ndef pogo = new POGO()\n\n\u002F\u002F 任何在 Groovy Script 中使用的类都可以使用 .metaClass ，这而与它的源 JVM 语言无关。\n\u002F\u002F 结合了之前 \"统一访问原则\" 的设计思想。\npogo.metaClass\npojo.metaClass\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E实际上，两者的 \u003Ccode\u003EmetaClass\u003C\u002Fcode\u003E 的获取途径并不相同：对于 POJO，Groovy 维护用于获取 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 的一个 \u003Ccode\u003EMetaClassRegistry\u003C\u002Fcode\u003E。而对于 POGO ，其 \u003Ccode\u003E.metaClass\u003C\u002Fcode\u003E 指向接口中的 \u003Ccode\u003EsetMetaClass\u003C\u002Fcode\u003E 方法，这个语法糖在前文介绍 \"统一访问原则\" 时提到过。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-2\"\u003E7.2 基于 MetaClass 获取元信息\u003C\u002Fh2\u003E\n\u003Cp\u003E无论是 POJO 还是 POGO，一旦获取了其 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E，我们就能以类似 \"Java 反射\" 的形式在运行时获取这个类一切的元方法 \u003Ccode\u003EMetaMethod\u003C\u002Fcode\u003E 和元属性 \u003Ccode\u003EMetaProperty\u003C\u002Fcode\u003E ( 所以说访问修饰符在 Groovy 中 \"形同虚设\" )。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E元方法\u003C\u002Fstrong\u003E ( Meta Method )，包含了实例方法和静态方法，因此对应的获取方法叫 \u003Ccode\u003EgetMetaMethod\u003C\u002Fcode\u003E ，\u003Ccode\u003EgetStaticMetaMethod\u003C\u002Fcode\u003E。如果要获取重载的方法列表，那么对应的方法则是 \u003Ccode\u003EgetMetaMethods\u003C\u002Fcode\u003E 和 \u003Ccode\u003EgetStaticMetaMethods\u003C\u002Fcode\u003E 。获取的元方法可以通过 \u003Ccode\u003Einvoke\u003C\u002Fcode\u003E 方法调用。下面是一个简单的例子：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef pojo = new POJO(10)\ndef methodName = \"yawn\"\ndef staticMethodName = \"greet\"\n\n\u002F\u002F 获取实例方法 (元方法) 的一个 \"句柄\"。\ndef method = pojo.metaClass.getMetaMethod(methodName)\n\n\u002F\u002F 通过 invoke 方法绑定一个实例并调用。\n\u002F\u002F 如果调用的方法是空括号方法，那么可以只传进一个实例。\nmethod.invoke(pojo)\n\n\u002F\u002F 如果获取的元方法需要参数列表，则需要以可变参数的形式提供这些参数类型 Class, 或者是对应类型的任意 Object。\n\u002F\u002F 这里存在方法重载，如果只传入 null, 那么 Groovy 会疑惑第二个参数是 Class[] 还是 Object[] 因而报错。\n\u002F\u002F null as Class[] 是避免歧义的做法。\ndef staticMethod =  pojo.metaClass.getStaticMetaMethod(staticMethodName,null as Class[])\nstaticMethod.invoke(pojo)\n\n\u002F\u002F 下面演示了获取有参数列表的 \"静态\" 元方法的方式。\ndef staticMethodWithParam = pojo.metaClass.getStaticMetaMethod(staticMethodName,String.class)\n\u002F\u002F 静态方法不需要绑定特定对象。\nstaticMethodWithParam.invoke(null,\"Tom\")\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cstrong\u003E元属性\u003C\u002Fstrong\u003E ( Meta Property )，包含了实例属性和静态属性，对应的获取方法叫 \u003Ccode\u003EgetMetaProperty\u003C\u002Fcode\u003E，\u003Ccode\u003EgetStaticMetaProperty\u003C\u002Fcode\u003E。假定我们只是想对某些元信息的 \"存在性\" 做检查，那么可以使用 \u003Ccode\u003EresponseTo\u003C\u002Fcode\u003E ( 检查元方法，在之前我们曾用于对 \"鸭子类型\"  进行检查 ) 或者是 \u003Ccode\u003EhasProperty\u003C\u002Fcode\u003E ( 检查元属性 ) 。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef pojo = new POJO(10)\n\ndef methodName = \"SayHi\"\ndef propertyName = \"property\"\n\nprintln( \"the pojo has the method ${methodName} ? ${pojo.respondsTo(methodName)?\"yes\":\"no\"}\")\nprintln( \"the pojo has the method ${propertyName} ? ${pojo.hasProperty(propertyName)?\"yes\":\"no\"}\")\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 data-id=\"heading-3\"\u003E7.4 动态访问对象\u003C\u002Fh2\u003E\n\u003Cp\u003E我们之前已经介绍了一个动态访问对象属性的语法糖 —— 通过重载的 \u003Ccode\u003EgetAt\u003C\u002Fcode\u003E 方法。这个属性完全可能是对象已有的，或者是我们通过操纵元属性添加的。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef pojo = new POJO(10)\nprintln pojo[\"property\"]\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E下面介绍通过另一种方式：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eprintln pojo.\"property\"\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E或者是通过 GString 引用的方式指代属性名 ( 后文会经常使用这个操作方法 )：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef propertyName = \"property\"\nprintln pojo.\"${propertyName}\"\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E同理，如果要动态调用方法，除了 \u003Ccode\u003EinvokeMethod()\u003C\u002Fcode\u003E 之外，还可以写成：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef methodName = \"SayHi\"\n\u002F\u002F 等价于 pojo.SayHi()\nprintln pojo.\"${methodName}\"()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E此外，如果要查看 \u003Cstrong\u003EPOGO 的\u003C\u002Fstrong\u003E所有属性 ( 包括 \u003Ccode\u003Eclass\u003C\u002Fcode\u003E 信息 )，可以通过 \u003Ccode\u003E.properties\u003C\u002Fcode\u003E ( \u003Ccode\u003E.getProperties()\u003C\u002Fcode\u003E 方法 ) 获取 Map 形式，或者是通过 \u003Ccode\u003E.metaPropertyValues\u003C\u002Fcode\u003E 获取 List 形式。这两个方法不是元对象协议的一部分，对 POJO 使用只能访问到 \u003Ccode\u003Eclass\u003C\u002Fcode\u003E 信息。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 获取一个 POGO 对象的所有属性。\npogo.properties\n\u002F\u002F 由于返回值是 Map，因此可以像 k-v 对那样 \"取值\"。\npogo.properties[\"property\"]\n\n\u002F\u002F 或者拿到 for 循环里遍历：\ndef name,value\n(name,value) = [\"\",\"\"]\ndef str = \u002Fproperty name {${-\u003E name}},value is {${-\u003E value}}\u002F\npogo.properties.each {\n    entry -\u003E\n        name = entry.key\n        value = entry.value\n        println str\n}\n\n\u002F\u002F 获取链表形式\n\u002F\u002F getProperties() 方法本质上就是通过这个方法获取的，只不过额外包装了放入 Map 的过程。\npogo.metaPropertyValues.each {println \"[${-\u003E it.value}:${it.name}]\"}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 data-id=\"heading-4\"\u003E7.5 动态创建类\u003C\u002Fh2\u003E\n\u003Cp\u003EGroovy 提供了 \u003Ccode\u003EExpando\u003C\u002Fcode\u003E 来允许程序在运行时动态塑造出一个类。我们可以在构造器内部传入一个 Map 来任意指派它内部的属性，也可以通过赋值的形式随时为它注入全新的属性或者方法。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef namelessObj = new Expando(name:\"jdbcConfiguration\")\n\nnamelessObj.Ip = \"192.168.2.140\"\nnamelessObj.Port = \"3306\"\nnamelessObj.Db = \"mysql\"\n\n\u002F\u002F Expando 不支持统一访问原则，因此不能隐式地转换成 \"uri\" 属性。\nnamelessObj.getUri= {\n    return \"${delegate.Db}:\u002F\u002F${delegate.Ip}:${delegate.Port}\"\n}\n\n\n\u002F\u002F 支持对这个合成类的动态属性调用\nprintln namelessObj[\"Ip\"]\n\n\u002F\u002F 等价于以下访问方式\nprintln namelessObj.Ip\n\n\u002F\u002F 支持对这个合成类的动态方法调用\ndef eval = \"getUri\"\nprintln namelessObj.\"${eval}\"()\n\n\u002F\u002F 等价于以下调用方式\n\u002F\u002F 访问不存在的属性返回 null\n\u002F\u002F 调用不存在的方法会被引导至 methodMissing 方法\nprintln namelessObj.getUri()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E它是轻量级的，且十分灵活。比如，为单元测试创建一个模拟对象 ( Mock ) 时，这个特性会大放光彩。\u003C\u002Fp\u003E\n\u003Ch1 data-id=\"heading-5\"\u003E8. 基于 MOP 方法拦截\u003C\u002Fh1\u003E\n\u003Cp\u003E对于学习过 Spring 的读者而言，方法拦截一定不陌生。Groovy 实现 AOP 不需要借助任何的框架来实现。本文所提到的方法拦截，形式上非常接近于 Spring 的环绕通知 ( Around Advice ) 。在这个环绕通知内部，我们将自由地支配前向通知，后向通知，以及在何时去调用原方法等等。\u003C\u002Fp\u003E\n\u003Cp\u003E这一大章介绍方法拦截的两个思路，两者的区别在于是我们是否有权限修改这个类定义。如果我们是这个类的作者，那么可以通过硬编码 \u003Ccode\u003EGroovyInterceptable\u003C\u002Fcode\u003E 接口实现，否则，我们就需要借助元类型 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入特定方法的形式在外部进行方法拦截。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-6\"\u003E8.0 闭包属性可能会代替方法调用\u003C\u002Fh2\u003E\n\u003Cp\u003EGroovy 有这样的语法现象：如果找不到一个实例的方法，那么就去寻找有无同名的闭包属性可以调用：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass POGO {\n    \u002F\u002F POGO 的一个名为 greet 的方法，优先被调用\n    def greet(){\n        println \"greet by method\"\n    }\n    \u002F\u002F POGO 的一个名为 greet 的闭包属性，由于同名方法已经存在，因此该闭包不会被优先调用\n    \u002F\u002F 结合统一访问原则，以下写法会优先调用闭包： new POGO().greet, new POGO().getGreet().call()\n    def greet = {\n        println \"greet by closure\"\n    }\n    \u002F\u002F 在同名方法不存在的情况下，Groovy 尝试去调用该闭包的 .call() 方法\n    def hi = {\n        println \"hi by closure\"\n    }\n    \u002F\u002F 当发现方法不存在时的重载版 methodMiss() 方法\n    def methodMissing(String name, def args) {\n        println \"a method $name doesn't exist.\"\n        return null\n    }\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E下面是一段测试结果：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 当方法和闭包属性同名时，这种写法优先选择前者。\n\u002F\u002F greet by method\npogo.greet()\n\n\u002F\u002F 注意，这种写法总是获取闭包属性。\npogo.greet\n\n\u002F\u002F 没有可用方法时选择同名的闭包属性并调用 call 方法，或者说使用这个闭包属性 \"顶替\" 不存在的同名方法。\n\u002F\u002F hi by closure\npogo.hi()\n\n\u002F\u002F 调用确实不存在的方法或闭包属性，会被引导至 methodMissing 方法。\n\u002F\u002F 如果自身没有实现 methodMissing 方法，那么就会抛出异常。\n\u002F\u002F a method echo doesn't exist.\npogo.echo()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E注意，\u003Ccode\u003Egreet()\u003C\u002Fcode\u003E 和 \u003Ccode\u003Egreet\u003C\u002Fcode\u003E 在这里是不一样的：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Egreet()\u003C\u002Fcode\u003E 表示方法调用，在同名方法不存在时，这也有可能指向一个名为 \u003Ccode\u003Egreet\u003C\u002Fcode\u003E 的闭包调用。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Egreet\u003C\u002Fcode\u003E 表示访问属性，它在这里表示返回那个名为 \u003Ccode\u003Egreet\u003C\u002Fcode\u003E 的闭包。但严格来说，它也有可能指向 \u003Ccode\u003EgetGreet()\u003C\u002Fcode\u003E 方法。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 data-id=\"heading-7\"\u003E8.1 GroovyInterceptable 接口实现\u003C\u002Fh2\u003E\n\u003Cp\u003E现在我们了解了，一个对象的方法如果要被成功调用，要么它的确有这个方法定义，要么它具备同名闭包的属性。而如果一个 POGO 实现了 \u003Ccode\u003EGroovyInterceptable\u003C\u002Fcode\u003E 接口，那么这个规则会被改写 —— 所有的方法调用会被其自身的 \u003Ccode\u003EinvokeMethod()\u003C\u002Fcode\u003E 方法拦截，\u003Cstrong\u003E甚至这个方法或者闭包属性可以完全不存在\u003C\u002Fstrong\u003E。我们可以在这个方法内部加入统一的前向通知和后向通知，来达到切面编程的目的。\u003C\u002Fp\u003E\n\u003Cp\u003E下面是一个 \u003Ccode\u003ECar\u003C\u002Fcode\u003E 的定义，这辆车有一些行为：启动 \u003Ccode\u003Erun\u003C\u002Fcode\u003E 和仪表盘 \u003Ccode\u003Espeed\u003C\u002Fcode\u003E 。假定我们想要在调用这两个方法之前和之后加上统一的处理方法，此时就可以使用 \u003Ccode\u003EGroovyInterceptable\u003C\u002Fcode\u003E 接口配合 \u003Ccode\u003EinvokeMethod()\u003C\u002Fcode\u003E 方法对这些调用拦截。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass Car implements GroovyInterceptable {\n    \n\t\u002F\u002F 此处设计是为了避免 Car 自身对 println 方法进行拦截。\n    def static outline = { any -\u003E System.out.println(any) }\n\n    \u002F\u002F 调用这些方法都会被拦截。\n    def run() {outline \"running!\"}\n    def speed(double kmh){\"${kmh} km \u002F h\"}\n\n    \u002F\u002F 核心方法。\n    def invokeMethod(String name, args) {\n        \u002F\u002F 前向通知\n        outline \"pre:the method ${name} needs check.\"\n\n        \u002F\u002F 通过 metaClass 调用原本的方法\n        def result = this.metaClass.getMetaMethod(name, args as Object[]).invoke(this, args as Object[])\n\n        \u002F\u002F 后向通知\n        outline \"after:done \"\n        if (!result.is(null)){\n            \u002F\u002F 有结果则打印\n            outline \"and the result is ${result}\"\n        }\n    }\n}\n\ndef car = new Car()\ncar.run()\ncar.speed(109)\n\n\u002F\u002F 运行结果\n\u002F\u002F pre:the method run needs check.\n\u002F\u002F running!\n\u002F\u002F after:done\n\n\u002F\u002F pre:the method speed needs check.\n\u002F\u002F after:done \n\u002F\u002F and the result is 109.0 km \u002F h\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E注意，这个代码块特意没有使用原生的 \u003Ccode\u003Eprintln\u003C\u002Fcode\u003E 方法进行控制台输出。原因是：\u003Ccode\u003Eprintln\u003C\u002Fcode\u003E 方法是 Groovy 为 Object 注入的方法，这个方法也会被 POGO 自身的 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法拦截，但我们并不希望这么做。\u003Ccode\u003ESystem.out.println()\u003C\u002Fcode\u003E 是 \u003Ccode\u003EPrintStream\u003C\u002Fcode\u003E 的一个 \u003Ccode\u003Estatic\u003C\u002Fcode\u003E 方法，它不会受此影响，且笔者又不想处处留下一长串的 \u003Ccode\u003Esout\u003C\u002Fcode\u003E，因此用一个命名更简短的闭包取而代之。\u003C\u002Fp\u003E\n\u003Cp\u003E对这个套路比较熟悉的读者会明白：这是对\u003Cstrong\u003E代理模式\u003C\u002Fstrong\u003E的一个实践。被代理 ( 或称被 \"拦截\" ) 的方法名和方法参数都可以通过 \u003Ccode\u003Ename\u003C\u002Fcode\u003E 和 \u003Ccode\u003Eargs\u003C\u002Fcode\u003E 获取，我们利用这两条信息在 \u003Ccode\u003E.metaClass\u003C\u002Fcode\u003E 中找到原来的方法并调用。这里同样是为了避免 Groovy 混淆重载的 \u003Ccode\u003EgetMetaMethod\u003C\u002Fcode\u003E 方法，因此特意通过 \u003Ccode\u003Eas\u003C\u002Fcode\u003E 关键字限定了类型。\u003C\u002Fp\u003E\n\u003Cp\u003E如果调用的方法是不存在的，那么 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 也会对此进行拦截。所有的前向通知都能够正常执行，直到通过调用 \u003Ccode\u003EgetMetaMethod\u003C\u002Fcode\u003E 获取元方法这一步为止。对于不存在的方法，我们只能获取到一个空指针，对空指针调用 \u003Ccode\u003Einvoke\u003C\u002Fcode\u003E 方法会抛出空指针异常。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-8\"\u003E8.2 MetaClass 注入的实现\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003Ccode\u003EGroovyIntercptable\u003C\u002Fcode\u003E 接口通过硬编码到类定义的方式实现方法拦截。但是如果我们并不是这个类的设计者，或者无权对原来的类定义做出修改时，这一招就行不通了。如果无法从内部定义类的方法拦截，那就想想如何在外部实现它 —— 比如说通过 \u003Ccode\u003E.metaClass\u003C\u002Fcode\u003E 获取元类型，然后对它注入 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 还是刚才的 Car，只不过现在没有办法修改了。\nfinal class Car  {\n    def static outline = { any -\u003E System.out.println(any) }\n    def run() { outline \"running!\"}\n    def speed(double kmh) {\"${kmh} km \u002F h\"}\n}\n\n\u002F\u002F 打印方法注入之前的 metaClass 类型\nprintln Car.metaClass.getClass().name\n\n\u002F\u002F IDEA 的 Groovy 插件不会对外部注入的方法进行代码提示，甚至可能还会说 can not resovle symbol ...\n\u002F\u002F 这是插件的问题，程序能够正常运行。\nCar.metaClass.invokeMethod = {\n    String name,args-\u003E\n        def outline = {any -\u003E System.out.println(any)}\n        outline \"before running, the method ${name} needs check.\"\n        def result = Car.metaClass.getMetaMethod(name,args as Object[]).invoke(delegate,args as Object[])\n        outline \"after running....${result.is(null)?\"\":\"and the result is ${result}\"}\"\n}\n\ndef car = new Car()\ncar.run()\ncar.speed(109)\n\n\u002F\u002F 打印方法注入之后的 metaClass 类型。\nprintln Car.metaClass.getClass().name\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E我们通过为 \u003Ccode\u003ECar.metaClass.invokeMethod\u003C\u002Fcode\u003E 赋值闭包的方式，实现了在 \u003Ccode\u003ECar\u003C\u002Fcode\u003E 的元信息内注入方法。不止是 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法，在元类型内注入任何其它的方法也是相似的套路 ( 见后文 ) 。只不过 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 更特殊一些：后续对该类实例的所有方法调用全部会率先引导至 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法。\u003C\u002Fp\u003E\n\u003Cp\u003E在闭包内部，使用 \u003Ccode\u003Edelegate\u003C\u002Fcode\u003E 来指向调用的那个对象，而非 \u003Ccode\u003Ethis\u003C\u002Fcode\u003E。如果要使用到对象的一些内部属性，比如说 \u003Ccode\u003Ename\u003C\u002Fcode\u003E，需要借助 Groovy 的动态访问语法来完成：\u003Ccode\u003Edelegate[\"name\"]\u003C\u002Fcode\u003E 。\u003C\u002Fp\u003E\n\u003Cp\u003E和前者的 \u003Ccode\u003EGroovyInterceptable\u003C\u002Fcode\u003E 接口实现相比，它的一大优势是：Groovy 也支持提取 POJO 的 \u003Ccode\u003EmetaClass\u003C\u002Fcode\u003E ，因此这个方法也能用于拓展 POJO。\u003C\u002Fp\u003E\n\u003Cp\u003E如果拦截到的方法确实不存在，在直接抛出空指针异常之前，我们更希望通过 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 做一些善后工作。下一节我们就会介绍如何利用 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法做一些更体面的处理 —— 比如根据用户传入的方法名来推测用户的需求，然后给出合适的结果，而不是像现在一样给出一行枯燥的代码提示。值得注意的是，在 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 内部，我们需要借助 \u003Ccode\u003EinvokeMissingMethod\u003C\u002Fcode\u003E 来间接调用该对象的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法，否则 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法也会意外地被 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 拦截。\u003C\u002Fp\u003E\n\u003Cp\u003E这个 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法本身也是通过外部注入来实现的。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 在其它 Groovy 脚本外部注入 `invokeMethod`\nCar.metaClass.invokeMethod = {\n    String name,args-\u003E\n        def outline = {any -\u003E System.out.println(any)}\n        outline \"before running, the method ${name} needs check.\"\n\n        def job = Car.metaClass.getMetaMethod(name,args as Object[])\n        def result = null\n\n        \u002F\u002F 相当于是调用了 delegate.methodMiss(name,args)\n        if(job == null) Car.metaClass.invokeMissingMethod(delegate,name,args as Object[])\n        else {\n            result = job.invoke(delegate,args as Object[])\n        }\n        outline \"after running....${result.is(null)?\"\":\"and the result is ${result}\"}\"\n}\n\n\u002F\u002F 同理，如果在内部无法定义，就在外部通过 metaClass 注入 methodMissing 方法。\nCar.metaClass.methodMissing = {\n     String name,args-\u003E\n        System.err.println(\"this object has no method ${name}, and the args ${args} are unused.\")\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这里还有一处小细节，通过打印 \u003Ccode\u003E.metaClass.getClass().name\u003C\u002Fcode\u003E 能够观察到，对元类型进行方法注入会改变 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 自身的类型：在最开始，它属于 \u003Ccode\u003Eorg.codehaus.groovy.runtime.HandleMetaClass\u003C\u002Fcode\u003E 类。而一旦有注入的动作，它就会变更为 \u003Ccode\u003Egroovy.lang.ExpandoMetaClass\u003C\u002Fcode\u003E 类型 ( 后文简称为 EMC )。这是一个历史遗留问题：EMC 目前并不是 Groovy MetaClass 的唯一实现，但我们目前的各种操作事实上都是通过它进行的。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-9\"\u003E8.3 方法合成\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E方法合成和方法拦截的区别在于：后者拦截所有 ( 包括不存在的 ) 的调用，从而实现 AOP 切面编程。而前者只专注于拦截运行期间不存在的方法调用，并希望能够根据传入的方法名，参数等语义推测用户行为，并返回合理的处理结果，从而让用户感觉 \"什么调用都好像是动态生成的一样\"。\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EGroovy 提供的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 对方法合成非常有用。比如 Grail \u002F GORM 可以在调用时为领域对象合成出 \u003Ccode\u003EfindByFirstName\u003C\u002Fcode\u003E 和 \u003Ccode\u003EfindByFirstNameAndLast\u003C\u002Fcode\u003E 这样的查找方法。\u003Cstrong\u003E合成的方法只有在调用时才会作为独立的方法存在\u003C\u002Fstrong\u003E，因此无法通过通常的反射手段找到它们。与此同时，合成的方法也可以缓存下来方便以后复用，来减少对 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法的频繁调用。Grails 的创建者 Graeme Rocher 称之为 \"\u003Cstrong\u003E拦截，缓存，调用\u003C\u002Fstrong\u003E\" 模式。\u003C\u002Fp\u003E\n\u003Cp\u003E这是一个 Groovy 方法合成的一个简单例子。假定有一个 \u003Ccode\u003EPerson\u003C\u002Fcode\u003E 类，而他有一些爱好，这些爱好存在一个 \u003Ccode\u003Eplays\u003C\u002Fcode\u003E 字段中，并且有可能会后续的运行中继续添加。现在要求对于 \u003Ccode\u003Eplays\u003C\u002Fcode\u003E 内的每一个元素都编写出一个 \u003Ccode\u003EplayXXX\u003C\u002Fcode\u003E 方法。\u003C\u002Fp\u003E\n\u003Cp\u003E最基本的方式，就是在代码内进行硬编码。一旦客户后续在 \u003Ccode\u003Eplays\u003C\u002Fcode\u003E 列表了添加，或者是修改了某个字段，我们就会被迫地回到源代码中重做修改并编译。显然，在 Groovy 中绝对不会这么做。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass Person{\n    def plays = [\"Football\",\"Basketball\",\"TableTennis\"]\n    String name\n    def playFootBall(){\n        \u002F\u002F 实际生产中，这可能是一个数据库查询。\n        println(\"$name is playing FootBall\")\n    }\n    def playBasketball(){println(\"$name is playing Basketball\")}\n    \u002F\u002F 相似的套路 ...\n}\n\ndef john = new Person(name: \"john\")\njohn.playBasketball()\njohn.playFootBall()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E我们在此引入 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法，用方法合成的思路解决问题。该方法不像 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 那样对所有的方法进行拦截，仅在目标方法不存在的场合才会被 Groovy 调用。\u003C\u002Fp\u003E\n\u003Cp\u003E下面的代码块是这样做的：根据用户提供的方法名解析出他可能期望获得的字段，然后程序查询这个字段是否在 \u003Ccode\u003Eplays\u003C\u002Fcode\u003E 列表内，如果有，返回结果。否则，抛出 \u003Ccode\u003EMissingMethodException\u003C\u002Fcode\u003E ( 或者抛出其它合理的异常也可以 ) 。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass Person {\n    private def sout = { any -\u003E System.out.println(any)}\n    def plays = [\"Football\",\"Basketball\",\"TableTennis\"]\n    def name\n    def run(){sout \"running...\"}\n    def methodMissing(String name,args){\n        def key = name.split(\"play\")[1]\n        if(!plays.contains(key)) throw new MissingMethodException(name,this.class,args as Object[])\n        sout \"${this.name} is playing ${key}\"\n    }\n}\n\ndef john = new Person(name: \"john\")\n\n\u002F\u002F 存在的方法可以正常调用，不存在的方法会在 methodMissing 临时合成。\njohn.playBasketball()\njohn.playFootball()\njohn.run()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-10\"\u003E8.3.1 方法合成的记忆性\u003C\u002Fh3\u003E\n\u003Cp\u003E与此同时，我们希望这种合成是具备 \"记忆性\" 的 —— 当第一次调用新合成的方法时，将它注入到 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 内部。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef methodMissing(String name,args){\n    println \"\u002F\u002F--------first call for method $name-------\u002F\u002F\"\n    def key = name.split(\"play\")[1]\n    if(!plays.contains(key)) throw new MissingMethodException(name,this.class,args as Object[])\n    \n    \u002F\u002F 创建一个闭包\n    def impl = {\n        -\u003E println \"playing ${name.split(\"play\")[1]}\"\n    }\n    \n    \u002F\u002F 将闭包注入到当前对象的 MetaClass.\n    Person self = this\n    self.metaClass.\"$name\" = impl\n    impl()\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这种缓存手段在简单的例子中甚至比不缓存还要更慢一些。但这种缓存手段很重要，只是在这个案例中，我们的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 逻辑相比之下实在是太简单了。在大型项目中， \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 需要处理各种方法合成请求，逻辑也会变得复杂，耗时明显会变长。此时，缓存手段的优势才会体现出来。\u003C\u002Fp\u003E\n\u003Cp\u003E一旦目标是一个 POJO，或者我们没有对它的修改权限，这种手段就行不通了。此时如果要实现方法合成，我们需要将 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法注入到元类型 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 内部，之前已经演示过了。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Ejohn.metaClass.methodMissing = {\n    String name, args -\u003E\n        println \"first call of method $name...\"\n        def key = name.split(\"play\")[1]\n        Person self = delegate\n        if (!self.plays.contains(key)) throw new MissingMethodException(name, Person.class, args as Object[])\n        def impl = { -\u003E println \"${self.name} is playing $key\" }\n        self.metaClass.\"$name\" = impl\n        impl()\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch1 data-id=\"heading-11\"\u003E9. 方法注入\u003C\u002Fh1\u003E\n\u003Cp\u003E\"要是 \u003Ccode\u003Ejava.lang.String\u003C\u002Fcode\u003E 原生支持一个 \u003Ccode\u003Eencrypt\u003C\u002Fcode\u003E 方法那就太好了。\" 面向对象编程本身就是为了拓展，但是能够拓展到什么程度，又往往受到编程语言的限制。如果我们能够基于实际需求为类拓展方法，那么写出一段富有表现力的代码就会十分轻松。\u003C\u002Fp\u003E\n\u003Cp\u003E由于 MOP 协议的存在，Groovy 实现这些非常容易 ( 即便不通过 MOP 协议，我们也可以通过 SPI 接口进行方法拓展 )。在之前的章节中，我们了解了如何基于 \u003Ccode\u003E.metaClass\u003C\u002Fcode\u003E 提取元属性，元方法。本章开始，我们要逐渐了解如何利用 Groovy 为我们暴露的元信息并向内部注入一些基于现实需要的行为。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-12\"\u003E9.1 使用分类注入方法\u003C\u002Fh2\u003E\n\u003Cp\u003EGroovy 提供了可控的，或者说仅在局部范围内生效的方法注入，分类 ( category ) 就是一种。形式上，它的用法比较接近 Scala 的隐式类 —— 在一个上下文环境中隐式地通过代理对象实现方法增强。在 Groovy 中，分类的代码增强效果仅仅在一段 \u003Ccode\u003Euse\u003C\u002Fcode\u003E 作用域和执行线程有效。当线程退出这段代码块之后，一切都会恢复原样。\u003C\u002Fp\u003E\n\u003Cp\u003E下面我们使用分类方法注入的形式重新实现在 \"拓展 JDK\" 章节中曾介绍的那个例子：为 \u003Ccode\u003EString\u003C\u002Fcode\u003E 拓展 \u003Ccode\u003EwriteTo\u003C\u002Fcode\u003E 方法，以便我们直接将代码内的字符串输出到外部的文本文件。\u003C\u002Fp\u003E\n\u003Cp\u003E类似地，我们需要令行准备一个拓展类，暂且为它起名 \u003Ccode\u003EStringExtension\u003C\u002Fcode\u003E，然后将 \u003Ccode\u003EwriteTo\u003C\u002Fcode\u003E 方法补充到这里。有两点需要注意：首先，这个增强方法仍然需要使用 \u003Ccode\u003Estatic\u003C\u002Fcode\u003E 关键字修饰；其次，该方法的第一个形参用于表明拓展的类型，它代表了调用此方法的那个对象，但是不会在调用时体现出来。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass StringExtension {\n    \u002F\u002F 调用时，相当于 \"xxxxx\".writeTo(filename,charset)。\n    \u002F\u002F self 代表了调用的那个字符串。\n    def static writeTo(String self,String filename,String charset){\n        new File(filename).withWriterAppend(charset){\n            it.writeLine(self)\n        }\n    }\n}\n\u002F\u002F 创建了上下文\nuse(StringExtension){\n    \u002F\u002F 注意，仅在 use 语句块内有效\n    \"this is mop method...\".writeTo(\"C:\\\\Users\\\\i\\\\Desktop\\\\武林秘籍.txt\",\"UTF-8\")\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E之后，在任意一处代码块内创建一个 \u003Ccode\u003Euse\u003C\u002Fcode\u003E 块：第一个形参传入刚才设定好的增强类型 ( 不是传实例 )，然后我们就可以在后面的闭包块内享受到 \u003Ccode\u003EStringExtension\u003C\u002Fcode\u003E 为 \u003Ccode\u003EString\u003C\u002Fcode\u003E 拓展的增强方法 ( 这个闭包后附的语法参见笔者 Groovy 的第一篇入门教程 )。\u003C\u002Fp\u003E\n\u003Cp\u003E对于分类的声明，还存在一种更简洁直观的 \u003Ccode\u003E@Category\u003C\u002Fcode\u003E 注解的写法：在注解标记被代理 ( 被增强 ) 的类型，然后内部无需再使用 \u003Ccode\u003Estatic\u003C\u002Fcode\u003E 声明增强方法，也不需要在形参列表中额外预留一个参数。同时，该增强类内部的 \u003Ccode\u003Ethis\u003C\u002Fcode\u003E 将不再指代自身，而是指代那个目标实例。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E@Category(String)\nclass StringExtension {\n    def writeTo(String filename,String charset){\n        new File(filename).withWriterAppend(charset){           \n            \u002F\u002F this 指代被修饰的 String，而不是 StringExtension\n            it.writeLine(this)\n        }\n    }\n}\n\n\u002F\u002F 创建了上下文\nuse(StringExtension){\n    \u002F\u002F 注意，仅在 use 语句块内有效\n    \"this is mop method...\".writeTo(\"C:\\\\Users\\\\i\\\\Desktop\\\\武林秘籍.txt\",\"UTF-8\")\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-13\"\u003E9.1.1 分类接受多个增强类\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Euse\u003C\u002Fcode\u003E 是一个重载的方法：它的第一个参数不仅可以接受单个增强类，还能受由多个增强类组成的数组 \u003Ccode\u003EList&#x3C;Class\u003E\u003C\u002Fcode\u003E 。从写法上，Groovy 支持以逗号的形式将这些类名传进 \u003Ccode\u003E()\u003C\u002Fcode\u003E 小括号内。\u003C\u002Fp\u003E\n\u003Cp\u003E如果传入了多个增强类，那么就可能存在一个问题：方法重复。\u003Cstrong\u003E在多个增强类依次排列的情况下，Groovy 优先选择最后一个传进来的增强类\u003C\u002Fstrong\u003E。比如：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E@Category(String)\nclass StringExtension_01 {\n    def shout() {\n        println(\"from StringExtension_01\")\n    }\n}\n\n@Category(String)\nclass StringExtension_02 {\n    def shout() {\n        println(\"from StringExtension_02\")\n    }\n}\n\nuse(StringExtension_01, StringExtension_02) {\n    \u002F\u002F from StringExtension_02\n    \"string\".shout()\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EGroovy 在很多地方都遵守这样的原则，后文为了方便解释，笔者在这里暂且将这种原则称之为 \"\u003Cstrong\u003E最远原则\u003C\u002Fstrong\u003E\" ( 最后传来的优先级最高 ) 。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-14\"\u003E9.1.2 分类可以嵌套\u003C\u002Fh3\u003E\n\u003Cp\u003E同样的，\u003Ccode\u003Euse\u003C\u002Fcode\u003E 语句块内部也允许定义新的 \u003Ccode\u003Euse\u003C\u002Fcode\u003E 块。如果此时发生了方法冲突，Groovy 的处理方式是：优先选择最内部层次的增强类方法。比如：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Euse(StringExtension_02){\n    \u002F\u002F 对于不同层次的增强类而言，当发生方法重复时，Groovy 优先选择最内部的方法。\n    use(StringExtension_01){\n        \u002F\u002F from StringExtension_01\n        \"string\".shout()\n    }\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E结合上一条考虑：一个增强类所处的 \u003Ccode\u003Euse\u003C\u002Fcode\u003E 嵌套层次越深，且在同层次中定义的顺序越靠后，那么当发生方法冲突时，Groovy 选择它的优先级就越高。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-15\"\u003E9.2 使用 ExpandoMetaClass 注入方法\u003C\u002Fh2\u003E\n\u003Cp\u003E想要创建领域特定语言 ( DSL )，我们需要向不同的类，甚至类的层次结构当中注入任意的方法，\u003Cstrong\u003E包括注入实例方法，静态方法，甚至是操作构造器\u003C\u002Fstrong\u003E。前文已经暗示了 —— 通过调取一个类的 \u003Ccode\u003EmetaClass\u003C\u002Fcode\u003E ，我们能注入的可不止 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 和 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法，理论上，只要想象力到位，我们想注入什么方法都可以。\u003C\u002Fp\u003E\n\u003Cp\u003E下面是一个演示通过 EMC 实现方法注入的 case：向 \u003Ccode\u003EInteger\u003C\u002Fcode\u003E 类的 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入一个方法，该方法能够打印出 \"基于这个天数之后的日期\"。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 标准的拓展格式：\n\u002F\u002F 类.metaClass.方法名 = 一个闭包 {...}\n\u002F\u002F 方法名自拟，需要的参数写在闭包内部。\nInteger.metaClass.daysFromNow = {\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F delegate 指向那个被注入的 Integer\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\n\n\u002F\u002F 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021\nprintln 5.daysFromNow()\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E此外，\u003Ccode\u003EdaysFromNow()\u003C\u002Fcode\u003E 是一个\u003Cstrong\u003E内部无副作用，且外部不接受参数，纯粹用于返回一个值的纯函数\u003C\u002Fstrong\u003E。在 Scala 中，满足这种特性的方法都会被 \"统一访问原则\" 伪装成一个属性，Groovy 也能实现。因此，在这里不妨将 \u003Ccode\u003EdaysFromNow\u003C\u002Fcode\u003E 方法改名为 \u003Ccode\u003EgetDaysFromNow\u003C\u002Fcode\u003E 来去掉访问时那个多余的小括号。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F getDaysFromNow 方法被 Groovy 包装成了 DaysFromNow 属性。\n\u002F\u002F 当然，用户方可以选择任意一种方式来获取结果。\nInteger.metaClass.getDaysFromNow = {\n    \u002F\u002F 这个方法不需要外部传递参数。\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F delegate 指向那个被注入的 Integer 实例\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\n\u002F\u002F 这种套路在 DSL 语言中经常用到。\nprintln 5.daysFromNow\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这也是 Groovy 不谈 \"注入属性\" 的原因：这只需要注入对应的 \u003Ccode\u003EgetXXX\u003C\u002Fcode\u003E 方法就可以解决了，调用这段代码的用户不会发现 ( 也不会感兴趣 ) 这个属性是由方法 \"伪装\" 成的。\u003C\u002Fp\u003E\n\u003Cp\u003E相比于分类 ( category ) 的拓展方式，这种方法注入会全局范围内生效，任意一个 \u003Ccode\u003EInteger\u003C\u002Fcode\u003E 实例都可以调用这个 \u003Ccode\u003EDaysFromNow\u003C\u002Fcode\u003E \"属性\"。但是，我们认为在经过适当的数值转换，精度舍入的处理之后，像 \u003Ccode\u003ELong\u003C\u002Fcode\u003E，或者 \u003Ccode\u003EDouble\u003C\u002Fcode\u003E 这类数值应当也能支持 \u003Ccode\u003EgetDaysFromNow\u003C\u002Fcode\u003E 方法。那么想要给多个类同时注入一个方法该怎么做呢？\u003C\u002Fp\u003E\n\u003Cp\u003E第一种做法是先声明一个闭包，然后再将它注入到多个 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 内：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef getDaysFromNow = {\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\ndef injectName = \"getDaysFromNow\"\nInteger.metaClass.\"$injectName\" = getDaysFromNow\nLong.metaClass.\"$injectName\" = getDaysFromNow\nDouble.metaClass.\"$injectName\" = getDaysFromNow\n\n\u002F\u002F 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021\nprintln 5.daysFromNow\nprintln 10.00d.daysFromNow\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这种做法有点啰嗦。而 \u003Ccode\u003EInteger\u003C\u002Fcode\u003E，\u003Ccode\u003ELong\u003C\u002Fcode\u003E 和 \u003Ccode\u003EDouble\u003C\u002Fcode\u003E 都有一个共同父类，那就是 \u003Ccode\u003ENumber\u003C\u002Fcode\u003E 类。那么只需要向这个父类注入实例方法，那么所有的子类就都会 \"通过继承关系\" 自动获得。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003ENumber.metaClass.getDaysFromNow = {\n    -\u003E\n    def now = Calendar.instance\n    \u002F\u002F\n    now.add(Calendar.DAY_OF_MONTH,delegate as int)\n    now.time\n}\n\n\u002F\u002F 打印 5 天之后的时间： Sun May 16 17:18:46 CST 2021\nprintln 5.daysFromNow\nprintln 10.00d.daysFromNow\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-16\"\u003E9.2.1 注入静态方法\u003C\u002Fh3\u003E\n\u003Cp\u003E在了解注入实例方法之后，注入静态方法几乎没有什么难度，区别是多了一步 \u003Ccode\u003E'static'\u003C\u002Fcode\u003E ( 需要加引号 ) 的选择操作。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003ENumber.metaClass.'static'.getDaysFromNow = {\n    Number number -\u003E\n    def now = Calendar.instance\n    now.add(Calendar.DAY_OF_MONTH,number as int)\n    now.time\n}\n\nprintln Integer.daysFromNow(10)\nprintln Number.daysFromNow(10)\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-17\"\u003E9.2.2 注入构造器\u003C\u002Fh3\u003E\n\u003Cp\u003E对构造器的注入分为两种：第一种是新增构造器，第二种是对已有的构造器进行覆盖。\u003C\u002Fp\u003E\n\u003Cp\u003E对于第一种情况，需要进入到 \u003Ccode\u003EClazz.metaClass.constructor\u003C\u002Fcode\u003E 域内部，然后借助 \u003Ccode\u003E&#x3C;&#x3C;\u003C\u002Fcode\u003E 运算符进行注入。如果此运算符被用于覆盖类原有的构造器，那么 Groovy 会报错。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003EInteger.metaClass.constructor &#x3C;&#x3C; {\n    Calendar c -\u003E new Integer(c.get(Calendar.DAY_OF_YEAR))\n}\n\u002F\u002F 根据日期返回 \"今天是今年的第几天\"，为 Integer 类型。\ndef day = new Integer(Calendar.instance)\nprintln day\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E对于第二种情况，我们使用 \u003Ccode\u003E=\u003C\u002Fcode\u003E 而非 \u003Ccode\u003E&#x3C;&#x3C;\u003C\u002Fcode\u003E 操作符，这里不再做演示。需要注意的是，Groovy 并非是真的覆盖了原来的构造器，通过 Java 的反射也可以重新调用它。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-18\"\u003E9.2.3 使用 EMC DSL 批量注入方法\u003C\u002Fh3\u003E\n\u003Cp\u003E如果仅打算为一个类补充一两个方法，那么 \u003Ccode\u003EClazz.metaClass.anyMethod = {...}\u003C\u002Fcode\u003E 的写法尚且可以接受。但如果一个类挂载了一系列实例方法，静态方法乃至构造器方法，此时将这些方法集中到大代码块内统一管理是更明智的做法。\u003C\u002Fp\u003E\n\u003Cp\u003EGroovy 提供了 EMC DSL 来使我们能够像写 \u003Ccode\u003Eyml\u003C\u002Fcode\u003E 文件一样，让类的注入方法呈现出清晰的树状层次：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003EInteger.metaClass {\n    \u002F\u002F 注入实例方法\n    \u002F\u002F 可以通过 .daysFromNow 获取\n    getDaysFromNow = {\n        -\u003E\n        Calendar calendar = Calendar.instance\n        calendar.add(Calendar.DAY_OF_MONTH,delegate as int)\n        calendar.time\n    }\n\n    'static' {\n        getDaysFromNow = {\n            Integer integer -\u003E\n            Calendar calendar = Calendar.instance\n            calendar.add(Calendar.DAY_OF_MONTH,integer as int)\n            calendar.time\n        }\n    }\n\n    constructor &#x3C;&#x3C; {\n        Calendar c -\u003E new Integer(c.get(Calendar.DAY_OF_YEAR))\n    }\n}\n\n\u002F\u002F 调用注入的静态方法\nprintln Integer.getDaysFromNow(10)\n\n\u002F\u002F 调用注入的实例方法\nprintln 10.daysFromNow\n\nprintln(new Integer(Calendar.instance))\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-19\"\u003E9.2.4 向实例注入方法\u003C\u002Fh3\u003E\n\u003Cp\u003E如果不想将方法注入到整个类内部，那也可以仅提取某一个对象的 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 进行方法注入。下面的案例创建了两个对象 \u003Ccode\u003Ep1\u003C\u002Fcode\u003E 和 \u003Ccode\u003Ep2\u003C\u002Fcode\u003E ，其中，我们只为 \u003Ccode\u003Ep1\u003C\u002Fcode\u003E 的元类型注入了 \u003Ccode\u003Esing\u003C\u002Fcode\u003E 方法，因此只有 \u003Ccode\u003Ep1\u003C\u002Fcode\u003E 会 \"唱歌\"。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass Person{\n    String name\n    def talk(String s){println \"${name}:[$s]\"}\n}\n\n\ndef p1 = new Person(name:\"Wang Fang\")\ndef p2 = new Person(name:\"Lao Wang\")\n\np1.metaClass {\n    sing = {\n        \u002F\u002F 如果\n        String s -\u003E \"${delegate[\"name\"]}:${s}~~~ oh~~\"\n    }\n}\n\nprintln p1.sing(\"oh baby baby\")\n\n\u002F\u002F p2 的 EMC 没有绑定，因此这里会抛出 MissingMethodException 异常\nprintln p2.sing(\"are you ok?\")\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 data-id=\"heading-20\"\u003E9.3 利用 MOP 实现动态委托\u003C\u002Fh2\u003E\n\u003Cp\u003E如果委托是静态的，那它就可以在编译期间确定，因此也就无需在运行时更改，关于动态委托的实现可以参考之前文章提到过的 \u003Ccode\u003E@Delegate\u003C\u002Fcode\u003E 注解 ( 这是编译时元编程技术 )。\u003C\u002Fp\u003E\n\u003Cp\u003E现在有三个角色：老板 \u003Ccode\u003EBoss\u003C\u002Fcode\u003E ( 被委托人 )，普通职员 \u003Ccode\u003EWorker\u003C\u002Fcode\u003E 和分析师 \u003Ccode\u003Eanalyst\u003C\u002Fcode\u003E ( 委托人 )。后两者有各自的分工，但是所有的方法调用通过 \u003Ccode\u003EBoss\u003C\u002Fcode\u003E 进行。考虑到委托人的角色以及数量都可能动态变化，因此这里不使用静态的 \u003Ccode\u003E@Delegate\u003C\u002Fcode\u003E 注解。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eclass Boss{}\nclass Employee{\n    def work(){\n        println \"working now\"\n    }\n}\n\nclass Analyst{\n    def analize(){\n        println \"solving this problem...\"\n    }\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E首先，我们将代表动态委托功能的 \u003Ccode\u003EdelegateTo\u003C\u002Fcode\u003E 方法注入给 Object ( 或者只注入给 \u003Ccode\u003EBoss\u003C\u002Fcode\u003E 类也可以 )，从形式上，只要将任意多个类型传入到方法当中，就可以建立该对象和这些类的委托关系。\u003C\u002Fp\u003E\n\u003Cp\u003E具体的实现方式清晰明了：根据接受的 \u003Ccode\u003EClass[]\u003C\u002Fcode\u003E 创建出委托类的实例数组 \u003Ccode\u003Eins\u003C\u002Fcode\u003E，然后利用方法合成的套路，向被委托实例的 \u003Ccode\u003Edelegate\u003C\u002Fcode\u003E 注入重写的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法进行方法合成 ( 在这里应该是方法委托 )。\u003C\u002Fp\u003E\n\u003Cp\u003E一旦调用了该对象不存在的方法，Groovy 就会试图从 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 那里返回一个结果。在 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 内部，我们通过轮询 \u003Ccode\u003Eins\u003C\u002Fcode\u003E 数组的方式寻找出第一个对该方法名做出响应的委托实例 ( 这里可通过 \u003Ccode\u003Efind\u003C\u002Fcode\u003E 和 \u003Ccode\u003EresponseTo\u003C\u002Fcode\u003E 方法实现 )，然后再通过 \u003Ccode\u003EinvokeMethod()\u003C\u002Fcode\u003E 间接调用被委托的方法。\u003C\u002Fp\u003E\n\u003Cp\u003E如果愿意的话，也可以向之前的套路那样，每调用一个新的委托方法，就将它注入到原先的被委托类的 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 中。下一次调用相同的方法时，Groovy 就没有必要重新去 \u003Ccode\u003Eins\u003C\u002Fcode\u003E 数组那里做轮询了。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003EObject.metaClass.delegateTo = {\n    Class... clazzs -\u003E\n        def ins = clazzs.collect { it.getDeclaredConstructor().newInstance() }\n        delegate.metaClass.methodMissing = {\n            String name, args -\u003E\n                \u002F\u002F 找到能响应该方法的实例，找到第一个就返回。\n                def proxy = ins.find {\n                    it.respondsTo(name,args)\n                }\n\n                \u002F\u002F 可选项，如果乐意的话，也可以向实例的 MetaClass 内部缓存。\n                delegate.metaClass.\"${name}\" = { Object[] vargs -\u003E\n                    proxy.invokeMethod(name,vargs)\n                }\n\n                \u002F\u002F 调用该实例的方法。\n                proxy.invokeMethod(name,args)\n        }\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E现在，我们能够在 Groovy 代码内以简洁地形式声明一个动态调用。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Edef boss = new Boss()\nboss.delegateTo(Employee,Analyst)\n\nboss.work()\nboss.analize()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E由于查找代理实例的过程中依赖 \u003Ccode\u003Efind\u003C\u002Fcode\u003E 方法进行，因此这无形间规定了优先级顺序：如果多个类都能完成某个委托，那么先传入的类，其方法调用的优先级最高。这是一个综合的练习，因为它除了还利用了以下知识点：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E通过调用一个对象的 \u003Ccode\u003EresponseTo\u003C\u002Fcode\u003E 来检查它是否能对某一个方法做出响应。\u003C\u002Fli\u003E\n\u003Cli\u003E通过调用一个对象的 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法来动态调用方法。\u003C\u002Fli\u003E\n\u003Cli\u003E通过注入 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 来实现方法合成 ( 在这个案例中，方法合成达成了方法委托的效果 )。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 data-id=\"heading-21\"\u003E9.4 总结 Groovy 调用方法的策略\u003C\u002Fh2\u003E\n\u003Cp\u003E在调用一个方法时，Groovy 会根据这个对象是 POJO 还是 POGO ，是否使用了 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入等因素而采取不同的策略。整个 MOP 专题基本围绕两个主要的方法进行：\u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 和 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-22\"\u003E9.4.1 If POJO\u003C\u002Fh3\u003E\n\u003Cp\u003E对于 POJO 而言，优先级顺序：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法 ( 拦截所有调用 )。\u003C\u002Fli\u003E\n\u003Cli\u003E通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的普通方法。\u003C\u002Fli\u003E\n\u003Cli\u003E原有方法。\u003C\u002Fli\u003E\n\u003Cli\u003E通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E抛出\u003C\u002Fstrong\u003E \u003Ccode\u003EMissingMethodException\u003C\u002Fcode\u003E 。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E注意 2，3 两项， 通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的同名方法相比原本方法而言优先级更高。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-23\"\u003E9.4.2 If POGO\u003C\u002Fh3\u003E\n\u003Cp\u003E对于没有实现 \u003Ccode\u003EGroovyInterceptor\u003C\u002Fcode\u003E 标记接口的 POGO 而言，方法调用优先级顺序：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003E通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法。\u003C\u002Fstrong\u003E ( 拦截所有调用 )\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的普通方法。\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E原有方法 \u002F 同名的闭包属性。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E通过 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E 注入的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法。\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E内部定义的 \u003Ccode\u003EmethodMissing\u003C\u002Fcode\u003E 方法。\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E内部定义的 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E抛出\u003C\u002Fstrong\u003E \u003Ccode\u003EMissingMethodException\u003C\u002Fcode\u003E 。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E事实上，我们不可能在一个类内部同时用上所有项。为了让思路更清晰一些，笔者从需求角度进行了划分：\u003C\u002Fp\u003E\n\u003Cp\u003Ea. 当需要在外部进行方法拦截时，只需要额外定义第 1 项 ( 不要和内部定义的第 6 项搞混 )。\u003C\u002Fp\u003E\n\u003Cp\u003Eb. 当需要动态拓展方法时，只需要额外定义第 2 项。\u003C\u002Fp\u003E\n\u003Cp\u003Ec. 当需要在外部实现方法合成时，只需要额外定义第 4 项。\u003C\u002Fp\u003E\n\u003Cp\u003Ed. 当需要在内部实现方法合成时，只需要额外定义第 5 项。\u003C\u002Fp\u003E\n\u003Cp\u003E如果 POGO 在内部实现了 \u003Ccode\u003EGroovyInterceptor\u003C\u002Fcode\u003E 接口，所有调用将只会引导至内部定义的 \u003Ccode\u003EinvokeMethod\u003C\u002Fcode\u003E 方法。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-24\"\u003E9.5 使用 Mixin 混合注入方法\u003C\u002Fh2\u003E\n\u003Cp\u003E首先来举一个例子：动物 \u003Ccode\u003EAnimal\u003C\u002Fcode\u003E 衍化成了两个类别：卵生动物的代表飞鸟 \u003Ccode\u003EBird\u003C\u002Fcode\u003E 与哺乳动物的代表走兽 \u003Ccode\u003EBeast\u003C\u002Fcode\u003E 。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Eabstract class Animal{\n    \u002F\u002F 动物都会叫 ...\n    abstract def roar()\n}\n\nclass Beast extends Animal{\n    def roar(){println \"beast yawn...\"}\n    \u002F\u002F 走兽会捕食 ...\n    def predate(){println \"predate ...\"}\n}\n\nclass Bird extends Animal{\n    def roar(){println \"bird twitter...\"}\n    \u002F\u002F 飞鸟会飞...\n    def fly(){ println \"hovering in the sky\"\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E现在有一个特例蝙蝠 \u003Ccode\u003EBat\u003C\u002Fcode\u003E：它自身虽然属于哺乳动物，但是却又具备飞鸟独有的 \u003Ccode\u003Efly\u003C\u002Fcode\u003E 方法，它无论单继承哪一边都好像缺点什么。但是，如果两者都继承也会出现问题：它是选择像飞鸟一样鸣叫呢？还是选择像走兽一样吼叫呢？\u003C\u002Fp\u003E\n\u003Cp\u003E这是多重继承所带来的菱形继承问题。好在 Java 单继承的，假使在开发中遇到了类似的问题，最直接的思路就是仅保留公共方法到父类，将其它的方法放到接口去，这样就可以通过  \"单继承 + 组合模式\" 来规避菱形继承问题。\u003C\u002Fp\u003E\n\u003Cp\u003E然而，Groovy 提供了 \"通过混合类型 ( \u003Ccode\u003EMixin\u003C\u002Fcode\u003E ) 来实现多重继承\" 的方案。混合的方式有两种 —— 编译期混合和运行期混合。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-25\"\u003E9.5.1 编译期混入 Mixin\u003C\u002Fh3\u003E\n\u003Cp\u003E如果要编译期混合类型，那么就要用到 \u003Ccode\u003E@Mixin\u003C\u002Fcode\u003E 注解。这个注解使用起来非常简单：将想要混入的类 ( 的数组 ) 传递到注解的 \u003Ccode\u003Evalue\u003C\u002Fcode\u003E 值就可以了。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E@Mixin([Beast,Bird])\nclass Bat extends Animal{\n    @Override\n    def roar() {\n        println \"I'm BATMAN, I'm rich.\"\n    }\n}\n\ndef b = new Bat()\n\n\u002F\u002F 自身的 roar 方法被压制了，调用的是 Bird 的方法。\nb.roar()\n\n\u002F\u002F 混入 Bird 类获得的 fly 方法。\nb.fly()\n\n\u002F\u002F 混入 Beast 类获得的 predate 方法。\nb.predate()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这里还有一处细节要交代：当我们调用 \u003Ccode\u003Eroar\u003C\u002Fcode\u003E 方法时，\u003Ccode\u003EBat\u003C\u002Fcode\u003E 对象并没有给出预期中的结果。其原因可以类比笔者在前文提到的 \u003Cstrong\u003E\"最远原则\"\u003C\u002Fstrong\u003E：在混入多个类的情况下，当发生方法冲突时，Groovy 优先选择数组内最后一个满足的类。\u003C\u002Fp\u003E\n\u003Cp\u003E笔者的 Groovy 版本为 3.0.8。在当前版本当中，编译期混入其实已经不推荐再使用 \u003Ccode\u003E@Mixin\u003C\u002Fcode\u003E 注解了，Groovy 建议使用更简单的关键字 \u003Ccode\u003Etrait\u003C\u002Fcode\u003E 来代替。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-26\"\u003E9.5.2 运行期混入\u003C\u002Fh3\u003E\n\u003Cp\u003E如果选择在运行期间混入，那么可以先提取出一个类 ( 对象 ) 的元类型 \u003Ccode\u003EMetaClass\u003C\u002Fcode\u003E ，然后通过 \u003Ccode\u003Emixin\u003C\u002Fcode\u003E 方法按照 \"最远原则\" 依次插入混入的类型。同样地，运行时混入避免了对类的源代码进行修改。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003E\u002F\u002F 没有对类定义进行修改 \nabstract class Animal{\n    abstract def roar()\n}\n\nclass Beast extends Animal{\n    def roar(){println \"beast yawn...\"}\n    def predate(){println \"prey ...\"}\n}\n\nclass Bird extends Animal{\n    def roar(){println \"bird twitter...\"}\n    def fly(){ println \"hovering in the sky\"}\n}\n\nclass Bat extends Animal{\n    @Override\n    def roar() {\n        println \"I'm BATMAN, I'm rich.\"\n    }\n}\n\u002F\u002F----------------------------\n\ndef bat = new Bat()\nbat.metaClass.mixin(Bird,Beast)\n\u002F\u002F 根据 \"最远原则\",优先调用 Beast 的方法。\nbat.roar()\nbat.fly()\nbat.predate()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 data-id=\"heading-27\"\u003E9.6 编译期 Mixin 的替代方案：Trait\u003C\u002Fh2\u003E\n\u003Cp\u003EGroovy 或许也觉得 Mixin 和 Scala 混入特质的思路大体相同，因此在 2.3.x 版本之后，Groovy 也开始采用 \u003Ccode\u003Etrait\u003C\u002Fcode\u003E 关键字，用以代替具备侵入性的 \u003Ccode\u003E@Mixin\u003C\u002Fcode\u003E 注解。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E特质 Trait 使得 Groovy 类像实现多接口一样去继承多个 ( 抽象 ) 类\u003C\u002Fstrong\u003E。当出现菱形继承问题时，Groovy 会按照 \"\u003Cstrong\u003E最远原则\u003C\u002Fstrong\u003E\" 去处理。但和之前 \u003Ccode\u003E@Mixin\u003C\u002Fcode\u003E 注解不一样之处在：\u003Cstrong\u003E如果这个类本身有重写实现，那么就相当于消除了二义性， Groovy 就不会再考虑任何父特质的方法了\u003C\u002Fstrong\u003E。\u003C\u002Fp\u003E\n\u003Cp\u003E特质本身可以同时定义抽象方法和实例方法 ( 按 Scala 的说法就是 \"富特质\" )，或者只有其一。由于它的存在，Groovy 的 \u003Ccode\u003Einterface\u003C\u002Fcode\u003E 接口没有再引入 JDK 8 的  \"默认方法\" ( \u003Ccode\u003Edefault\u003C\u002Fcode\u003E 保留字在 Groovy 中无法用于接口 )。特质可以继承特质，但是特质无法继承类，或是实现接口。类可以实现 \u003Ccode\u003Eimplements\u003C\u002Fcode\u003E 特质，但是不能继承 \u003Ccode\u003Eextends\u003C\u002Fcode\u003E 特质。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-groovy copyable\" lang=\"groovy\"\u003Etrait Animal{\n    abstract def roar()\n}\n\ntrait Beast extends Animal{\n    def roar(){println \"beast yawn...\"}\n    def predate(){println \"prey ...\"}\n}\ntrait Bird extends Animal{\n    def roar(){println \"bird twitter...\"}\n    def fly(){ println \"hovering in the sky\"}\n}\n\n\u002F\u002F 由于 Bat 自身拥有此方法，因此 Groovy 不会再考虑 \"最远原则\"。\nclass Bat implements Beast,Bird{\n    @Override\n    def roar() {\n        println \"I'm BATMAN, I'm rich.\"\n    }\n}\n\ndef bat = new Bat()\n\u002F\u002F BAT MAN\nbat.roar()\nbat.fly()\nbat.predate()\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E",showSidebar:a,actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_CACHED_HTML:"view\u002Fcolumn\u002FFETCH_CACHED_HTML",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",FETCH_AUTHOR_EXTRA:"view\u002Fcolumn\u002FFETCH_AUTHOR_EXTRA",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:e,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"}}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:m}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:c},subCommentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:c}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:l},pinlist:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:t},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:c}},followedList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:b,category:k,categoryNavList:[],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}},team:{team:{},loading:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FFETCH",RESET:"@\u002Fview\u002Fteam\u002FRESET",UPDATE:"@\u002Fview\u002Fteam\u002FUPDATE",FOLLOW:"@\u002Fview\u002Fteam\u002FFOLLOW"},detailList:{actionType:{RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002FRESET"},posts:{list:[],hasMore:a,skeleton:a,loading:a,sort:m,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FRESET"}},pins:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FRESET"}},hire:{list:[],hasMore:a,cursor:f,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FRESET"}}}},couponList:{list:{"0":u,"1":u,"2":u}},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:[],unavailables:[]}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},ore:{oreCount:d},avatarMenuInfo:{},common:{theme:"light"},env:{ua:"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F107.0.0.0 Safari\u002F537.36",serverEnv:"production"},auth:{user:c,clientId:e,token:e},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},follow:{subscribedTagList:[]},error:{location:c,errorView:c,statusCode:200},abTest:{info:{}},suspensionPanel:{needSuspension:b},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:c,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is_show:d,start_time:d},voteData:{err_no:d,err_msg:"success",data:{face:{title:e,activity_id:"2024",start_time:1657814400,end_time:1668787200,status:n,image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fd4bdb22a62c64ebd9eadc0646d5b6a53~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F882fc263e36347ffbf6d598de520870e~tplv-k3u1fbpfcp-image.image",url:"https:\u002F\u002Fjuejin.cn\u002Fmagic\u002Feco\u002Fruntime\u002Frelease\u002F636c6d57dd25b303e84121e9?appType=juejin&magic_page_no=1",is_show:d},top:{title:o,activity_id:p,start_time:q,end_time:r,status:g,image:"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fac22d16bd96248f48b9f63ab747a1e04~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F4e7fb9a08a1d4f13889588806b35d2ba~tplv-k3u1fbpfcp-zoom-1.image?",url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=app_nav",is_show:g},web_top:{title:o,activity_id:p,start_time:q,end_time:r,status:g,image:j,close_image:j,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=web_nav",is_show:g},plugin_top:{title:o,activity_id:p,start_time:q,end_time:r,status:g,image:j,close_image:j,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=extension_nav",is_show:g},search_top:{title:"我的2021年度报告",activity_id:y,start_time:z,end_time:1642348799,status:n,image:A,close_image:B,url:"https:\u002F\u002Fjuejin.cn\u002Freport2021\u002Fmobile?utm_campaign=report_2021&utm_medium=app_search&share_title=2021%E6%8E%98%E5%8F%8B%E5%B9%B4%E5%BA%A6%E6%8A%A5%E5%91%8A&share_desc=%E8%A7%A3%E9%94%81%E5%B9%B4%E5%BA%A6%E6%8A%A5%E5%91%8A%EF%BC%8C%E9%A2%86%E5%8F%96%E4%B8%93%E5%B1%9E%E5%BE%BD%E7%AB%A0&share_image=https%3A%2F%2Fp9-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2F26a9012785e643a6a520ed63b513c57e~tplv-k3u1fbpfcp-image.image",is_show:d},web_search:{title:"字节内部课会员免费学",activity_id:y,start_time:z,end_time:1664121599,status:n,image:A,close_image:B,url:"https:\u002F\u002Fjuejin.cn\u002Fpost\u002F7143435263472041998?utm_source=search&utm_medium=OM&utm_campaign=vip_activity_kxj",is_show:d},jcode_top:{title:o,activity_id:p,start_time:q,end_time:r,status:g,image:j,close_image:j,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=code_nav",is_show:g},offer:{title:e,activity_id:"2020",start_time:1617638400,end_time:1618934400,status:n,image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2879410508de459c91ae8b7509ca75f8~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa38d640009e14c87a7d29cd95dee27dd~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin-activity.bytedance.net\u002Frank",is_show:d}}}},header:{leadStep:d,isPopupZlink:a},tcc:{tccConfig:c},route:{name:"column",path:v,hash:e,query:{},params:{id:w},fullPath:v,meta:{},from:{name:c,path:C,hash:e,query:{},params:{},fullPath:C,meta:{}}}},serverRendered:b,routePath:v,config:{API_HOST:"api.juejin.cn",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},SCM_VERSION:"1.0.0.5937",http:{}},globalRefs:{}}}(false,true,null,0,"","0",1,20,"topic","https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F759e2aa805c0461b840e0f0f09ed05fa~tplv-k3u1fbpfcp-zoom-1.image?","recommended","hot","newest",2,"1024 码上掘金编程挑战赛","2022",1666540800,1669823999,"following","popular",{},"\u002Fpost\u002F6962777564335046687","6962777564335046687",100,"2021",1641780000,"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa06289e83d9640c4b8504d2626cfbbee~tplv-k3u1fbpfcp-image.image","https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fe5199830276c4a85bc7c8cb8edecd54d~tplv-k3u1fbpfcp-image.image","\u002F"));</script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/1962f0f.js.下载" defer=""></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/7e1140b.js.下载" defer=""></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/7b24b05.js.下载" defer=""></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/8abf2a2.js.下载" defer=""></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/2d95a65.js.下载" defer=""></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/4809dd4.js.下载" defer=""></script><script src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/def72f5.js.下载" defer=""></script>
  

<link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/51.8344ef6.css" rel="stylesheet" type="text/css"><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/default.2050f18.css" rel="stylesheet" type="text/css"><div data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom" data-v-6bd26e03="" data-v-b7c4e7d2=""><div class="byte-modal__mask" style="z-index: 1000; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1000; display: none;"><div class="byte-modal__content" style="width:520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><div data-v-6bd26e03="" data-v-4fa94e66="" data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1001; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1001; display: none;"><div class="byte-modal__content" style="width: 520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/134.092fb39.css" rel="stylesheet" type="text/css"><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/177.290e99d.css" rel="stylesheet" type="text/css"><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/22.f94fff0.css" rel="stylesheet" type="text/css"><div data-v-41eefe39="" data-transfer="true" class="lead byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1002; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1002; display: none;"><div class="byte-modal__content" style="width: 500px;"><div class="byte-modal__header"><img data-v-41eefe39="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/MaskGroup.13dfc4f.png" alt="" loading="lazy" class="header-bgc"> <span data-v-41eefe39="" class="header-title">选择你感兴趣的技术方向</span><span aria-label="Close" class="byte-modal__headerbtn"><i class="byte-icon byte-icon--close"><svg t="1561638608887" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="441911" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441912"></path><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441913"></path></svg></i></span></div><div class="byte-modal__body"> <div data-v-41eefe39="" class="classify-box"><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V11.5C1 12.0523 1.44772 12.5 2 12.5H14C14.5523 12.5 15 12.0523 15 11.5V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM4.5 7.5C4.22386 7.5 4 7.72386 4 8V10C4 10.2761 4.22386 10.5 4.5 10.5H5C5.27614 10.5 5.5 10.2761 5.5 10V8C5.5 7.72386 5.27614 7.5 5 7.5H4.5ZM7 5.5C7 5.22386 7.22386 5 7.5 5H8C8.27614 5 8.5 5.22386 8.5 5.5V10C8.5 10.2761 8.27614 10.5 8 10.5H7.5C7.22386 10.5 7 10.2761 7 10V5.5ZM10.5 6.5C10.2239 6.5 10 6.72386 10 7V10C10 10.2761 10.2239 10.5 10.5 10.5H11C11.2761 10.5 11.5 10.2761 11.5 10V7C11.5 6.72386 11.2761 6.5 11 6.5H10.5Z" fill="#86909C"></path><rect data-v-41eefe39="" id="Rectangle 282" x="3" y="13.5" width="10" height="1.3" rx="0.5" fill="#86909C"></rect></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              后端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V6.5H15V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM15 7.8H1V13.5C1 14.0523 1.44772 14.5 2 14.5H14C14.5523 14.5 15 14.0523 15 13.5V7.8ZM8.65811 8.52566C8.92009 8.61298 9.06167 8.89614 8.97434 9.15811L7.97434 12.1581C7.88702 12.4201 7.60386 12.5617 7.34189 12.4743C7.07991 12.387 6.93833 12.1039 7.02566 11.8419L8.02566 8.84189C8.11298 8.57991 8.39614 8.43833 8.65811 8.52566ZM3.5 5.5C3.77614 5.5 4 5.27614 4 5C4 4.72386 3.77614 4.5 3.5 4.5C3.22386 4.5 3 4.72386 3 5C3 5.27614 3.22386 5.5 3.5 5.5ZM5.5 5C5.5 5.27614 5.27614 5.5 5 5.5C4.72386 5.5 4.5 5.27614 4.5 5C4.5 4.72386 4.72386 4.5 5 4.5C5.27614 4.5 5.5 4.72386 5.5 5ZM6.5 5.5C6.77614 5.5 7 5.27614 7 5C7 4.72386 6.77614 4.5 6.5 4.5C6.22386 4.5 6 4.72386 6 5C6 5.27614 6.22386 5.5 6.5 5.5ZM6.44721 9.27639C6.57071 9.52338 6.4706 9.82372 6.22361 9.94721L5.11803 10.5L6.22361 11.0528C6.4706 11.1763 6.57071 11.4766 6.44721 11.7236C6.32372 11.9706 6.02338 12.0707 5.77639 11.9472L3.77639 10.9472C3.607 10.8625 3.5 10.6894 3.5 10.5C3.5 10.3106 3.607 10.1375 3.77639 10.0528L5.77639 9.05279C6.02338 8.92929 6.32372 9.0294 6.44721 9.27639ZM9.77639 9.94721C9.5294 9.82372 9.42929 9.52338 9.55279 9.27639C9.67628 9.0294 9.97662 8.92929 10.2236 9.05279L12.2236 10.0528C12.393 10.1375 12.5 10.3106 12.5 10.5C12.5 10.6894 12.393 10.8625 12.2236 10.9472L10.2236 11.9472C9.97662 12.0707 9.67628 11.9706 9.55279 11.7236C9.42929 11.4766 9.5294 11.1763 9.77639 11.0528L10.882 10.5L9.77639 9.94721Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              前端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 287" x="5.7002" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 290" x="13.7002" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 288" x="9" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.86364V12.5C13 13.0523 12.5523 13.5 12 13.5H4C3.44772 13.5 3 13.0523 3 12.5V5.86364V5.77273C3 5.74067 3.00151 5.70897 3.00446 5.67768C3.11608 3.35397 5.30996 1.5 8 1.5C10.69 1.5 12.8839 3.35397 12.9955 5.67768C12.9985 5.70897 13 5.74067 13 5.77273V5.86364ZM7 6.25C7 6.66421 6.66421 7 6.25 7C5.83579 7 5.5 6.66421 5.5 6.25C5.5 5.83579 5.83579 5.5 6.25 5.5C6.66421 5.5 7 5.83579 7 6.25ZM9.75 7C10.1642 7 10.5 6.66421 10.5 6.25C10.5 5.83579 10.1642 5.5 9.75 5.5C9.33579 5.5 9 5.83579 9 6.25C9 6.66421 9.33579 7 9.75 7Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              Android
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39=""><g data-v-41eefe39="" id="pingguo-2 1"><path data-v-41eefe39="" id="Vector" d="M11.821 8.9388C11.8035 7.16562 13.267 6.31556 13.3322 6.27312C12.5097 5.06956 11.2287 4.90506 10.7724 4.88581C9.6821 4.77556 8.64523 5.52763 8.09179 5.52763C7.5401 5.52763 6.6861 4.902 5.78179 4.91863C4.59354 4.93613 3.49761 5.60944 2.88598 6.67387C1.65136 8.8163 2.56967 11.9899 3.77323 13.7277C4.36123 14.5782 5.06254 15.5332 5.98304 15.4991C6.86942 15.4637 7.20498 14.9255 8.27642 14.9255C9.34785 14.9255 9.64929 15.4991 10.5877 15.4816C11.5415 15.4637 12.1461 14.6149 12.7302 13.7618C13.4052 12.7752 13.6835 11.8197 13.6997 11.7707C13.6787 11.7611 11.8394 11.0567 11.821 8.9388ZM10.0584 3.73563C10.547 3.14281 10.8769 2.32031 10.7868 1.5C10.0829 1.52888 9.22973 1.969 8.72485 2.56006C8.2716 3.08463 7.87523 3.922 7.98154 4.72613C8.76729 4.78737 9.56923 4.32669 10.0584 3.73563Z" fill="#86909C"></path></g></g><defs data-v-41eefe39=""></defs></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              iOS
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 292" x="14" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 293" x="7.5" y="4.5" width="1" height="3" rx="0.5" fill="#86909C"></rect><circle data-v-41eefe39="" id="Ellipse 25" cx="8" cy="2.5" r="1" fill="#86909C"></circle><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 6.94772 3.44772 6.5 4 6.5H12C12.5523 6.5 13 6.94772 13 7.5V14.5C13 15.0523 12.5523 15.5 12 15.5H4C3.44772 15.5 3 15.0523 3 14.5V7.5ZM7 11.25C7 11.6642 6.66421 12 6.25 12C5.83579 12 5.5 11.6642 5.5 11.25C5.5 10.8358 5.83579 10.5 6.25 10.5C6.66421 10.5 7 10.8358 7 11.25ZM9.75 12C10.1642 12 10.5 11.6642 10.5 11.25C10.5 10.8358 10.1642 10.5 9.75 10.5C9.33579 10.5 9 10.8358 9 11.25C9 11.6642 9.33579 12 9.75 12Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              人工智能
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><g data-v-41eefe39="" id="kaifagongjuicon-hui 1"><path data-v-41eefe39="" id="Vector" d="M14.212 5.04986L13.497 5.76886C13.3158 5.95088 13.1005 6.09531 12.8633 6.19386C12.6261 6.29242 12.3718 6.34315 12.115 6.34315C11.8582 6.34315 11.6039 6.29242 11.3667 6.19386C11.1295 6.09531 10.9142 5.95088 10.733 5.76886C10.3664 5.39915 10.1606 4.89955 10.1606 4.37886C10.1606 3.85817 10.3664 3.35857 10.733 2.98886L11.448 2.26986C11.843 1.87286 11.579 1.40486 10.868 1.51686C10.028 1.64786 9.262 2.07586 8.709 2.72286C8.005 3.41786 7.682 4.66486 7.922 5.81786L1.927 11.8469C1.56096 12.2165 1.35562 12.7157 1.35562 13.2359C1.35562 13.7561 1.56096 14.2552 1.927 14.6249C2.10804 14.807 2.32329 14.9515 2.56038 15.0501C2.79747 15.1487 3.05172 15.1995 3.3085 15.1995C3.56528 15.1995 3.81953 15.1487 4.05662 15.0501C4.29371 14.9515 4.50896 14.807 4.69 14.6249L10.686 8.59486C11.2693 8.7189 11.8745 8.69473 12.446 8.52459C13.0176 8.35444 13.5375 8.04373 13.958 7.62086C14.5581 7.01861 14.9243 6.22244 14.991 5.37486C15.071 4.91886 14.607 4.65286 14.212 5.04986ZM3.768 13.6979C3.67659 13.7885 3.56041 13.85 3.4341 13.8747C3.30779 13.8994 3.17699 13.8861 3.05819 13.8366C2.93939 13.7871 2.8379 13.7036 2.76651 13.5965C2.69511 13.4894 2.65701 13.3636 2.657 13.2349C2.65647 13.0618 2.72462 12.8957 2.84649 12.7729C2.96836 12.6501 3.13399 12.5807 3.307 12.5799C3.487 12.5799 3.651 12.6529 3.768 12.7719C3.888 12.8889 3.96 13.0539 3.96 13.2349C3.9604 13.3209 3.94363 13.4062 3.91066 13.4857C3.87769 13.5652 3.82919 13.6373 3.768 13.6979ZM3.118 5.16786L5.377 7.43986L6.297 6.51286L4.04 4.24286L3.535 3.27086L1.92 2.11186L1 3.03986L2.151 4.66086L3.118 5.16786ZM10.672 9.98586C10.642 9.95526 10.6062 9.93095 10.5667 9.91436C10.5272 9.89776 10.4848 9.88921 10.442 9.88921C10.3992 9.88921 10.3568 9.89776 10.3173 9.91436C10.2778 9.93095 10.242 9.95526 10.212 9.98586L8.83 11.3759C8.79955 11.4062 8.7754 11.4423 8.75891 11.482C8.74243 11.5218 8.73395 11.5644 8.73395 11.6074C8.73395 11.6504 8.74243 11.693 8.75891 11.7327C8.7754 11.7724 8.79955 11.8085 8.83 11.8389L12.09 15.1169C12.2106 15.2383 12.3541 15.3348 12.5122 15.4006C12.6703 15.4663 12.8398 15.5002 13.011 15.5002C13.1822 15.5002 13.3517 15.4663 13.5098 15.4006C13.6679 15.3348 13.8114 15.2383 13.932 15.1169C14.442 14.6049 14.442 13.7769 13.932 13.2639L10.672 9.98586Z" fill="#86909C"></path></g></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              开发工具
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5C1 1.94772 1.44772 1.5 2 1.5H14C14.5523 1.5 15 1.94772 15 2.5V14.5C15 15.0523 14.5523 15.5 14 15.5H2C1.44772 15.5 1 15.0523 1 14.5V2.5ZM3 5C3 4.72386 3.22386 4.5 3.5 4.5H12.5C12.7761 4.5 13 4.72386 13 5V5.3C13 5.57614 12.7761 5.8 12.5 5.8H3.5C3.22386 5.8 3 5.57614 3 5.3V5ZM3.5 7.5C3.22386 7.5 3 7.72386 3 8V8.3C3 8.57614 3.22386 8.8 3.5 8.8H4.5C4.77614 8.8 5 8.57614 5 8.3V8C5 7.72386 4.77614 7.5 4.5 7.5H3.5ZM7 8C7 7.72386 7.22386 7.5 7.5 7.5H8.5C8.77614 7.5 9 7.72386 9 8V8.3C9 8.57614 8.77614 8.8 8.5 8.8H7.5C7.22386 8.8 7 8.57614 7 8.3V8ZM11.5 7.5C11.2239 7.5 11 7.72386 11 8V8.3C11 8.57614 11.2239 8.8 11.5 8.8H12.5C12.7761 8.8 13 8.57614 13 8.3V8C13 7.72386 12.7761 7.5 12.5 7.5H11.5ZM3 11C3 10.7239 3.22386 10.5 3.5 10.5H7.5C7.77614 10.5 8 10.7239 8 11V11.3C8 11.5761 7.77614 11.8 7.5 11.8H3.5C3.22386 11.8 3 11.5761 3 11.3V11ZM10.5 10.5C10.2239 10.5 10 10.7239 10 11V11.3C10 11.5761 10.2239 11.8 10.5 11.8H12.5C12.7761 11.8 13 11.5761 13 11.3V11C13 10.7239 12.7761 10.5 12.5 10.5H10.5Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              代码人生
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M14.9187 7.03385C15.0999 7.26744 14.9466 7.7 14.651 7.7H6.32905V4.5H5.02905V7.7H3.6C2.16406 7.7 1 6.53594 1 5.1C1 3.66406 2.16406 2.5 3.6 2.5H14.651C14.9466 2.5 15.0999 2.93257 14.9188 3.16616C14.5064 3.69779 14.2602 4.36959 14.2602 5.10001C14.2602 5.83043 14.5064 6.50222 14.9187 7.03385Z" fill="#86909C"></path><path data-v-41eefe39="" id="Subtract_2" fill-rule="evenodd" clip-rule="evenodd" d="M1.34902 14.5008C1.0534 14.5008 0.900077 14.0682 1.08126 13.8346C1.49363 13.303 1.7398 12.6312 1.7398 11.9008C1.7398 11.1704 1.49362 10.4986 1.08125 9.96694C0.900064 9.73335 1.05339 9.30078 1.34901 9.30078H12.4C13.8359 9.30078 15 10.4648 15 11.9008C15 13.3367 13.8359 14.5008 12.4 14.5008H1.34902Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              阅读
            </span></div></div></div></div> <!----></div><div class="byte-modal__footer"><div data-v-41eefe39="" class="left">跳过</div> <div data-v-41eefe39="" class="mid" style="display: none;">上一步</div> <div data-v-41eefe39="" class="right">
      至少选择1个分类
    </div></div></div></div></div><div data-v-8bb78912="" data-transfer="true" class="upgrade-new-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1003; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1003; display: none;"><div class="byte-modal__content" style="width: 311px;"><div class="byte-modal__header"><span class="byte-modal__title"></span><!----></div><div class="byte-modal__body"> <!----> <div data-v-8bb78912="" class="close-icon"><img data-v-8bb78912="" src="./一文通读 Groovy 元对象协议 MOP - 掘金_files/8867e249c23a7c0ea596c139befc04d7.svg" alt=""></div></div><!----></div></div></div><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/36.6f090be.css" rel="stylesheet" type="text/css"><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/153.4faa841.css" rel="stylesheet" type="text/css"><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/9.4cd501f.css" rel="stylesheet" type="text/css"><link href="./一文通读 Groovy 元对象协议 MOP - 掘金_files/83.ca68669.css" rel="stylesheet" type="text/css"></body><div style="all: initial;"><div id="__hcfy__" style="all: initial;"></div></div></html>